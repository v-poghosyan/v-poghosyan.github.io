<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vahram Poghosyan">
<meta name="dcterms.date" content="2023-01-13">

<title>Vahram’s blog - Functional Programming</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-KLCX05QFPN"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-KLCX05QFPN', { 'anonymize_ip': true});
</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Vahram’s blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Functional Programming</li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Posts</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Functional Programming</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/functional_programming/functional_programming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Functional Programming</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">General Computer Science</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/general_computer_science/recursion_optimizations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Recursion Optimizations</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Leetcode</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/leetcode/lc11_container_with_most_water.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">LC11 - Container with Most Water</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/leetcode/lc121_best_time_to_buy_and_sell_stock.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">LC121 - Best Time to Buy and Sell Stock</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Linear Algebra</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/linear_algebra/linear_algebra_refresher_for_optimization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Linear Algebra for Optimization</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Optimization</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/optimization/algorithms-for-unconstrained-optimization-gradient-descent.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Algorithms for Unconstrained Optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/optimization/duality-theory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Duality Theory</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/optimization/introduction_to_optimization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/optimization/linear-programs-and-lp-geometry.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Linear Programs and LP Geometry</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/optimization/robust-lps-modelling-discrete-failures.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Robust Linear Programs - Modelling Discrete Failures</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction-to-functional-programming-fp" id="toc-introduction-to-functional-programming-fp" class="nav-link active" data-scroll-target="#introduction-to-functional-programming-fp">Introduction to Functional Programming (FP)</a>
  <ul>
  <li><a href="#mathematical-functions" id="toc-mathematical-functions" class="nav-link" data-scroll-target="#mathematical-functions">Mathematical Functions</a></li>
  <li><a href="#pure-functions-and-side-effects" id="toc-pure-functions-and-side-effects" class="nav-link" data-scroll-target="#pure-functions-and-side-effects">Pure Functions and Side Effects</a>
  <ul>
  <li><a href="#properties-of-pure-functions-software-engineering-perspective" id="toc-properties-of-pure-functions-software-engineering-perspective" class="nav-link" data-scroll-target="#properties-of-pure-functions-software-engineering-perspective">Properties of Pure Functions: Software Engineering Perspective</a>
  <ul class="collapse">
  <li><a href="#nice-consequences-of-working-with-pure-functions" id="toc-nice-consequences-of-working-with-pure-functions" class="nav-link" data-scroll-target="#nice-consequences-of-working-with-pure-functions">Nice Consequences of Working With Pure Functions</a></li>
  </ul></li>
  <li><a href="#declarative-vs-imperative-styles" id="toc-declarative-vs-imperative-styles" class="nav-link" data-scroll-target="#declarative-vs-imperative-styles">Declarative vs Imperative Styles</a></li>
  <li><a href="#side-effects" id="toc-side-effects" class="nav-link" data-scroll-target="#side-effects">Side Effects</a></li>
  </ul></li>
  <li><a href="#instructions-or-statements-vs-expressions" id="toc-instructions-or-statements-vs-expressions" class="nav-link" data-scroll-target="#instructions-or-statements-vs-expressions">Instructions (or Statements) vs Expressions</a>
  <ul>
  <li><a href="#conditional-statements-and-loops" id="toc-conditional-statements-and-loops" class="nav-link" data-scroll-target="#conditional-statements-and-loops">Conditional Statements and Loops</a></li>
  <li><a href="#recursion-vs-iteration-and-higher-order-functions-hofs" id="toc-recursion-vs-iteration-and-higher-order-functions-hofs" class="nav-link" data-scroll-target="#recursion-vs-iteration-and-higher-order-functions-hofs">Recursion vs Iteration and Higher-Order Functions (HOFs)</a></li>
  <li><a href="#functional-programming-benefits" id="toc-functional-programming-benefits" class="nav-link" data-scroll-target="#functional-programming-benefits">Functional Programming Benefits</a>
  <ul class="collapse">
  <li><a href="#parallelization-parallel-programming" id="toc-parallelization-parallel-programming" class="nav-link" data-scroll-target="#parallelization-parallel-programming">Parallelization / Parallel Programming</a></li>
  </ul></li>
  <li><a href="#functional-programming-hazards" id="toc-functional-programming-hazards" class="nav-link" data-scroll-target="#functional-programming-hazards">Functional Programming Hazards</a>
  <ul class="collapse">
  <li><a href="#tail-recursion---avoiding-stack-overflow" id="toc-tail-recursion---avoiding-stack-overflow" class="nav-link" data-scroll-target="#tail-recursion---avoiding-stack-overflow">Tail Recursion - Avoiding Stack Overflow</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#currying" id="toc-currying" class="nav-link" data-scroll-target="#currying">Currying</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Functional Programming</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Functional Programming</div>
    <div class="quarto-category">Recursion</div>
    <div class="quarto-category">Scala</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Vahram Poghosyan </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 13, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="introduction-to-functional-programming-fp" class="level1">
<h1>Introduction to Functional Programming (FP)</h1>
<p>Functional programming draws inspiration from the mathematical definition of a function which is a well-defined operation on sets.</p>
<section id="mathematical-functions" class="level2">
<h2 class="anchored" data-anchor-id="mathematical-functions">Mathematical Functions</h2>
<p>Take <span class="math inline">\(f: X \rightarrow Y\)</span>, which is a <strong>function</strong> that maps elements of set <span class="math inline">\(X\)</span> to those of set <span class="math inline">\(Y\)</span> such that for each <span class="math inline">\(x\)</span> in set <span class="math inline">\(X\)</span> (also denoted as “<span class="math inline">\(x \in X\)</span>”), there’s <em>one and only one</em> <span class="math inline">\(y \in Y\)</span> which satisfies <span class="math inline">\(f(x) = y\)</span>. In ordinary language, we say that a mathematical function maps any given input to a unique output. That’s not to say that <span class="math inline">\(f\)</span> can’t map the two different <span class="math inline">\(x\)</span>’s to the same <span class="math inline">\(y\)</span>, but it can’t map the same <span class="math inline">\(x\)</span> to more than one <span class="math inline">\(y\)</span>. Notice that the output in set <span class="math inline">\(Y\)</span> depends <em>only</em> on the input from set <span class="math inline">\(X\)</span>, and that the function <span class="math inline">\(f\)</span> <em>only</em> operates on set <span class="math inline">\(X\)</span> and nothing external to it. In other words there is no <em>hidden state</em> (i.e.&nbsp;some value outside <span class="math inline">\(X\)</span>) that affects <span class="math inline">\(f\)</span>-s output, so <span class="math inline">\(f\)</span> always produces predictable output. Also, <span class="math inline">\(f\)</span> doesn’t affect any element in <span class="math inline">\(X\)</span> (or, for that matter, <span class="math inline">\(Y\)</span>). The expression <span class="math inline">\(f(x)\)</span> is simply understood as the function <span class="math inline">\(f\)</span> applied to an element <span class="math inline">\(x \in X\)</span> which produces a value from the set <span class="math inline">\(Y\)</span> (but, once again, it’s not like <em>the</em> specific element in the set <span class="math inline">\(Y\)</span> is somehow retrieved or affected in any way).</p>
</section>
<section id="pure-functions-and-side-effects" class="level2">
<h2 class="anchored" data-anchor-id="pure-functions-and-side-effects">Pure Functions and Side Effects</h2>
<p>In functional programming, we loosely think of built-in <strong>types</strong> or <strong>abstract classes</strong> (i.e.&nbsp;some chunks of computer memory) as being like sets. This lets us, somewhat awkwardly, pluck the mathematical definition of a function from the concrete world of mathematics and bring it into the practical world of software engineering.</p>
<p>A <strong>pure function</strong> then, in the FP sense, is a function which depends only on its input (and not on any other value stored elsewhere in external computer memory or other external source) and it affects nothing outside itself. Additionally, like the mathematical functions they try to emulate, pure functions <em>have</em> to output a value and that value must be unique for a given input.</p>
<p>To recap, here are the above properties again.</p>
<section id="properties-of-pure-functions-software-engineering-perspective" class="level3">
<h3 class="anchored" data-anchor-id="properties-of-pure-functions-software-engineering-perspective">Properties of Pure Functions: Software Engineering Perspective</h3>
<ol type="1">
<li>A pure function must return a single output for a given input</li>
<li>A pure function’s output should only depend on its input (in other words, no external hidden state should affect the output)</li>
<li>A pure function shouldn’t change any external state (i.e.&nbsp;an external chunk of computer memory)</li>
<li><span id="my-text-highlight">There shall be no mutation of state, in general</span></li>
</ol>
<section id="nice-consequences-of-working-with-pure-functions" class="level4">
<h4 class="anchored" data-anchor-id="nice-consequences-of-working-with-pure-functions">Nice Consequences of Working With Pure Functions</h4>
<p>Working with pure functions conveys some great benefits. For instance, properties 1 and 2 make pure functions interchangeable with their output value just as, say, <span class="math inline">\(f(2)\)</span> given <span class="math inline">\(f(x)=x^2\)</span> can, just as well, stand in for the number <span class="math inline">\(4\)</span>. This allows us to pass pure functions as arguments into other pure functions, as well as return pure functions from other pure functions with entirely predictable results just as we often do in mathematics where we are comfortable substituting the representation of a value for the value itself (for instance when computing partial derivatives on computation graphs or, as it’s more commonly known, calculating the gradient of the loss function using a back-propagation algorithm in machine learning). By contrast, if our functions affected external state somewhere or produced other such <strong>effects</strong> (more on these in the section on <strong>side effects</strong>) such as returning random output or some other type of non-deterministic output (i.e.&nbsp;output that doesn’t strictly depend on input), it would be a lot more difficult to model our programs as pure chains of function calls (making them harder to reason about mathematically). So, functional programs are essentially those programs that are as close to being represented as a composition of pure functions as we can get. There is also some mathematical syntactic sugar that comes with reasoning about our software as a complex chain of pure functions. It’s the difference between having a <em>declarative</em> (as opposed to an <em>imperative</em>) style of writing software. Read the next section to see what <em>declarative</em> and <em>imperative</em> mean in the given context.</p>
</section>
</section>
<section id="declarative-vs-imperative-styles" class="level3">
<h3 class="anchored" data-anchor-id="declarative-vs-imperative-styles">Declarative vs Imperative Styles</h3>
<p>At a basic level, an <em>imperative</em> style of programming can be likened to cooking at home with a cookbook. Imperative languages look more like a list of commands directed at the computer. Declarative writing, by contrast, can be compared to dining at a restaurant. We aren’t issuing commands at a grueling level of granularity (e.g.&nbsp;iterating over an array manually, appending to a list manually, etc.). Instead, we’re specifying the desired outcome without the implementation details like we would in mathematics when we, for instance, write <span class="math inline">\(f(x)=x^2\)</span> succinctly and know it to mean <em>“square the value of <span class="math inline">\(x\)</span> if <span class="math inline">\(x\)</span> is scalar, or square every feature of <span class="math inline">\(x\)</span> if <span class="math inline">\(x\)</span> is a vector.”</em></p>
<p>In the imperative style, we’re saying “step through the list, read each item, square it and append it to a new list.” In the declarative style we’re simply saying “square every element of the list.” Of course these differences are semantic, and in real life software contains a healthy mix of both styles. The distinction is not really black or white, and is often dependent on the implementation of the given language.</p>
<p>However, an example is worth a thousand words and, since Python provides a good enough playground for showcasing both of these styles, here is an example in Python.</p>
<p><strong>Imperative Style</strong></p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>squared <span class="op">=</span> []</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> num <span class="kw">in</span> numbers:</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    squared.append(num <span class="op">**</span> <span class="dv">2</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(squared)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1, 4, 9, 16, 25]</code></pre>
</div>
</div>
<p><strong>Declarative Style</strong></p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>squared <span class="op">=</span> <span class="bu">map</span>(<span class="kw">lambda</span> x: x<span class="op">**</span><span class="dv">2</span>, numbers)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">list</span>(squared))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1, 4, 9, 16, 25]</code></pre>
</div>
</div>
</section>
<section id="side-effects" class="level3">
<h3 class="anchored" data-anchor-id="side-effects">Side Effects</h3>
<p>Functions which violate any of these properties are said to produce <strong>side effects</strong>. The most common side effect is when a function modifies state (i.e.&nbsp;a chunk of computer memory) outside itself (violating property 3). Examples of side effects include:</p>
<table class="table">
<colgroup>
<col style="width: 26%">
<col style="width: 73%">
</colgroup>
<thead>
<tr class="header">
<th>Effect</th>
<th>Functional Programming Way</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>A function directly modifying a variable defined in the global scope.</td>
<td>The FP approach is to pass the global variable as input instead, and have the function return a modified copy of the input.</td>
</tr>
<tr class="even">
<td>A function writing to an external database.</td>
<td>This is an example of an <em>unavoidable side effect</em> in practice. The FP approach is to mitigate. Specifics are language dependent, but usually the strategy involves gathering all such unavoidable side effects into one impure corner of the code, and keeping the rest of the code pure.</td>
</tr>
<tr class="odd">
<td>A function like the built-in functions of printing to the console, retrieving system time, or a random number generator (or those functions which use them)</td>
<td>Yet more examples of unavoidable side effects. Such functions are inherently dependent on external or hidden state such as the time of day in the real world and, in general, things other than their input.</td>
</tr>
</tbody>
</table>
<p>Although some side effects are unavoidable, we should minimize their use in our code. Functional programming languages offer to do just that.</p>
</section>
</section>
<section id="instructions-or-statements-vs-expressions" class="level2">
<h2 class="anchored" data-anchor-id="instructions-or-statements-vs-expressions">Instructions (or Statements) vs Expressions</h2>
<p>In functional programming, we also distinguish between mere <strong>instructions</strong> to the computer (also known as <strong>statements</strong>) and <strong>expressions</strong>. This distinction is similar to the distinction between functions in the traditional programming sense and pure functions in that expressions must also return a value. Contrast this requirement with instructions like the <code>if</code>/<code>else</code> statements and <code>while</code> loops which simply direct the control flow but don’t necessarily evaluate to anything.</p>
<p>As mentioned earlier, the use of instructions and impure functions is unavoidable at times. Different languages have different strategies of mitigating these impurities. Usually the aim is to gather the impurities together at the top in some clearly demarcated lexical block. Furthermore, some languages (such as Scala which is a blend of OOP and FP), go to great lengths to minimize side effects by enforcing the return requirement on instructions. All instructions in Scala evaluate to a value, effectively making them expressions.</p>
<p>The idea is to use a clever type system to capture impurities. If side effects must exist, they should be known to Scala. To achieve this, instructions in Scala return a type known as <code>Unit</code> which can hold only <code>()</code> as its value. So, in Scala, instructions are essentially treated as expressions which return this very specific type. We will see an example illustrating the power of this design choice in the next section.</p>
<p>We already touched on this briefly when we discussed declarative and imperative styles of writing code, but the distinction between instruction and expression further leads functional programming to favor certain programming styles over others.</p>
<section id="conditional-statements-and-loops" class="level3">
<h3 class="anchored" data-anchor-id="conditional-statements-and-loops">Conditional Statements and Loops</h3>
<p>In functional languages like Scala, <code>if</code> statements are implemented as expressions similar to the familiar <strong>ternary expressions</strong> in Python. Scala also has <code>if</code> statement like the regular <code>if</code> statements of Python, but the expression is what’s preferred. Here are some examples to show the FP approach to writing <code>if</code> statements in both languages:</p>
<p><strong>Python:</strong></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">1</span> <span class="cf">if</span> condition <span class="op">==</span> <span class="va">True</span> <span class="cf">else</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Scala:</strong></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode scala code-with-copy"><code class="sourceCode scala"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> x <span class="op">=</span> <span class="cf">if</span> <span class="op">(</span>condition<span class="op">)</span> <span class="dv">1</span> <span class="cf">else</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this example, <code>x</code> evaluates to a value: one of possible two. The <code>if</code> expression may still produce a side effect, but it’s not as open-ended as a normal <code>if</code> statement. In a normal <code>if</code> statement, the programmer <em>might</em> do something entirely crazy and unheard of such as accessing a database, or printing a line to the console (both considered side effects).</p>
<p>This brings us to an important point. It’s not that <code>if</code> statements would <em>necessarily</em> result in side effects, it’s that functional programming simply discourages the use of language constructs that lend themselves to producing side effects. Syntactic choices like this are a common theme in FP. For instance, Scala’s choice to treat <code>()</code> as a returnable value rather than just syntax is very deliberate. In Scala, <code>for</code>-comprehensions are favored over <code>for</code> loops.</p>
<p><strong>Scala For Comprehension:</strong></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode scala code-with-copy"><code class="sourceCode scala"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> myNewList <span class="op">=</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">{</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>        element <span class="op">&lt;-</span> myOldList</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">yield</span> <span class="op">(</span>element<span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>It’s important to note that this isn’t the best way to copy a list in Scala, it’s just a toy example of <code>for</code>-comprehensions with the intent to illustrate two things about them:</p>
<ul>
<li>The <code>for</code> comprehension is treated as an expression which returns a value captured by <code>myNewList</code></li>
<li>If returning no value, we’d normally simply say <code>yield ()</code>. However, because of Scala’s clever design, <code>()</code> actually <em>is</em> a value in Scala so even instructions, which normally wouldn’t return anything, do return something in Scala</li>
</ul>
</section>
<section id="recursion-vs-iteration-and-higher-order-functions-hofs" class="level3">
<h3 class="anchored" data-anchor-id="recursion-vs-iteration-and-higher-order-functions-hofs">Recursion vs Iteration and Higher-Order Functions (HOFs)</h3>
<p>Similarly, <code>while</code> loops (and to a lesser extent also <code>for</code> loops) are considered bad practice in functional programming because, of course, the iterator is modified at each iteration and <span id="my-text-highlight">functional programming frowns upon mutation of state in general</span>. Take, for example, a while loop that runs until a key press (or any other user input). Of course, this may be an unavoidable side effect in many cases. But then the FP approach would just be to contain this impurity somewhere with the rest of its kind.</p>
<p>In general, instead of <strong>iteration</strong>, <strong>recursion</strong> (or, more generally, <strong>function composition</strong>) is preferred. Of course, recursion is the best choice anyway if our data is represented in a recursive data structure (like a tree) or when the problem has <em>some</em> optimal substructure, but FP prefers this approach in general. This may sound unreasonable at first but a couple of familiar examples of function composition that’s have been adopted by popular languages like Python are the <code>map</code> and the <code>filter</code> functions. We already saw an example of <code>map</code> in the declarative code snippet above, so we won’t dive into its details here. Both <code>map</code>and <code>filter</code> are examples of <strong>higher-order functions</strong> (<strong>HOF</strong>s) – functions that either take other functions as input or output other functions. The <code>map</code> and <code>filter</code> functions show that function composition can be very readable and intuitive. Furthermore, neither <code>map</code> nor <code>filter</code> modify their input in-place but rather return a modified copy of it avoiding external state mutation which, as we know, is considered good practice in FP.</p>
</section>
<section id="functional-programming-benefits" class="level3">
<h3 class="anchored" data-anchor-id="functional-programming-benefits">Functional Programming Benefits</h3>
<section id="parallelization-parallel-programming" class="level4">
<h4 class="anchored" data-anchor-id="parallelization-parallel-programming">Parallelization / Parallel Programming</h4>
<p>In terms of <em>parallelization</em>, both iterative and recursive solutions can be <em>sequential processes</em>, which don’t lend themselves well to parallelization, or <em>independent processes</em> which do. However, FP still confers some benefit in terms of parallelization – not because it favors recursion but, instead, because:</p>
<ul>
<li>A common challenge in parallel programming is to avoid mutating data while another <strong>thread</strong> is using it. Due to state immutability principles in FP, this problem is eliminated</li>
<li>FP avoids writing functions which rely on hidden state (i.e.&nbsp;any state that’s not a direct input), so functions can be executed in parallel without the concern of synchronizing access to some shared state.</li>
<li>FP can make it easier to identify opportunities for parallelization</li>
<li>Languages which are built around FP have powerful parallelization libraries that offer parallelized versions of common operations like <code>map</code></li>
</ul>
</section>
</section>
<section id="functional-programming-hazards" class="level3">
<h3 class="anchored" data-anchor-id="functional-programming-hazards">Functional Programming Hazards</h3>
<section id="tail-recursion---avoiding-stack-overflow" class="level4">
<h4 class="anchored" data-anchor-id="tail-recursion---avoiding-stack-overflow">Tail Recursion - Avoiding Stack Overflow</h4>
<p>If we’re going to favor the use of recursion (or, in general function composition) in FP over the more imperative style of writing iterative algorithms, we ought to tread carefully as to not cause <strong>stack overflow</strong> (which, as we know, is when the system runs out of working memory). <strong>Tail recursion optimization</strong> (similar to other techniques like <strong>memoization</strong>) helps us drastically cut the amount of stack memory used. It takes a constant amount of memory on the stack, instead of the linear, with input size, or worse. Read more about tail recursive optimization <a href="../general_computer_science/recursion_optimizations.ipynb">here</a>.</p>
</section>
</section>
</section>
<section id="currying" class="level2">
<h2 class="anchored" data-anchor-id="currying">Currying</h2>
<p>TODO - Move Sections</p>
<p>Organize:</p>
<ul>
<li>Math functions</li>
<li>Pure functions in a pure world
<ul>
<li>Benefits
<ul>
<li>Mathematical clarity: Touch on declarative vs imperative style (f(x) equivalent is a function with a loop implemented inside…)</li>
<li>Mathematical syntactic sugar: Imperative Style vs Declarative</li>
<li>Parallelism</li>
</ul></li>
</ul></li>
<li>Impediments to purity
<ul>
<li>Mutation of state</li>
<li>Restrictions on Input/Output
<ul>
<li>Unrestricted vs properties 1 &amp; 2</li>
</ul></li>
<li>Side Effects
<ul>
<li>Property 3</li>
</ul></li>
<li>Expressions vs Instructions</li>
</ul></li>
<li>List Functional Program Properties</li>
<li>Bridging the Gap
<ul>
<li>Expressions vs Instructions - Enforcing a Type on Side Effects</li>
<li>Higher Order Functions
<ul>
<li>Loops/Iteration vs Function Composition/Recursion</li>
<li>Map in the imperative vs declarative style section was a HoF, so is flatMap</li>
<li>Significance of flatMap - Chaining Side Effect Producing Operations (helps contain side effects inside one function, say)</li>
</ul></li>
<li>Currying: makes dependency injection possible which makes all functions pure (which caveats)!
<ul>
<li>Partial Application: https://www.youtube.com/watch?v=5lY7caTLyXA</li>
<li>The Curried function is a HoF</li>
</ul></li>
</ul></li>
<li>Monads
<ul>
<li>Functors are types that support map</li>
<li>Monads are types that support also flatMap (so you want your Side Effect type to be a monad)</li>
<li>https://www.youtube.com/watch?v=HIBTu-y-Jwk&amp;t=806s</li>
</ul></li>
</ul>
<p>So we need HoFs to group impurities in one spot. One HoF that helps is flatMap. Also, the language needs a void type that’s a monad (i.e.&nbsp;supports flatMap) for chaining multiple side effect producing operations and centralizing them in one spot. Furthermore, to make things pure we use dependency injection (where a dependency, such as a database system, is injected into a function as input). Some languages support currying natively, but we can always define the curried version of our functions manually. The curried version is also a HoF so HoFs are useful in, both, grouping impurities as well as converting impure functions into pure functions. And what’s a monad? a Monad is just a special type that supports the flatMap HoF. Our side effect, implemented as a type, needs to be a monad so that we get the benefits of being able to centralize and manage side effects using either HoFs flatMap or curried functions. Curried functions don’t guarantee purity. For example when passing a database layer, we don’t know if it’s an actual physical database or not (which would indeed propagate as a side effect). However, with currying we can at least pass a mock database layer for unit testing into the curried <code>...withDependencies</code> pure function. Curried functions require only one input at a time, allowing us to more naturally model some real life scenarios. For example, cash machine (https://www.youtube.com/watch?v=psmu_VAuiag).</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add(x):</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> partialAdd(y):</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> y <span class="op">+</span> x</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> partialAdd(x)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span> <span class="op">=</span> add(x)(y) <span class="co"># Rather than add(x,y) as would the un-curried version be called</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2021, Vahram Poghosyan</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.github.com/v-poghosyan">
      <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/vahrampoghosyan/">
      <i class="bi bi-linkedin" role="img" aria-label="GitHub">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>
<script type="application/javascript" src="../../javascript/light-dark.js"></script>



</body></html>