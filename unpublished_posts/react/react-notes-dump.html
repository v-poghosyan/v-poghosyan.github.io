<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vahram Poghosyan">
<meta name="dcterms.date" content="2025-11-03">

<title>React Notes Dump – v-poghosyan</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-KLCX05QFPN"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-KLCX05QFPN', { 'anonymize_ip': true});
</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../assets/site/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">v-poghosyan</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Info</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-left">
      <div class="quarto-title-block"><div><h1 class="title">React Notes Dump</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source" data-quarto-source-url="https://github.com/v-poghosyan/palettes"><i class="bi"></i> Code</button></div></div>
                                <div class="quarto-categories">
                <div class="quarto-category">React</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta column-page-left">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Vahram Poghosyan </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 3, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#a-taste-of-react" id="toc-a-taste-of-react" class="nav-link active" data-scroll-target="#a-taste-of-react">A Taste of React</a>
  <ul class="collapse">
  <li><a href="#hosting" id="toc-hosting" class="nav-link" data-scroll-target="#hosting">Hosting</a></li>
  <li><a href="#imports" id="toc-imports" class="nav-link" data-scroll-target="#imports">Imports</a></li>
  <li><a href="#components" id="toc-components" class="nav-link" data-scroll-target="#components">Components</a></li>
  </ul></li>
  <li><a href="#introducing-jsx" id="toc-introducing-jsx" class="nav-link" data-scroll-target="#introducing-jsx">Introducing JSX</a>
  <ul class="collapse">
  <li><a href="#how-babel-works" id="toc-how-babel-works" class="nav-link" data-scroll-target="#how-babel-works">How Babel Works</a></li>
  <li><a href="#embedding-js-into-jsx" id="toc-embedding-js-into-jsx" class="nav-link" data-scroll-target="#embedding-js-into-jsx">Embedding JS into JSX</a></li>
  <li><a href="#conditionals-in-jsx" id="toc-conditionals-in-jsx" class="nav-link" data-scroll-target="#conditionals-in-jsx">Conditionals in JSX</a></li>
  <li><a href="#standard-react-app-layout" id="toc-standard-react-app-layout" class="nav-link" data-scroll-target="#standard-react-app-layout">Standard React App Layout</a></li>
  </ul></li>
  <li><a href="#props-and-more" id="toc-props-and-more" class="nav-link" data-scroll-target="#props-and-more">Props and More</a>
  <ul class="collapse">
  <li><a href="#introduction-to-props" id="toc-introduction-to-props" class="nav-link" data-scroll-target="#introduction-to-props">Introduction to Props</a></li>
  <li><a href="#prop-requirements" id="toc-prop-requirements" class="nav-link" data-scroll-target="#prop-requirements">Prop Requirements</a></li>
  <li><a href="#looping-jsx" id="toc-looping-jsx" class="nav-link" data-scroll-target="#looping-jsx">Looping JSX</a></li>
  <li><a href="#default-props" id="toc-default-props" class="nav-link" data-scroll-target="#default-props">Default Props</a></li>
  <li><a href="#styling-with-react" id="toc-styling-with-react" class="nav-link" data-scroll-target="#styling-with-react">Styling with React</a></li>
  <li><a href="#conditional-styling" id="toc-conditional-styling" class="nav-link" data-scroll-target="#conditional-styling">Conditional Styling</a></li>
  </ul></li>
  <li><a href="#create-react-app" id="toc-create-react-app" class="nav-link" data-scroll-target="#create-react-app">Create React App</a>
  <ul class="collapse">
  <li><a href="#intro-to-create-react-app" id="toc-intro-to-create-react-app" class="nav-link" data-scroll-target="#intro-to-create-react-app">Intro to Create React App</a></li>
  <li><a href="#ways-of-installing-cra" id="toc-ways-of-installing-cra" class="nav-link" data-scroll-target="#ways-of-installing-cra">Ways of Installing CRA</a></li>
  <li><a href="#starting-up-the-server" id="toc-starting-up-the-server" class="nav-link" data-scroll-target="#starting-up-the-server">Starting Up the Server</a></li>
  <li><a href="#modules-import-and-export" id="toc-modules-import-and-export" class="nav-link" data-scroll-target="#modules-import-and-export">Modules: Import and Export</a></li>
  <li><a href="#cra-and-components-styles-and-conventions" id="toc-cra-and-components-styles-and-conventions" class="nav-link" data-scroll-target="#cra-and-components-styles-and-conventions">CRA and Components Styles and Conventions</a></li>
  <li><a href="#assets-and-cra" id="toc-assets-and-cra" class="nav-link" data-scroll-target="#assets-and-cra">Assets and CRA</a></li>
  </ul></li>
  <li><a href="#introducing-state" id="toc-introducing-state" class="nav-link" data-scroll-target="#introducing-state">Introducing State</a>
  <ul class="collapse">
  <li><a href="#react-developer-tools" id="toc-react-developer-tools" class="nav-link" data-scroll-target="#react-developer-tools">React Developer Tools</a></li>
  <li><a href="#what-is-state-in-general" id="toc-what-is-state-in-general" class="nav-link" data-scroll-target="#what-is-state-in-general">What Is State in General?</a></li>
  <li><a href="#what-is-react-state" id="toc-what-is-react-state" class="nav-link" data-scroll-target="#what-is-react-state">What is React State?</a></li>
  <li><a href="#initializing-state" id="toc-initializing-state" class="nav-link" data-scroll-target="#initializing-state">Initializing State</a></li>
  <li><a href="#altering-state" id="toc-altering-state" class="nav-link" data-scroll-target="#altering-state">Altering State</a></li>
  <li><a href="#preview-of-react-events" id="toc-preview-of-react-events" class="nav-link" data-scroll-target="#preview-of-react-events">Preview of React Events</a></li>
  <li><a href="#using-events-to-set-state" id="toc-using-events-to-set-state" class="nav-link" data-scroll-target="#using-events-to-set-state">Using Events to Set State</a></li>
  <li><a href="#state-as-props-design-pattern" id="toc-state-as-props-design-pattern" class="nav-link" data-scroll-target="#state-as-props-design-pattern">“State as Props” Design Pattern</a></li>
  </ul></li>
  <li><a href="#react-state-patterns" id="toc-react-state-patterns" class="nav-link" data-scroll-target="#react-state-patterns">React State Patterns</a>
  <ul class="collapse">
  <li><a href="#updating-state-based-on-its-existing-value" id="toc-updating-state-based-on-its-existing-value" class="nav-link" data-scroll-target="#updating-state-based-on-its-existing-value">Updating State Based on Its Existing Value</a></li>
  <li><a href="#mutating-state-the-safe-way" id="toc-mutating-state-the-safe-way" class="nav-link" data-scroll-target="#mutating-state-the-safe-way">Mutating State the Safe Way</a></li>
  <li><a href="#designing-state" id="toc-designing-state" class="nav-link" data-scroll-target="#designing-state">Designing State</a></li>
  </ul></li>
  <li><a href="#world-of-react-events" id="toc-world-of-react-events" class="nav-link" data-scroll-target="#world-of-react-events">World of React Events</a>
  <ul class="collapse">
  <li><a href="#commonly-used-react-events" id="toc-commonly-used-react-events" class="nav-link" data-scroll-target="#commonly-used-react-events">Commonly Used React Events</a></li>
  <li><a href="#method-binding-with-argument" id="toc-method-binding-with-argument" class="nav-link" data-scroll-target="#method-binding-with-argument">Method Binding with Argument</a></li>
  <li><a href="#passing-methods-to-child-components" id="toc-passing-methods-to-child-components" class="nav-link" data-scroll-target="#passing-methods-to-child-components">Passing Methods to Child Components</a></li>
  <li><a href="#react-keys" id="toc-react-keys" class="nav-link" data-scroll-target="#react-keys">React Keys</a></li>
  </ul></li>
  <li><a href="#react-forms" id="toc-react-forms" class="nav-link" data-scroll-target="#react-forms">React Forms</a>
  <ul class="collapse">
  <li><a href="#controlled-components" id="toc-controlled-components" class="nav-link" data-scroll-target="#controlled-components">Controlled Components</a></li>
  <li><a href="#writing-forms-with-multiple-inputs" id="toc-writing-forms-with-multiple-inputs" class="nav-link" data-scroll-target="#writing-forms-with-multiple-inputs">Writing Forms With Multiple Inputs</a></li>
  <li><a href="#form-labels" id="toc-form-labels" class="nav-link" data-scroll-target="#form-labels">Form Labels</a></li>
  </ul></li>
  <li><a href="#lifecycle-methods" id="toc-lifecycle-methods" class="nav-link" data-scroll-target="#lifecycle-methods">Lifecycle Methods</a>
  <ul class="collapse">
  <li><a href="#component-lifecycle" id="toc-component-lifecycle" class="nav-link" data-scroll-target="#component-lifecycle">Component Lifecycle</a></li>
  <li><a href="#loading-data-via-ajax" id="toc-loading-data-via-ajax" class="nav-link" data-scroll-target="#loading-data-via-ajax">Loading Data Via AJAX</a></li>
  <li><a href="#adding-animated-loaders" id="toc-adding-animated-loaders" class="nav-link" data-scroll-target="#adding-animated-loaders">Adding Animated Loaders</a></li>
  <li><a href="#updating" id="toc-updating" class="nav-link" data-scroll-target="#updating">Updating</a></li>
  <li><a href="#unmounting" id="toc-unmounting" class="nav-link" data-scroll-target="#unmounting">Unmounting</a></li>
  <li><a href="#pure-components" id="toc-pure-components" class="nav-link" data-scroll-target="#pure-components">Pure Components</a></li>
  <li><a href="#local-storage" id="toc-local-storage" class="nav-link" data-scroll-target="#local-storage">Local Storage</a></li>
  </ul></li>
  <li><a href="#react-router" id="toc-react-router" class="nav-link" data-scroll-target="#react-router">React Router</a>
  <ul class="collapse">
  <li><a href="#server-side-routing" id="toc-server-side-routing" class="nav-link" data-scroll-target="#server-side-routing">Server-Side Routing</a></li>
  <li><a href="#fake-client-side-routing" id="toc-fake-client-side-routing" class="nav-link" data-scroll-target="#fake-client-side-routing">Fake Client-Side Routing</a></li>
  <li><a href="#real-client-side-routing-using-react-router" id="toc-real-client-side-routing-using-react-router" class="nav-link" data-scroll-target="#real-client-side-routing-using-react-router">Real Client-Side Routing Using React Router</a></li>
  <li><a href="#the-link-component" id="toc-the-link-component" class="nav-link" data-scroll-target="#the-link-component">The Link Component</a></li>
  <li><a href="#the-navlink-component" id="toc-the-navlink-component" class="nav-link" data-scroll-target="#the-navlink-component">The NavLink Component</a></li>
  <li><a href="#render-prop-vs-component-prop-in-route" id="toc-render-prop-vs-component-prop-in-route" class="nav-link" data-scroll-target="#render-prop-vs-component-prop-in-route">Render Prop vs Component Prop in Route</a></li>
  </ul></li>
  <li><a href="#react-router-patterns" id="toc-react-router-patterns" class="nav-link" data-scroll-target="#react-router-patterns">React Router Patterns</a>
  <ul class="collapse">
  <li><a href="#url-parameters" id="toc-url-parameters" class="nav-link" data-scroll-target="#url-parameters">URL Parameters</a></li>
  <li><a href="#multiple-url-parameters" id="toc-multiple-url-parameters" class="nav-link" data-scroll-target="#multiple-url-parameters">Multiple URL Parameters</a></li>
  <li><a href="#including-a-404" id="toc-including-a-404" class="nav-link" data-scroll-target="#including-a-404">Including a 404</a></li>
  <li><a href="#simple-search-form" id="toc-simple-search-form" class="nav-link" data-scroll-target="#simple-search-form">Simple Search Form</a></li>
  <li><a href="#the-redirect-component" id="toc-the-redirect-component" class="nav-link" data-scroll-target="#the-redirect-component">The Redirect Component</a></li>
  <li><a href="#pushing-onto-the-history-prop" id="toc-pushing-onto-the-history-prop" class="nav-link" data-scroll-target="#pushing-onto-the-history-prop">Pushing onto the History Prop</a></li>
  <li><a href="#when-to-use-redirect-vs-history-push" id="toc-when-to-use-redirect-vs-history-push" class="nav-link" data-scroll-target="#when-to-use-redirect-vs-history-push">When to Use Redirect vs History Push</a></li>
  <li><a href="#withrouter-higher-order-component" id="toc-withrouter-higher-order-component" class="nav-link" data-scroll-target="#withrouter-higher-order-component">withRouter Higher Order Component</a></li>
  <li><a href="#implementing-a-back-button" id="toc-implementing-a-back-button" class="nav-link" data-scroll-target="#implementing-a-back-button">Implementing a Back Button</a></li>
  <li><a href="#route-transitions" id="toc-route-transitions" class="nav-link" data-scroll-target="#route-transitions">Route Transitions</a></li>
  </ul></li>
  <li><a href="#react-hooks" id="toc-react-hooks" class="nav-link" data-scroll-target="#react-hooks">React Hooks</a>
  <ul class="collapse">
  <li><a href="#hooks-in-a-nutshell" id="toc-hooks-in-a-nutshell" class="nav-link" data-scroll-target="#hooks-in-a-nutshell">Hooks in a Nutshell</a></li>
  <li><a href="#usestate-hook" id="toc-usestate-hook" class="nav-link" data-scroll-target="#usestate-hook">useState Hook</a></li>
  <li><a href="#defining-methods-inside-functional-components" id="toc-defining-methods-inside-functional-components" class="nav-link" data-scroll-target="#defining-methods-inside-functional-components">Defining Methods Inside Functional Components</a></li>
  <li><a href="#building-a-custom-hook-usetogglestate" id="toc-building-a-custom-hook-usetogglestate" class="nav-link" data-scroll-target="#building-a-custom-hook-usetogglestate">Building a Custom Hook: useToggleState</a></li>
  <li><a href="#building-a-custom-hook-userinputstate" id="toc-building-a-custom-hook-userinputstate" class="nav-link" data-scroll-target="#building-a-custom-hook-userinputstate">Building a Custom Hook: userInputState</a></li>
  <li><a href="#useeffect-hook" id="toc-useeffect-hook" class="nav-link" data-scroll-target="#useeffect-hook">useEffect Hook</a></li>
  <li><a href="#making-api-calls-in-useeffect" id="toc-making-api-calls-in-useeffect" class="nav-link" data-scroll-target="#making-api-calls-in-useeffect">Making API Calls in useEffect</a></li>
  </ul></li>
  <li><a href="#react-context-api" id="toc-react-context-api" class="nav-link" data-scroll-target="#react-context-api">React Context API</a>
  <ul class="collapse">
  <li><a href="#introduction-to-context" id="toc-introduction-to-context" class="nav-link" data-scroll-target="#introduction-to-context">Introduction to Context</a></li>
  <li><a href="#theme-context" id="toc-theme-context" class="nav-link" data-scroll-target="#theme-context">Theme Context</a></li>
  <li><a href="#adding-a-second-context" id="toc-adding-a-second-context" class="nav-link" data-scroll-target="#adding-a-second-context">Adding a Second Context</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-page-left" id="quarto-document-content">





<section id="a-taste-of-react" class="level1">
<h1>A Taste of React</h1>
<section id="hosting" class="level2">
<h2 class="anchored" data-anchor-id="hosting">Hosting</h2>
<p>We can always open the files in the file explorer. But that’s over the file transfer protocol (FTP - file://path). We want the file to be ‘served’ on the localhost.</p>
<p><strong>Method 1:</strong> Using extension We download the ‘Live Server’ extension then right click within the file and click ‘open with Live Server.’ Now the serve is running and the changes we make will be reflected in the browser without having to refresh the page. To stop the server, right click again and choose ‘stop Live Server’.</p>
<p><strong>Method 2:</strong> Using the command line Open cmd, navigate (<code>cd</code>) to the directory. Type, <code>python3 -m http.server</code>. Copy the port into a browser.</p>
</section>
<section id="imports" class="level2">
<h2 class="anchored" data-anchor-id="imports">Imports</h2>
<p>In <code>index.html</code> we need to import React (obviously), React DOM, and Babel which allows us to use JSX (a syntax extension of JS that enables writing of HTML-like syntax in a JS file).</p>
<p><code>index.html</code></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb1-1"><a href="#cb1-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="ot"> lang</span><span class="op">=</span><span class="st">"en"</span><span class="dt">&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4"></a>  <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> charset</span><span class="op">=</span><span class="st">"UTF-8"</span><span class="dt">&gt;</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>  <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> name</span><span class="op">=</span><span class="st">"viewport"</span><span class="ot"> content</span><span class="op">=</span><span class="st">"width=device-width, initial-scale=1.0"</span><span class="dt">&gt;</span></span>
<span id="cb1-6"><a href="#cb1-6"></a>  <span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> http-equiv</span><span class="op">=</span><span class="st">"X-UA-Compatible"</span><span class="ot"> content</span><span class="op">=</span><span class="st">"ie=edge"</span><span class="dt">&gt;</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>  <span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>First Component<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb1-10"><a href="#cb1-10"></a>  <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> id</span><span class="op">=</span><span class="st">"root"</span><span class="dt">&gt;&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span> <span class="co">&lt;!-- This is where React will render our first component --&gt;</span></span>
<span id="cb1-11"><a href="#cb1-11"></a>  <span class="co">&lt;!-- include React from a CDN called unpkg.com (alternatively we can download and link locally)--&gt;</span></span>
<span id="cb1-12"><a href="#cb1-12"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"https://unpkg.com/react/umd/react.development.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb1-13"><a href="#cb1-13"></a>  <span class="co">&lt;!-- Include React DOM from the same CDN --&gt;</span></span>
<span id="cb1-14"><a href="#cb1-14"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"https://unpkg.com/react-dom/umd/react-dom.development.js"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb1-15"><a href="#cb1-15"></a>  <span class="co">&lt;!-- Include Babel to extend JS to JSX --&gt;</span></span>
<span id="cb1-16"><a href="#cb1-16"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"https://unpkg.com/babel-standalone"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb1-17"><a href="#cb1-17"></a>  <span class="co">&lt;!-- Note the 'type' attribute specifies the inclusion of 'jsx' flavor --&gt;</span></span>
<span id="cb1-18"><a href="#cb1-18"></a>  <span class="dt">&lt;</span><span class="kw">script</span><span class="ot"> src</span><span class="op">=</span><span class="st">"index.js"</span><span class="ot"> type=</span><span class="st">"text/jsx"</span><span class="dt">&gt;&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb1-19"><a href="#cb1-19"></a></span>
<span id="cb1-20"><a href="#cb1-20"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb1-21"><a href="#cb1-21"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="components" class="level2">
<h2 class="anchored" data-anchor-id="components">Components</h2>
<p>Components are the building blocks of React pages. They’re an encapsulation of HTML, CSS, and JS. In effect, they combine logic (JS) and presentation (JSX, a flavor of HTML) For instance, our component can have a navbar component, a button component, etc.</p>
<p>There are 2 types of components:</p>
<ol type="1">
<li><p><strong>Class-Based Components</strong></p>
<p>It’s a class that extends React.Component class. Each such component needs a way to render itself, so we must specify a ‘render()’ method.</p>
<p><code>index.js</code></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb2-1"><a href="#cb2-1"></a>   <span class="kw">class</span> Hello <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb2-2"><a href="#cb2-2"></a>       <span class="fu">render</span>() { <span class="cf">return </span><span class="kw">&lt;h1&gt;</span>Hello There!<span class="kw">&lt;/h1&gt;</span><span class="op">;</span> }</span>
<span id="cb2-3"><a href="#cb2-3"></a>   }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We also need a statement of where in <code>index.html</code> React will render the <code>Hello</code> component.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb3-1"><a href="#cb3-1"></a>   <span class="kw">class</span> Hello <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb3-2"><a href="#cb3-2"></a>       <span class="fu">render</span>(){ <span class="cf">return </span><span class="kw">&lt;h1&gt;</span>Hello There!<span class="kw">&lt;/h1&gt;</span><span class="op">;</span> }</span>
<span id="cb3-3"><a href="#cb3-3"></a>   }</span>
<span id="cb3-4"><a href="#cb3-4"></a></span>
<span id="cb3-5"><a href="#cb3-5"></a>   ReactDOM<span class="op">.</span><span class="fu">render</span>(<span class="fu">&lt;Hello/&gt;</span><span class="op">,</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'root'</span>))<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> We can only return one HTML tag, so if we want to return, say, 3 <code>h1</code> tags, we can wrap them all in one <code>div</code> tag.</p>
</blockquote></li>
<li><p><strong>Function-Based Components</strong></p>
<p>Historically, function-based components couldn’t use important features like:</p>
<ul>
<li>State</li>
<li>Lifecycle Methods</li>
</ul>
<p>But this has changed since the introduction of React Hooks. Now, they’re just as versatile as class-based components.</p>
<p><code>index.js</code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">function</span> <span class="fu">Hello</span>() {</span>
<span id="cb4-2"><a href="#cb4-2"></a>    <span class="cf">return </span><span class="kw">&lt;h1&gt;</span>Hello There!<span class="kw">&lt;/h1&gt;</span><span class="op">;</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>}</span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a>ReactDOM<span class="op">.</span><span class="fu">render</span>(<span class="fu">&lt;Hello/&gt;</span><span class="op">,</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'root'</span>))<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</section>
</section>
<section id="introducing-jsx" class="level1">
<h1>Introducing JSX</h1>
<section id="how-babel-works" class="level2">
<h2 class="anchored" data-anchor-id="how-babel-works">How Babel Works</h2>
<p>When we write HTML-like code, Babel takes it and converts it to a <code>React.createElement()</code> call. We can see the specific conversion it does at the following link: https://babeljs.io/repl</p>
<p><code>createElement()</code> takes three arguments:</p>
<ol type="1">
<li>The tag as a string (e.g.&nbsp;<code>"h1"</code>)</li>
<li>JS object (dictionary) of attributes (e.g.&nbsp;<code>{class: "myClass", color: "FFF",</code> })</li>
<li>The contents of the tag as a string (e.g.&nbsp;<code>"Hello World!"</code>)</li>
</ol>
<p><em>For example:</em></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb5-1"><a href="#cb5-1"></a><span class="kw">&lt;h1&gt;</span>Hello World!<span class="kw">&lt;/h1&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>get’s converted to:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1"></a>React<span class="op">.</span><span class="fu">createElement</span>(<span class="st">"h1"</span><span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">"Hello World!"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><em>Note:</em> If we’re writing nested tags such as an <code>img</code> tag within a <code>div</code> tag, Babel makes nested <code>createElement()</code> calls.</p>
</section>
<section id="embedding-js-into-jsx" class="level2">
<h2 class="anchored" data-anchor-id="embedding-js-into-jsx">Embedding JS into JSX</h2>
<p>We can include curly braces <code>{}</code> inside the JSX syntax to execute JS in.</p>
<p><em>Example 1:</em></p>
<p><code>index.js</code></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">class</span> JSXDemo <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb7-2"><a href="#cb7-2"></a>    <span class="fu">render</span>() { <span class="cf">return </span><span class="kw">&lt;h1&gt;</span> My number is: <span class="va">{</span><span class="dv">2</span><span class="op">*</span><span class="fl">1.4</span><span class="va">}</span> <span class="kw">&lt;/h1&gt;</span><span class="op">;</span> } <span class="co">// "My number is: 2.8"</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><em>Example 2:</em></p>
<p><code>index.js</code></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">function</span> <span class="fu">getMood</span>() {</span>
<span id="cb8-2"><a href="#cb8-2"></a>    <span class="kw">const</span> moods <span class="op">=</span> [<span class="st">'Angry'</span><span class="op">,</span><span class="st">'Hungry'</span><span class="op">,</span><span class="st">'Silly'</span><span class="op">,</span><span class="st">'Quiet'</span><span class="op">,</span><span class="st">'Paranoid'</span>]<span class="op">;</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>    <span class="cf">return</span> moods[<span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>() <span class="op">*</span> moods<span class="op">.</span><span class="at">length</span>)]<span class="op">;</span> <span class="co">// Grabbing some random array element</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>}</span>
<span id="cb8-5"><a href="#cb8-5"></a></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="kw">class</span> JSXDemo <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb8-7"><a href="#cb8-7"></a>    <span class="fu">render</span>() { <span class="cf">return </span><span class="kw">&lt;h1&gt;</span> My current mood is: <span class="va">{</span><span class="fu">getMood</span>()<span class="va">}</span> <span class="kw">&lt;/h1&gt;</span><span class="op">;</span> }</span>
<span id="cb8-8"><a href="#cb8-8"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="conditionals-in-jsx" class="level2">
<h2 class="anchored" data-anchor-id="conditionals-in-jsx">Conditionals in JSX</h2>
<p><strong>Method 1:</strong> Using a Ternary Operator</p>
<p><code>index.js</code></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb9-1"><a href="#cb9-1"></a><span class="kw">function</span> <span class="fu">getNum</span>() {</span>
<span id="cb9-2"><a href="#cb9-2"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>()<span class="op">*</span><span class="dv">10</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// Returns a number in [1,10]</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>}</span>
<span id="cb9-4"><a href="#cb9-4"></a></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="kw">class</span> NumPicker <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb9-6"><a href="#cb9-6"></a>    <span class="fu">render</span>() {</span>
<span id="cb9-7"><a href="#cb9-7"></a>        <span class="kw">const</span> num <span class="op">=</span> <span class="fu">getNum</span>()<span class="op">;</span></span>
<span id="cb9-8"><a href="#cb9-8"></a>        <span class="cf">return</span> (</span>
<span id="cb9-9"><a href="#cb9-9"></a>            <span class="kw">&lt;div&gt;</span></span>
<span id="cb9-10"><a href="#cb9-10"></a>                <span class="kw">&lt;h1&gt;</span>Your number is: <span class="va">{</span>num<span class="va">}</span> <span class="kw">&lt;/h1&gt;</span></span>
<span id="cb9-11"><a href="#cb9-11"></a>                <span class="er">&lt;</span>!-- Conditional w/ Ternary Operator--&gt;</span>
<span id="cb9-12"><a href="#cb9-12"></a>                <span class="kw">&lt;p&gt;</span><span class="va">{</span>num <span class="op">===</span> <span class="dv">7</span> <span class="op">?</span> <span class="st">'Congrats!'</span> <span class="op">:</span> <span class="st">'Unlucky!'</span><span class="va">}</span><span class="kw">&lt;/p&gt;</span></span>
<span id="cb9-13"><a href="#cb9-13"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb9-14"><a href="#cb9-14"></a>        )<span class="op">;</span></span>
<span id="cb9-15"><a href="#cb9-15"></a>    }</span>
<span id="cb9-16"><a href="#cb9-16"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We can even return an HTML tag like so:</p>
<p><code>index.js</code></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">function</span> <span class="fu">getNum</span>() {</span>
<span id="cb10-2"><a href="#cb10-2"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>()<span class="op">*</span><span class="dv">10</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// Returns a number in [1,10]</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>}</span>
<span id="cb10-4"><a href="#cb10-4"></a></span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="kw">class</span> NumPicker <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb10-6"><a href="#cb10-6"></a>    <span class="fu">render</span>() {</span>
<span id="cb10-7"><a href="#cb10-7"></a>        <span class="kw">const</span> num <span class="op">=</span> <span class="fu">getNum</span>()<span class="op">;</span></span>
<span id="cb10-8"><a href="#cb10-8"></a>        <span class="cf">return</span> (</span>
<span id="cb10-9"><a href="#cb10-9"></a>            <span class="kw">&lt;div&gt;</span></span>
<span id="cb10-10"><a href="#cb10-10"></a>                <span class="kw">&lt;h1&gt;</span>Your number is: <span class="va">{</span>num<span class="va">}</span> <span class="kw">&lt;/h1&gt;</span></span>
<span id="cb10-11"><a href="#cb10-11"></a>                <span class="er">&lt;</span>!-- Conditional w/ Ternary Operator--&gt;</span>
<span id="cb10-12"><a href="#cb10-12"></a>                <span class="kw">&lt;p&gt;</span><span class="va">{</span>num <span class="op">===</span> <span class="dv">7</span> <span class="op">?</span> </span>
<span id="cb10-13"><a href="#cb10-13"></a>                        <span class="kw">&lt;img</span> <span class="ot">src</span><span class="op">=</span><span class="st">"https://homepages.cae.wisc.edu/~ece533/images/cat.png"</span><span class="kw">/&gt;</span> </span>
<span id="cb10-14"><a href="#cb10-14"></a>                        <span class="op">:</span> <span class="st">'Unlucky!'</span><span class="va">}</span><span class="kw">&lt;/p&gt;</span></span>
<span id="cb10-15"><a href="#cb10-15"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb10-16"><a href="#cb10-16"></a>        )<span class="op">;</span></span>
<span id="cb10-17"><a href="#cb10-17"></a>    }</span>
<span id="cb10-18"><a href="#cb10-18"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Method 2:</strong> Using If…Else Statements w/ a Previously Defined Variable</p>
<p><code>index.js</code></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb11-1"><a href="#cb11-1"></a><span class="kw">function</span> <span class="fu">getNum</span>() {</span>
<span id="cb11-2"><a href="#cb11-2"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>()<span class="op">*</span><span class="dv">10</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="co">// Returns a number in [1,10]</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>}</span>
<span id="cb11-4"><a href="#cb11-4"></a></span>
<span id="cb11-5"><a href="#cb11-5"></a><span class="kw">class</span> NumPicker <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb11-6"><a href="#cb11-6"></a>    <span class="fu">render</span>() {</span>
<span id="cb11-7"><a href="#cb11-7"></a>        <span class="kw">const</span> num <span class="op">=</span> <span class="fu">getNum</span>()<span class="op">;</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>        <span class="kw">let</span> msg<span class="op">;</span></span>
<span id="cb11-9"><a href="#cb11-9"></a>        <span class="co">// Conditional w/ If...Else Statement</span></span>
<span id="cb11-10"><a href="#cb11-10"></a>        <span class="cf">if</span> (num <span class="op">===</span><span class="dv">7</span>) { </span>
<span id="cb11-11"><a href="#cb11-11"></a>            msg <span class="op">=</span> </span>
<span id="cb11-12"><a href="#cb11-12"></a>                <span class="kw">&lt;div&gt;</span></span>
<span id="cb11-13"><a href="#cb11-13"></a>                    <span class="kw">&lt;p&gt;</span> Congrats!<span class="kw">&lt;/p&gt;</span></span>
<span id="cb11-14"><a href="#cb11-14"></a>                    <span class="kw">&lt;img</span> <span class="ot">src</span><span class="op">=</span><span class="st">"https://homepages.cae.wisc.edu/~ece533/images/cat.png"</span> <span class="kw">/&gt;</span></span>
<span id="cb11-15"><a href="#cb11-15"></a>                <span class="kw">&lt;/div&gt;</span> </span>
<span id="cb11-16"><a href="#cb11-16"></a>        } <span class="cf">else</span> { msg <span class="op">= </span><span class="kw">&lt;p&gt;</span> Sorry, you lose! <span class="kw">&lt;/p&gt;</span><span class="op">;</span> }</span>
<span id="cb11-17"><a href="#cb11-17"></a>        </span>
<span id="cb11-18"><a href="#cb11-18"></a>        <span class="cf">return</span> (</span>
<span id="cb11-19"><a href="#cb11-19"></a>            <span class="kw">&lt;div&gt;</span></span>
<span id="cb11-20"><a href="#cb11-20"></a>                <span class="kw">&lt;h1&gt;</span>Your number is: <span class="va">{</span>num<span class="va">}</span> <span class="kw">&lt;/h1&gt;</span></span>
<span id="cb11-21"><a href="#cb11-21"></a>                <span class="va">{</span>msg<span class="va">}</span></span>
<span id="cb11-22"><a href="#cb11-22"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb11-23"><a href="#cb11-23"></a>        )<span class="op">;</span></span>
<span id="cb11-24"><a href="#cb11-24"></a>    }</span>
<span id="cb11-25"><a href="#cb11-25"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="standard-react-app-layout" class="level2">
<h2 class="anchored" data-anchor-id="standard-react-app-layout">Standard React App Layout</h2>
<p>So far we’ve had one React component (<code>Hello</code> or <code>NumPicker</code>) per document. In fact, <code>ReactDOM.render()</code> takes only one component as argument. But what if we are building a large app that has multiple components?</p>
<ol type="1">
<li>We define one component per file (e.g.&nbsp;a <code>NumPicker</code> component in a <code>NumPicker.js</code> file).</li>
<li>We create an <code>App</code> component in an <code>index.js</code> file which combines the other components in its <code>render()</code> method.</li>
</ol>
<blockquote class="blockquote">
<p><em>Note:</em> In <code>index.html</code> we must link all the components which the <code>App</code> component depends on first.</p>
</blockquote>
<p><code>index.js</code> (entry point of our code)</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb12-1"><a href="#cb12-1"></a><span class="kw">class</span> App <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb12-2"><a href="#cb12-2"></a>    <span class="fu">render</span>() {</span>
<span id="cb12-3"><a href="#cb12-3"></a>        <span class="cf">return</span> (</span>
<span id="cb12-4"><a href="#cb12-4"></a>            <span class="kw">&lt;div&gt;</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>                <span class="fu">&lt;Hello</span> <span class="fu">/&gt;</span></span>
<span id="cb12-6"><a href="#cb12-6"></a>                <span class="fu">&lt;NumPicker</span> <span class="fu">/&gt;</span></span>
<span id="cb12-7"><a href="#cb12-7"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb12-8"><a href="#cb12-8"></a>        )<span class="op">;</span></span>
<span id="cb12-9"><a href="#cb12-9"></a>    }</span>
<span id="cb12-10"><a href="#cb12-10"></a>}</span>
<span id="cb12-11"><a href="#cb12-11"></a></span>
<span id="cb12-12"><a href="#cb12-12"></a>ReactDOM<span class="op">.</span><span class="fu">render</span>(<span class="fu">&lt;App</span> <span class="fu">/&gt;</span><span class="op">,</span> documents<span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'root'</span>))<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> Later on we’ll be working with the command <code>create-react-app</code> and wouldn’t have to worry about this build configuration</p>
</blockquote>
</section>
</section>
<section id="props-and-more" class="level1">
<h1>Props and More</h1>
<section id="introduction-to-props" class="level2">
<h2 class="anchored" data-anchor-id="introduction-to-props">Introduction to Props</h2>
<p>Props are short for “properties.” These make our components customizable and therefore reusable.</p>
<p>Let’s take our <code>Hello</code> component and pass it two props, <code>to</code> and <code>from</code>. We do this just like we specify attributes in HTML, except it’s now inside of a React component, and inside JSX.</p>
<p><code>Hello.js</code></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">class</span> Hello <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb13-2"><a href="#cb13-2"></a>    <span class="fu">render</span>() {</span>
<span id="cb13-3"><a href="#cb13-3"></a>        <span class="cf">return </span><span class="kw">&lt;p&gt;</span>Hi everyone!<span class="kw">&lt;/p&gt;</span><span class="op">;</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>    }</span>
<span id="cb13-5"><a href="#cb13-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>index.js</code></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb14-1"><a href="#cb14-1"></a><span class="kw">class</span> App <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb14-2"><a href="#cb14-2"></a>    <span class="fu">render</span>() {</span>
<span id="cb14-3"><a href="#cb14-3"></a>        <span class="cf">return</span> (</span>
<span id="cb14-4"><a href="#cb14-4"></a>            <span class="kw">&lt;div&gt;</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>                <span class="fu">&lt;Hello</span> <span class="ot">to</span> <span class="op">=</span> <span class="st">"Austin"</span> <span class="ot">from</span> <span class="op">=</span> <span class="st">"Jane"</span><span class="fu">/&gt;</span> <span class="er">&lt;</span>!-- Passing props to Hello component --&gt;</span>
<span id="cb14-6"><a href="#cb14-6"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb14-7"><a href="#cb14-7"></a>        )<span class="op">;</span></span>
<span id="cb14-8"><a href="#cb14-8"></a>    }</span>
<span id="cb14-9"><a href="#cb14-9"></a>}</span>
<span id="cb14-10"><a href="#cb14-10"></a></span>
<span id="cb14-11"><a href="#cb14-11"></a>ReactDOM<span class="op">.</span><span class="fu">render</span>(<span class="fu">&lt;App</span> <span class="fu">/&gt;</span><span class="op">,</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'root'</span>))<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We can even check the props received by the <code>Hello</code> component, which will be stored as a JS object within a field.</p>
<p><em>For example:</em></p>
<p><code>Hello.js</code></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb15-1"><a href="#cb15-1"></a><span class="kw">class</span> Hello <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb15-2"><a href="#cb15-2"></a>    <span class="fu">render</span>() {</span>
<span id="cb15-3"><a href="#cb15-3"></a>        <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="kw">this</span><span class="op">.</span><span class="at">props</span>)<span class="op">;</span> <span class="co">// Display all props</span></span>
<span id="cb15-4"><a href="#cb15-4"></a>        <span class="cf">return </span><span class="kw">&lt;p&gt;</span>Hi everyone!<span class="kw">&lt;/p&gt;</span><span class="op">;</span></span>
<span id="cb15-5"><a href="#cb15-5"></a>    }</span>
<span id="cb15-6"><a href="#cb15-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>Output</code></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb16-1"><a href="#cb16-1"></a>{ <span class="dt">from</span><span class="op">:</span> <span class="st">"Jane"</span><span class="op">,</span> <span class="dt">to</span><span class="op">:</span> <span class="st">"Austin"</span> }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now we can use the passed in props to customize the <code>Hello</code> component.</p>
<p><code>Hello.js</code></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb17-1"><a href="#cb17-1"></a><span class="kw">class</span> Hello <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb17-2"><a href="#cb17-2"></a>    <span class="fu">render</span>() {</span>
<span id="cb17-3"><a href="#cb17-3"></a>        <span class="cf">return </span><span class="kw">&lt;p&gt;</span>Hi <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">to</span><span class="va">}</span> from <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">from</span><span class="va">}</span><span class="kw">&lt;/p&gt;</span><span class="op">;</span></span>
<span id="cb17-4"><a href="#cb17-4"></a>    }</span>
<span id="cb17-5"><a href="#cb17-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="prop-requirements" class="level2">
<h2 class="anchored" data-anchor-id="prop-requirements">Prop Requirements</h2>
<ul>
<li><p>Props are just for configuring components, they’re immutable. For instance, we can’t change component <code>Hello</code>’s props within it after they’ve been passed to it from <code>index.html</code>.</p></li>
<li><p>Properties can be numbers, Booleans, and arrays as well. In these cases, we enclose them in curly braces <code>{}</code>.</p>
<p>Example:</p>
<p><code>index.js</code></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb18-1"><a href="#cb18-1"></a><span class="kw">class</span> App <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb18-2"><a href="#cb18-2"></a>    <span class="fu">render</span>() {</span>
<span id="cb18-3"><a href="#cb18-3"></a>        <span class="cf">return</span> (</span>
<span id="cb18-4"><a href="#cb18-4"></a>          <span class="kw">&lt;div&gt;</span></span>
<span id="cb18-5"><a href="#cb18-5"></a>              <span class="fu">&lt;Hello</span> </span>
<span id="cb18-6"><a href="#cb18-6"></a>                    <span class="ot">to</span> <span class="op">=</span> <span class="st">"Austin"</span></span>
<span id="cb18-7"><a href="#cb18-7"></a>                    <span class="ot">from</span> <span class="op">=</span> <span class="st">"Jane"</span></span>
<span id="cb18-8"><a href="#cb18-8"></a>                    <span class="ot">num</span> <span class="op">=</span> <span class="va">{</span><span class="dv">3</span><span class="va">}</span></span>
<span id="cb18-9"><a href="#cb18-9"></a>                  <span class="ot">data</span> <span class="op">=</span> <span class="va">{</span>[<span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">,</span><span class="dv">3</span><span class="op">,</span><span class="dv">4</span><span class="op">,</span><span class="dv">5</span>]<span class="va">}</span></span>
<span id="cb18-10"><a href="#cb18-10"></a>                  <span class="ot">isFunny</span> <span class="op">=</span> <span class="va">{</span><span class="kw">true</span><span class="va">}</span> </span>
<span id="cb18-11"><a href="#cb18-11"></a>                <span class="fu">/&gt;</span></span>
<span id="cb18-12"><a href="#cb18-12"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb18-13"><a href="#cb18-13"></a>        )<span class="op">;</span></span>
<span id="cb18-14"><a href="#cb18-14"></a>    }</span>
<span id="cb18-15"><a href="#cb18-15"></a>}</span>
<span id="cb18-16"><a href="#cb18-16"></a></span>
<span id="cb18-17"><a href="#cb18-17"></a>ReactDOM<span class="op">.</span><span class="fu">render</span>(<span class="fu">&lt;App</span> <span class="fu">/&gt;</span><span class="op">,</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'root'</span>))<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> Another way to pass a Boolean value (true by default) is just to pass <code>isFunny</code> without an assignment.</p>
</blockquote></li>
</ul>
</section>
<section id="looping-jsx" class="level2">
<h2 class="anchored" data-anchor-id="looping-jsx">Looping JSX</h2>
<p>Using the array method <code>map()</code> which calls a specified function for each element of the array.</p>
<p><code>Messages.js</code></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb19-1"><a href="#cb19-1"></a><span class="kw">class</span> Messages <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb19-2"><a href="#cb19-2"></a>    </span>
<span id="cb19-3"><a href="#cb19-3"></a>    <span class="fu">render</span>() {</span>
<span id="cb19-4"><a href="#cb19-4"></a>        <span class="kw">const</span> msgs <span class="op">=</span> [</span>
<span id="cb19-5"><a href="#cb19-5"></a>            {<span class="dt">id</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Hello"</span>}<span class="op">,</span></span>
<span id="cb19-6"><a href="#cb19-6"></a>            {<span class="dt">id</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">text</span><span class="op">:</span> <span class="st">"Goodbye"</span>}</span>
<span id="cb19-7"><a href="#cb19-7"></a>        ]<span class="op">;</span></span>
<span id="cb19-8"><a href="#cb19-8"></a>        <span class="cf">return</span> (</span>
<span id="cb19-9"><a href="#cb19-9"></a>            <span class="kw">&lt;ul&gt;</span></span>
<span id="cb19-10"><a href="#cb19-10"></a>                <span class="va">{</span> msgs<span class="op">.</span><span class="fu">map</span>(m <span class="kw">=&gt; &lt;li&gt;</span><span class="va">{</span>m<span class="op">.</span><span class="at">text</span><span class="va">}</span><span class="kw">&lt;/li&gt;</span>) <span class="va">}</span></span>
<span id="cb19-11"><a href="#cb19-11"></a>            <span class="kw">&lt;/ul&gt;</span> </span>
<span id="cb19-12"><a href="#cb19-12"></a>        )<span class="op">;</span></span>
<span id="cb19-13"><a href="#cb19-13"></a>    }</span>
<span id="cb19-14"><a href="#cb19-14"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Explanation:</em> The text property of each element of the <code>msgs</code> array, will appear as a list item in an unordered list.</p>
</blockquote>
</section>
<section id="default-props" class="level2">
<h2 class="anchored" data-anchor-id="default-props">Default Props</h2>
<p>Suppose we’re not going to pass a prop to a component through <code>index.html</code>, but we nevertheless want the component to have that prop set to some default value. We declare a static object <code>defaultProps</code> inside the component. The reason we declare it with the static modifier is because these default props will be the same across all instances of the component.</p>
<p><em>For example:</em></p>
<p><code>Hello.js</code></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb20-1"><a href="#cb20-1"></a><span class="kw">class</span> Hello <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb20-2"><a href="#cb20-2"></a>    <span class="kw">static</span> defaultProps <span class="op">=</span> { <span class="dt">from</span><span class="op">:</span> <span class="st">"Anonymous"</span> }</span>
<span id="cb20-3"><a href="#cb20-3"></a>    <span class="fu">render</span>() {</span>
<span id="cb20-4"><a href="#cb20-4"></a>        <span class="cf">return </span><span class="kw">&lt;p&gt;</span>Hi <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">to</span><span class="va">}</span> from <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">from</span><span class="va">}</span><span class="kw">&lt;/p&gt;</span><span class="op">;</span></span>
<span id="cb20-5"><a href="#cb20-5"></a>    }</span>
<span id="cb20-6"><a href="#cb20-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Explanation:</em> The <code>from</code> property defaults to “Anonymous” if we don’t explicitly pass it to the component.</p>
</blockquote>
</section>
<section id="styling-with-react" class="level2">
<h2 class="anchored" data-anchor-id="styling-with-react">Styling with React</h2>
<p>How do we give CSS attributes to our components?</p>
<p><strong>Method 1:</strong> Using a stylesheet file</p>
<ol type="1">
<li><p>We link an <code>app.css</code> stylesheet inside <code>index.html</code>.</p>
<p><code>index.html</code></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb21-1"><a href="#cb21-1"></a><span class="dt">&lt;</span><span class="kw">link</span><span class="ot"> rel</span><span class="op">=</span><span class="st">"stylesheet"</span><span class="ot"> href</span><span class="op">=</span><span class="st">"app.cs"</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>We define a class name (conventionally the same as the component name) in <code>app.css</code> and give it some attributes.</p>
<p><code>app.css</code></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">.Hello</span> {</span>
<span id="cb22-2"><a href="#cb22-2"></a>    <span class="kw">border</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">black</span><span class="op">;</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>    <span class="kw">background</span><span class="ch">:</span> <span class="cn">lightblue</span><span class="op">;</span></span>
<span id="cb22-4"><a href="#cb22-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>In the component (in this case <code>Hello.js</code>) we specify a <code>className</code> attribute within the JSX tags.</p>
<blockquote class="blockquote">
<p><em>Note:</em> In HTML we would simply specify a <code>class</code> attribute, but JSX has its own <code>className</code> attribute in order that there’s no confusion with the JS keyword <code>class</code>.</p>
</blockquote>
<p><code>Hello.js</code></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb23-1"><a href="#cb23-1"></a><span class="kw">class</span> Hello <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb23-2"><a href="#cb23-2"></a>    <span class="fu">render</span>() {</span>
<span id="cb23-3"><a href="#cb23-3"></a>        <span class="cf">return </span><span class="kw">&lt;p</span> <span class="ot">className</span> <span class="op">=</span> <span class="st">"Hello"</span><span class="kw">&gt;</span>Hi <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">to</span><span class="va">}</span> from <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">from</span><span class="va">}</span><span class="kw">&lt;/p&gt;</span><span class="op">;</span></span>
<span id="cb23-4"><a href="#cb23-4"></a>    }</span>
<span id="cb23-5"><a href="#cb23-5"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
<p><strong>Method 2:</strong> Using in-line CSS</p>
<p>Recall that in-line CSS uses the <code>style</code> attribute that takes CSS key-value pairs like so:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb24-1"><a href="#cb24-1"></a><span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> style </span><span class="op">=</span> <span class="st">"color: yellow; background-color: purple;"</span><span class="dt">&gt;&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In React, we define an object with the key-value pairs and pass it into the <code>style</code> attribute through the JSX.</p>
<p><em>For example:</em></p>
<p><code>Box.js</code></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb25-1"><a href="#cb25-1"></a><span class="kw">class</span> Box <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb25-2"><a href="#cb25-2"></a>    <span class="fu">render</span>() {</span>
<span id="cb25-3"><a href="#cb25-3"></a>        <span class="kw">const</span> colors <span class="op">=</span> {</span>
<span id="cb25-4"><a href="#cb25-4"></a>            <span class="dt">color</span><span class="op">:</span> black<span class="op">,</span></span>
<span id="cb25-5"><a href="#cb25-5"></a>            <span class="dt">backgroundColor</span><span class="op">:</span> yellow</span>
<span id="cb25-6"><a href="#cb25-6"></a>        }<span class="op">;</span></span>
<span id="cb25-7"><a href="#cb25-7"></a>        <span class="cf">return </span><span class="kw">&lt;b</span> <span class="ot">style</span><span class="op">=</span><span class="va">{</span>colors<span class="va">}</span><span class="kw">&gt;</span>This is a box!<span class="kw">&lt;/b&gt;</span><span class="op">;</span></span>
<span id="cb25-8"><a href="#cb25-8"></a>    }</span>
<span id="cb25-9"><a href="#cb25-9"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> We use camelCase instead of kebab-case (as we normally would) for the CSS attributes when we’re working in React.</p>
</blockquote>
<p>Or we can simply pass an object literal into the <code>style</code> attribute in-line.</p>
<p><em>For example:</em></p>
<p><code>Box.js</code></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb26-1"><a href="#cb26-1"></a><span class="kw">class</span> Box <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb26-2"><a href="#cb26-2"></a>    <span class="fu">render</span>() {</span>
<span id="cb26-3"><a href="#cb26-3"></a>        <span class="kw">const</span> colors <span class="op">=</span> {</span>
<span id="cb26-4"><a href="#cb26-4"></a>            <span class="dt">color</span><span class="op">:</span> black<span class="op">,</span></span>
<span id="cb26-5"><a href="#cb26-5"></a>            <span class="dt">backgroundColor</span><span class="op">:</span> yellow</span>
<span id="cb26-6"><a href="#cb26-6"></a>        }<span class="op">;</span></span>
<span id="cb26-7"><a href="#cb26-7"></a>        <span class="cf">return </span><span class="kw">&lt;b</span> <span class="ot">style</span><span class="op">=</span><span class="va">{</span> {<span class="dt">fontSize</span><span class="op">:</span> <span class="st">"50px"</span><span class="op">,</span> <span class="dt">backgroundColor</span><span class="op">:</span> <span class="st">"yellow"</span>} <span class="va">}</span><span class="kw">&gt;</span>This is a box!<span class="kw">&lt;/b&gt;</span><span class="op">;</span></span>
<span id="cb26-8"><a href="#cb26-8"></a>    }</span>
<span id="cb26-9"><a href="#cb26-9"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="conditional-styling" class="level2">
<h2 class="anchored" data-anchor-id="conditional-styling">Conditional Styling</h2>
<p>Just as we were able to implement conditional logic in displaying the contents of our components, so we can do the same with styling our components.</p>
<p>We assign a <code>className</code> based on a condition, and in the CSS file we style those classes differently.</p>
<p><em>For example:</em></p>
<p><code>AnswerBox.js</code></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb27-1"><a href="#cb27-1"></a><span class="kw">function</span> <span class="fu">trueOrFalse</span>() {</span>
<span id="cb27-2"><a href="#cb27-2"></a>    <span class="kw">const</span> values <span class="op">=</span> [<span class="kw">true</span><span class="op">,</span><span class="kw">false</span>]<span class="op">;</span></span>
<span id="cb27-3"><a href="#cb27-3"></a>    <span class="cf">return</span> values[<span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>() <span class="op">*</span> values<span class="op">.</span><span class="at">length</span>)]<span class="op">;</span> <span class="co">// Grabbing some random array element</span></span>
<span id="cb27-4"><a href="#cb27-4"></a>}</span>
<span id="cb27-5"><a href="#cb27-5"></a></span>
<span id="cb27-6"><a href="#cb27-6"></a><span class="kw">class</span> AnswerBox <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb27-7"><a href="#cb27-7"></a>    <span class="fu">render</span>() {</span>
<span id="cb27-8"><a href="#cb27-8"></a>        <span class="kw">const</span> currentValue <span class="op">=</span> <span class="fu">trueOrFalse</span>()<span class="op">;</span></span>
<span id="cb27-9"><a href="#cb27-9"></a>        <span class="cf">return</span> (</span>
<span id="cb27-10"><a href="#cb27-10"></a>            <span class="kw">&lt;p</span> <span class="ot">className</span> <span class="op">=</span> <span class="va">{</span>currentValue <span class="op">?</span> <span class="st">"AnswerBox-true"</span> <span class="op">:</span> <span class="st">"AnswerBox-false"</span><span class="va">}</span><span class="kw">&gt;</span>Answer<span class="kw">&lt;/p&gt;</span></span>
<span id="cb27-11"><a href="#cb27-11"></a>        )<span class="op">;</span></span>
<span id="cb27-12"><a href="#cb27-12"></a>    }</span>
<span id="cb27-13"><a href="#cb27-13"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>app.css</code></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb28-1"><a href="#cb28-1"></a><span class="fu">.AnswerBox-true</span> {</span>
<span id="cb28-2"><a href="#cb28-2"></a>    <span class="kw">background-color</span><span class="ch">:</span> <span class="cn">green</span><span class="op">;</span></span>
<span id="cb28-3"><a href="#cb28-3"></a>}</span>
<span id="cb28-4"><a href="#cb28-4"></a></span>
<span id="cb28-5"><a href="#cb28-5"></a><span class="fu">.AnswerBox-false</span> {</span>
<span id="cb28-6"><a href="#cb28-6"></a>    <span class="kw">background-color</span><span class="ch">:</span> <span class="cn">red</span><span class="op">;</span></span>
<span id="cb28-7"><a href="#cb28-7"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Explanation:</em> <code>AnswerBox</code> component gets a background color of either green or red depending to the result of the call to function <code>trueOrFalse()</code></p>
</blockquote>
</section>
</section>
<section id="create-react-app" class="level1">
<h1>Create React App</h1>
<section id="intro-to-create-react-app" class="level2">
<h2 class="anchored" data-anchor-id="intro-to-create-react-app">Intro to Create React App</h2>
<p><code>Create-React-App</code> (or CRA) is a utility script that:</p>
<ul>
<li>Creates a skeleton React project with template files, folders, and configurations.</li>
<li>Sets things up so that JS files are run through Babel.</li>
<li>Let’s us use modern JS features that haven’t been implemented in browsers yet.</li>
<li>Makes testing and deployment much easier.</li>
</ul>
<p>CRM is built in top of a well-known JS utility known as Webpack. Here are some of its features:</p>
<ul>
<li><p>Enables module importing/exporting.</p>
<ul>
<li>Packages up all CSS/images/JS into a single file for the browser.</li>
<li>Reduces the number of HTTP requests for performance.</li>
</ul></li>
<li><p>Hot reloading: when a source file is changed, there’s no need to restart the server manually, it reloads automatically.</p>
<blockquote class="blockquote">
<p><em>Note:</em> We’ve already seen this with the VS Code extension ‘Live Server’</p>
</blockquote></li>
</ul>
</section>
<section id="ways-of-installing-cra" class="level2">
<h2 class="anchored" data-anchor-id="ways-of-installing-cra">Ways of Installing CRA</h2>
<p><strong>Dependencies</strong>:</p>
<p>Before installing CRA, we should install its dependency Node.js (<a href="https://nodejs.org/en/download/">download</a>). After installing it we can check its version by using the command:</p>
<pre><code>node -v</code></pre>
<p>We can check the version of the Node Package Manager (npm) by using the command:</p>
<pre><code>npm -v</code></pre>
<p>We can check the version of npx (an npm package runner) by using the command:</p>
<pre><code>npx -v</code></pre>
<p><strong>Method 1:</strong> Using npx</p>
<p>We don’t need to install CRA at all, we just issue the command:</p>
<pre><code>npx create-react-app my_app</code></pre>
<p><strong>Method 2:</strong> Using npm</p>
<p>This command installs CRA globally:</p>
<pre><code>npm install -g create-react-app</code></pre>
<p>This command creates a React app:</p>
<pre><code>create-react-app my_app</code></pre>
<blockquote class="blockquote">
<p><em>Note:</em> Issuing <code>npm install</code> by itself in a directory creates the node_modules folder. It’s standard that React apps come with this folder missing, since it’s a huge download. So to start up a React app we just downloaded from the internet, we might need to run this command first.</p>
</blockquote>
<p>Using either method, the following project is created:</p>
<pre><code>-&gt; my_app (folder)
|    -&gt; node_modules (folder)
|    -&gt; public (folder)
|    |    favicon.ico
|    |    index.html
|    |    manifest.json
|    -&gt; src (folder)
|    |    App.css
|    |    App.js
|    |    App.test.js
|    |    index.css
|    |    index.js
|    |    logo.svg
|    |    serviceWorker.js
|    |    .gitignore
|    |    package.json
|    |    README.md
|    |    yarn.lock</code></pre>
<blockquote class="blockquote">
<p><em>Note:</em> <code>node_modules</code> contains all the project dependencies which we don’t typically touch, <code>public</code> is also rarely modified. The main folder we work in is <code>src</code>.</p>
</blockquote>
</section>
<section id="starting-up-the-server" class="level2">
<h2 class="anchored" data-anchor-id="starting-up-the-server">Starting Up the Server</h2>
<ol type="1">
<li><p>Navigate to the project folder using <code>cd</code>.</p></li>
<li><p>Issue the following command:</p>
<pre><code>npm start</code></pre></li>
</ol>
</section>
<section id="modules-import-and-export" class="level2">
<h2 class="anchored" data-anchor-id="modules-import-and-export">Modules: Import and Export</h2>
<p>Modules aren’t specific to React, they’re a JS (ES2015) feature. They’re used to access functions, classes, etc. between JS files.</p>
<p>Suppose we have an <code>index.js</code> and a <code>helper.js</code>.</p>
<p><strong>Default Exporting:</strong></p>
<p><code>helper.js</code></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb37-1"><a href="#cb37-1"></a><span class="kw">function</span> <span class="fu">helpful</span>() {</span>
<span id="cb37-2"><a href="#cb37-2"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"I did a super helpful thing!"</span>)<span class="op">;</span></span>
<span id="cb37-3"><a href="#cb37-3"></a>}</span>
<span id="cb37-4"><a href="#cb37-4"></a></span>
<span id="cb37-5"><a href="#cb37-5"></a><span class="im">export</span> <span class="im">default</span> helpful<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> The keyword <code>default</code> signifies what exactly should be exported from the <code>helper.js</code> file upon it being requested through an import.</p>
</blockquote>
<p><strong>Default Importing:</strong></p>
<p><code>index.js</code></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb38-1"><a href="#cb38-1"></a><span class="im">import</span> helpful <span class="im">from</span> <span class="st">'./helper'</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note 1:</em> <code>helpful</code> is just a reference to the imported content. It can be named differently.</p>
</blockquote>
<blockquote class="blockquote">
<p><em>Note 2:</em> If we’d simply wrote <code>import helpful from 'helper'</code>, React would be looking for the <code>helper.js</code> file in the <code>node_modules</code> folder (since that’s where it’s running from). The<code>./</code> argument signals React to look for the <code>helper.js</code> in the current directory, namely the <code>src</code> folder from which <code>index.js</code> is running.</p>
</blockquote>
<blockquote class="blockquote">
<p><em>Note 3</em>: We don’t need to specify the file extension <code>.js</code>.</p>
</blockquote>
<p><strong>Specific Exporting/Importing:</strong></p>
<p>It could be that we wish to import more than just one function from the <code>helper.js</code> file. In this case, all the exports and imports must be specified.</p>
<p><code>helper.js</code></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb39-1"><a href="#cb39-1"></a><span class="kw">function</span> <span class="fu">helpful</span>() {</span>
<span id="cb39-2"><a href="#cb39-2"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"I did a super helpful thing!"</span>)<span class="op">;</span></span>
<span id="cb39-3"><a href="#cb39-3"></a>}</span>
<span id="cb39-4"><a href="#cb39-4"></a></span>
<span id="cb39-5"><a href="#cb39-5"></a><span class="kw">function</span> <span class="fu">sort</span>() {</span>
<span id="cb39-6"><a href="#cb39-6"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"I sorted what you gave me!"</span>)<span class="op">;</span></span>
<span id="cb39-7"><a href="#cb39-7"></a>}</span>
<span id="cb39-8"><a href="#cb39-8"></a></span>
<span id="cb39-9"><a href="#cb39-9"></a><span class="kw">function</span> <span class="fu">hash</span>() {</span>
<span id="cb39-10"><a href="#cb39-10"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"I hashed what you gave me!"</span>)<span class="op">;</span></span>
<span id="cb39-11"><a href="#cb39-11"></a>}</span>
<span id="cb39-12"><a href="#cb39-12"></a></span>
<span id="cb39-13"><a href="#cb39-13"></a><span class="im">export</span> {helpful<span class="op">,</span> sort<span class="op">,</span> hash}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>index.js</code></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb40-1"><a href="#cb40-1"></a><span class="im">import</span> {helpful<span class="op">,</span> sort<span class="op">,</span> hash} <span class="im">from</span> <span class="st">'./helpers'</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We can also use default importing and specific importing at the same time like so:</p>
<p><code>helper.js</code></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb41-1"><a href="#cb41-1"></a><span class="kw">function</span> <span class="fu">helpful</span>() {</span>
<span id="cb41-2"><a href="#cb41-2"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"I did a super helpful thing!"</span>)<span class="op">;</span></span>
<span id="cb41-3"><a href="#cb41-3"></a>}</span>
<span id="cb41-4"><a href="#cb41-4"></a></span>
<span id="cb41-5"><a href="#cb41-5"></a><span class="kw">function</span> <span class="fu">sort</span>() {</span>
<span id="cb41-6"><a href="#cb41-6"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"I sorted what you gave me!"</span>)<span class="op">;</span></span>
<span id="cb41-7"><a href="#cb41-7"></a>}</span>
<span id="cb41-8"><a href="#cb41-8"></a></span>
<span id="cb41-9"><a href="#cb41-9"></a><span class="kw">function</span> <span class="fu">hash</span>() {</span>
<span id="cb41-10"><a href="#cb41-10"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"I hashed what you gave me!"</span>)<span class="op">;</span></span>
<span id="cb41-11"><a href="#cb41-11"></a>}</span>
<span id="cb41-12"><a href="#cb41-12"></a></span>
<span id="cb41-13"><a href="#cb41-13"></a><span class="im">export</span> <span class="im">default</span> helpful<span class="op">;</span></span>
<span id="cb41-14"><a href="#cb41-14"></a><span class="im">export</span> {sort<span class="op">,</span> hash}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>index.js</code></p>
<div class="sourceCode" id="cb42"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb42-1"><a href="#cb42-1"></a><span class="im">import</span> helpful<span class="op">,</span> {sort<span class="op">,</span> hash} <span class="im">from</span> <span class="st">'./helpers'</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="cra-and-components-styles-and-conventions" class="level2">
<h2 class="anchored" data-anchor-id="cra-and-components-styles-and-conventions">CRA and Components Styles and Conventions</h2>
<p><strong>Separation:</strong> Each component gets its own JS file with a matching name.</p>
<p><strong>Inheritance:</strong> Each component should extend <code>React.Component</code>.</p>
<blockquote class="blockquote">
<p><em>Note:</em> We may import Component so that we don’t have to type out React.Component using the following line:</p>
<pre><code>   import React, {Component} from 'react'`</code></pre>
</blockquote>
<p><strong>Entry point:</strong> When using CRA it’s important to have the entry point to be a component named <code>App</code> in an <code>App,js</code>.</p>
</section>
<section id="assets-and-cra" class="level2">
<h2 class="anchored" data-anchor-id="assets-and-cra">Assets and CRA</h2>
<p><strong>CSS</strong></p>
<ul>
<li><p>For styled components, we include their CSS file at the top of the component ( i.e.&nbsp;in the JS file ).</p>
<p><em>For example:</em></p>
<p><code>House.js</code></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb44-1"><a href="#cb44-1"></a><span class="im">import</span> <span class="st">"./House.css"</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> We’re just importing a file, not a specific function or class. No need for a <code>from</code> keyword.</p>
</blockquote></li>
<li><p>The DOM elements in the render() method of the component also use the following naming convention:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb45-1"><a href="#cb45-1"></a><span class="kw">&lt;div</span> <span class="ot">className</span> <span class="op">=</span> <span class="st">"House"</span> <span class="kw">&gt;</span></span>
<span id="cb45-2"><a href="#cb45-2"></a>    <span class="kw">&lt;p</span> <span class="ot">classname</span> <span class="op">=</span> <span class="st">"House-title"</span><span class="kw">&gt;</span><span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">tilte</span><span class="va">}</span><span class="kw">&lt;/p&gt;</span></span>
<span id="cb45-3"><a href="#cb45-3"></a>    <span class="kw">&lt;p</span> <span class="ot">className</span> <span class="op">=</span> <span class="st">"House-address"</span><span class="kw">&gt;</span><span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">address</span><span class="va">}</span><span class="kw">&lt;/p&gt;</span></span>
<span id="cb45-4"><a href="#cb45-4"></a><span class="kw">&lt;/div&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Do not use general selectors (such as <code>div { /* style */ }</code> or <code>p { /* style */ }</code> in the CSS file intended for a component because they will apply to the whole document. Keep to using specific classes and IDs.</p></li>
</ul>
<p>Images</p>
<ul>
<li><p>Store images in subfolders of the <code>src</code> folder.</p></li>
<li><p>Include them at the top of the component file (or as needed) by storing them in a variable.</p>
<p><em>For example:</em></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb46-1"><a href="#cb46-1"></a><span class="im">import</span> mudhut <span class="im">from</span> <span class="st">"./mudhut.jpg"</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then use the variable name when needed.</p></li>
</ul>
</section>
</section>
<section id="introducing-state" class="level1">
<h1>Introducing State</h1>
<section id="react-developer-tools" class="level2">
<h2 class="anchored" data-anchor-id="react-developer-tools">React Developer Tools</h2>
<p>React Developer Tools (RDT) is an official browser extension that can be downloaded for <a href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en">Chrome</a> or <a href="https://addons.mozilla.org/en-US/firefox/addon/react-devtools/">Firefox</a>. The extension adds tabs in the developer tools that make it easier to debug React apps by keeping track of the hierarchy of components, and showing the props and states of each component.</p>
</section>
<section id="what-is-state-in-general" class="level2">
<h2 class="anchored" data-anchor-id="what-is-state-in-general">What Is State in General?</h2>
<p>State keeps track of user interaction during a browsing session. It’s state that remembers the last page we were on (for things like breadcrumbs), or how many items we’ve added to the cart. State is tied into a <code>session ID</code> and is transferred through <code>HTTP cookies</code>. But state doesn’t just refer to the information that persists across various pages of the application, it can also refer to the state of the objects on the current page. For instance, the state of a chess game application is the current position of the pieces.</p>
<p>Previously with vanilla JS and JQuery state was inferred from the DOM itself. That is, DOM objects were taken and their value was checked. In React we do the exact opposite…</p>
</section>
<section id="what-is-react-state" class="level2">
<h2 class="anchored" data-anchor-id="what-is-react-state">What is React State?</h2>
<p>Recall that in React, props are immutable. That is, a component cannot have its props changed within it once they’ve been passed to it either by <code>defaultProps</code> or through another component. State, on the other hand, is the internal data specific to a component that does change. So, whenever we want our components to have properties that are liable to change we should define them as states instead of props.</p>
<p>State is a <em>plain old JavaScript object</em> (POJO) since it keeps track of key-value pairs. We can glimpse the state of a component by logging it within the component (or by using React Developer Tools).</p>
<p><em>For example:</em></p>
<p><code>ChessBoard.js</code></p>
<div class="sourceCode" id="cb47"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb47-1"><a href="#cb47-1"></a><span class="kw">class</span> ChessBoard <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb47-2"><a href="#cb47-2"></a>    </span>
<span id="cb47-3"><a href="#cb47-3"></a>    <span class="fu">render</span>() {</span>
<span id="cb47-4"><a href="#cb47-4"></a>        <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="kw">this</span><span class="op">.</span><span class="at">state</span>)<span class="op">;</span></span>
<span id="cb47-5"><a href="#cb47-5"></a>    }</span>
<span id="cb47-6"><a href="#cb47-6"></a>    </span>
<span id="cb47-7"><a href="#cb47-7"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="initializing-state" class="level2">
<h2 class="anchored" data-anchor-id="initializing-state">Initializing State</h2>
<p>Until now our React components did not have constructor methods. This works for <em>stateless</em> components, but <em>stateful</em> components require it because state must be defined within a constructor method. This is because state is really just a class field under the hood, and fields must be declared within the constructor of the function.</p>
<p><em>For example:</em></p>
<p><code>constructor</code></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb48-1"><a href="#cb48-1"></a><span class="fu">constructor</span>(props) {</span>
<span id="cb48-2"><a href="#cb48-2"></a>    <span class="kw">super</span>(props)<span class="op">;</span></span>
<span id="cb48-3"><a href="#cb48-3"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">state</span> <span class="op">=</span> { <span class="co">/* values we want to track */</span> }<span class="op">;</span></span>
<span id="cb48-4"><a href="#cb48-4"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note 1:</em> The constructor takes <code>props</code> as an argument since it will use them to construct the component.</p>
</blockquote>
<blockquote class="blockquote">
<p><em>Note 2:</em> <code>super</code> is a reference to the parent’s (i.e.&nbsp;<code>React.Component'</code>s) constructor. So, the component’s constructor adds on top of its parents’ constructor by calling it first.</p>
</blockquote>
<blockquote class="blockquote">
<p><em>Note 3:</em> If we don’t pass <code>this.props</code> to <code>super()</code> (as we’re doing above through a props reference) we can’t access <code>this.props</code> within the constructor. Inside the component we have access to <code>this.props</code> anywhere <em>but</em> inside the constructor method. This is despite the fact that we are clearly also passing <code>this.props</code> into the constructor… it’s some React magic.</p>
</blockquote>
<blockquote class="blockquote">
<p><em>Note 4:</em> Functional components (i.e.&nbsp;components based on functions rather than classes) cannot be stateful because classes can’t have constructors.</p>
</blockquote>
<p>If we’re using Babel (which comes packaged with CRA), we can use shorthand syntax without a constructor and without the keyword <code>this</code>.</p>
<p><em>For example:</em></p>
<p><code>ChessBoard.js</code></p>
<div class="sourceCode" id="cb49"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb49-1"><a href="#cb49-1"></a><span class="kw">class</span> ChessBoard <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb49-2"><a href="#cb49-2"></a>    </span>
<span id="cb49-3"><a href="#cb49-3"></a>    state <span class="op">=</span> { <span class="co">/* values we want to track */</span> }<span class="op">;</span></span>
<span id="cb49-4"><a href="#cb49-4"></a>    <span class="fu">render</span>() { <span class="co">/* display component */</span> }<span class="op">;</span></span>
<span id="cb49-5"><a href="#cb49-5"></a></span>
<span id="cb49-6"><a href="#cb49-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Babel transcribes the latter into the former automatically.</p>
</section>
<section id="altering-state" class="level2">
<h2 class="anchored" data-anchor-id="altering-state">Altering State</h2>
<p>We never alter state directly. That is we never key into the state object and assign a value. Rather, we go through a React <em>setter</em> called <code>this.setState()</code>. It takes in a JS object describing the state changes and <em>patches</em> the existing state object.</p>
<p><em>For example:</em></p>
<div class="sourceCode" id="cb50"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb50-1"><a href="#cb50-1"></a><span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>( { <span class="dt">player</span><span class="op">:</span> <span class="st">"John"</span> } )<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> <code>setState()</code> is an instance method, so it requires context which is given to it by <code>this</code>.</p>
</blockquote>
<p><strong>How setState() works:</strong></p>
<ul>
<li>Asynchronously updates state - <code>setState()</code> is merely a request to update the state, and React may not immediately update it. Rather, it will figure out the most efficient moment to update the state (perhaps by bundling multiple <code>HTTP SET</code> requests together). This is why we never directly alter state…</li>
<li>The component re-renders upon having its state updated by React.</li>
</ul>
<p>We usually call <code>setState()</code> inside React events, which is the next topic.</p>
</section>
<section id="preview-of-react-events" class="level2">
<h2 class="anchored" data-anchor-id="preview-of-react-events">Preview of React Events</h2>
<p>In React, every JSX element has built in attributes (similar to how <code>className</code> was built it) representing every kind of browser event. One of these attributes is <code>onClick</code> which takes on a callback function as its value.</p>
<p><em>For example:</em></p>
<div class="sourceCode" id="cb51"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb51-1"><a href="#cb51-1"></a><span class="kw">&lt;button</span> <span class="ot">onClick</span> <span class="op">=</span> <span class="va">{</span><span class="kw">function</span>(e) {<span class="fu">alert</span>(<span class="st">'You just clicked me!'</span>)<span class="op">;</span>}<span class="va">}</span><span class="kw">&gt;</span> Click Me! <span class="kw">&lt;/button&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Explanation:</em> Under the hood <code>onClick</code> is an event listener (i.e.&nbsp;a function that waits for an event to occur) and we’re giving it a callback function to execute once a click event is registered. The optional parameter <code>e</code> is an event object that carries information about the click event.</p>
</blockquote>
</section>
<section id="using-events-to-set-state" class="level2">
<h2 class="anchored" data-anchor-id="using-events-to-set-state">Using Events to Set State</h2>
<p>To set state using events, we use <code>setState()</code> in the event handler function.</p>
<p><em>For example:</em></p>
<p><code>Button.js</code></p>
<div class="sourceCode" id="cb52"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb52-1"><a href="#cb52-1"></a><span class="kw">class</span> Button <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb52-2"><a href="#cb52-2"></a>    </span>
<span id="cb52-3"><a href="#cb52-3"></a>    <span class="co">/* Setting state */</span></span>
<span id="cb52-4"><a href="#cb52-4"></a>    <span class="fu">constructor</span>(props) {</span>
<span id="cb52-5"><a href="#cb52-5"></a>        <span class="kw">super</span>(props)<span class="op">;</span></span>
<span id="cb52-6"><a href="#cb52-6"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">state</span> <span class="op">=</span> { <span class="dt">clicked</span><span class="op">:</span> <span class="kw">false</span> }<span class="op">;</span></span>
<span id="cb52-7"><a href="#cb52-7"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">handleClick</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">handleClick</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>)<span class="op">;</span> <span class="co">/* Binding the event handler to the instance */</span></span>
<span id="cb52-8"><a href="#cb52-8"></a>    }</span>
<span id="cb52-9"><a href="#cb52-9"></a>    </span>
<span id="cb52-10"><a href="#cb52-10"></a>    <span class="co">/* Callback function / Event handler - an instance function, so it needs 'this' for context */</span></span>
<span id="cb52-11"><a href="#cb52-11"></a>    <span class="fu">handleClick</span>(e) {</span>
<span id="cb52-12"><a href="#cb52-12"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>({ <span class="dt">clicked</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">;</span></span>
<span id="cb52-13"><a href="#cb52-13"></a>    }</span>
<span id="cb52-14"><a href="#cb52-14"></a>    </span>
<span id="cb52-15"><a href="#cb52-15"></a>    <span class="co">/* Rendering component */</span></span>
<span id="cb52-16"><a href="#cb52-16"></a>    <span class="fu">render</span>() {</span>
<span id="cb52-17"><a href="#cb52-17"></a>        <span class="cf">return</span> (</span>
<span id="cb52-18"><a href="#cb52-18"></a>            <span class="kw">&lt;div</span> <span class="ot">className</span> <span class="op">=</span> <span class="st">"Button"</span><span class="kw">&gt;</span></span>
<span id="cb52-19"><a href="#cb52-19"></a>                <span class="kw">&lt;p&gt;</span> <span class="va">{</span> <span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">clicked</span> <span class="op">?</span> <span class="st">"Clicked!"</span> <span class="op">:</span> <span class="st">"Not Clicked!"</span> <span class="va">}</span> <span class="kw">&lt;/p&gt;</span></span>
<span id="cb52-20"><a href="#cb52-20"></a>                <span class="kw">&lt;button</span> <span class="ot">onClick</span> <span class="op">=</span> <span class="va">{</span> <span class="kw">this</span><span class="op">.</span><span class="at">handleClick</span> <span class="va">}</span><span class="kw">&gt;</span> Click Me! <span class="kw">&lt;/button&gt;</span></span>
<span id="cb52-21"><a href="#cb52-21"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb52-22"><a href="#cb52-22"></a>        )<span class="op">;</span></span>
<span id="cb52-23"><a href="#cb52-23"></a>    }</span>
<span id="cb52-24"><a href="#cb52-24"></a>    </span>
<span id="cb52-25"><a href="#cb52-25"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note 1:</em> Since the event listener calls the event handler function, the context of the <code>this</code> keyword is lost to the event handler (since it’s being called from within the event listener as opposed to the outer lexical environment). So we need to <code>bind()</code> the callback function to a specific instance of the component. The line <code>this.handleClick = this.handleClick.bind(this)</code> is what makes this explicit for JS.</p>
</blockquote>
<blockquote class="blockquote">
<p><em>Note 2:</em> We can also do the binding in-line by using: <code>&lt;button onClick = { this.handleClick.bind(this) }&gt; Click Me! &lt;/button&gt;</code>.</p>
</blockquote>
</section>
<section id="state-as-props-design-pattern" class="level2">
<h2 class="anchored" data-anchor-id="state-as-props-design-pattern">“State as Props” Design Pattern</h2>
<p>A common pattern is having a <em>stateful</em> parent component pass its state as a prop to a <em>stateless</em> child component. This idea is generalized in React as <em>‘downward data flow’</em>.</p>
<p>For example:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb53-1"><a href="#cb53-1"></a><span class="im">import</span> ChildComponent <span class="im">from</span> <span class="st">'./child-component'</span><span class="op">;</span></span>
<span id="cb53-2"><a href="#cb53-2"></a></span>
<span id="cb53-3"><a href="#cb53-3"></a><span class="kw">class</span> ParentComponent <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb53-4"><a href="#cb53-4"></a>    </span>
<span id="cb53-5"><a href="#cb53-5"></a>    <span class="fu">constructor</span>(props) {</span>
<span id="cb53-6"><a href="#cb53-6"></a>        <span class="kw">super</span>(props)<span class="op">;</span></span>
<span id="cb53-7"><a href="#cb53-7"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">state</span> <span class="op">=</span> { <span class="dt">someState</span><span class="op">:</span> <span class="dv">5</span> }<span class="op">;</span></span>
<span id="cb53-8"><a href="#cb53-8"></a>    }</span>
<span id="cb53-9"><a href="#cb53-9"></a>    </span>
<span id="cb53-10"><a href="#cb53-10"></a>    <span class="fu">render</span>() {</span>
<span id="cb53-11"><a href="#cb53-11"></a>        <span class="co">/* Passing down parent state as a prop to the child */</span></span>
<span id="cb53-12"><a href="#cb53-12"></a>        <span class="cf">return</span> (</span>
<span id="cb53-13"><a href="#cb53-13"></a>            <span class="kw">&lt;div</span> <span class="ot">className</span> <span class="op">=</span> <span class="st">"ParentComponent"</span><span class="kw">&gt;</span></span>
<span id="cb53-14"><a href="#cb53-14"></a>                <span class="fu">&lt;ChildComponent</span> <span class="ot">someState</span> <span class="op">=</span> <span class="va">{</span> <span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">someState</span> <span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb53-15"><a href="#cb53-15"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb53-16"><a href="#cb53-16"></a>        )<span class="op">;</span></span>
<span id="cb53-17"><a href="#cb53-17"></a>    }</span>
<span id="cb53-18"><a href="#cb53-18"></a>    </span>
<span id="cb53-19"><a href="#cb53-19"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="react-state-patterns" class="level1">
<h1>React State Patterns</h1>
<section id="updating-state-based-on-its-existing-value" class="level2">
<h2 class="anchored" data-anchor-id="updating-state-based-on-its-existing-value">Updating State Based on Its Existing Value</h2>
<p>So far we’ve just been updating state using <code>this.setState()</code> regardless of the state’s previous value.</p>
<p><em>Use case:</em> Suppose we have a score keeper state for player kills, and we’d like to update the score by incrementing it.</p>
<p><strong>Incorrect approach:</strong></p>
<p>We can access its current value within setState() and increment it like so <code>this.setState(this.state.kills + 1)</code> but this is not the recommended way. Why? Because, suppose we have multiple <code>setState()</code> calls like this… React works asynchronously, that is it will bundle up <code>HTTP SET</code> requests for use at its discretion. Typically, it will send one <code>HTTP SET</code> request for the last <code>setState()</code> call in the code (assuming that to be the final state we want the component to have), and ignore the rest.</p>
<p><strong>Correct approach:</strong></p>
<p>We use a wrapper function that takes in the current state as a parameter to get around this. This is called a <em>callback form</em> because, obviously, the wrapper function is a callback function.</p>
<p><code>Player.js</code></p>
<div class="sourceCode" id="cb54"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb54-1"><a href="#cb54-1"></a><span class="kw">class</span> Player <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb54-2"><a href="#cb54-2"></a>    </span>
<span id="cb54-3"><a href="#cb54-3"></a>    <span class="fu">constructor</span>(props) {</span>
<span id="cb54-4"><a href="#cb54-4"></a>        <span class="kw">super</span>(props)<span class="op">;</span></span>
<span id="cb54-5"><a href="#cb54-5"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">state</span> <span class="op">=</span> { <span class="dt">kills</span><span class="op">:</span> <span class="dv">0</span> }<span class="op">;</span></span>
<span id="cb54-6"><a href="#cb54-6"></a>    }</span>
<span id="cb54-7"><a href="#cb54-7"></a>    </span>
<span id="cb54-8"><a href="#cb54-8"></a>    <span class="fu">trippleKill</span>() {</span>
<span id="cb54-9"><a href="#cb54-9"></a>        <span class="co">/* Relevant line */</span></span>
<span id="cb54-10"><a href="#cb54-10"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>((curState) <span class="kw">=&gt;</span> ( <span class="cf">return</span> { <span class="dt">kills</span><span class="op">:</span> curState<span class="op">.</span><span class="at">kills</span> <span class="op">+</span> <span class="dv">3</span> }))<span class="op">;</span></span>
<span id="cb54-11"><a href="#cb54-11"></a>    }</span>
<span id="cb54-12"><a href="#cb54-12"></a>    </span>
<span id="cb54-13"><a href="#cb54-13"></a>    <span class="fu">render</span> () {</span>
<span id="cb54-14"><a href="#cb54-14"></a>        <span class="kw">&lt;div</span> <span class="ot">className</span> <span class="op">=</span> <span class="st">"Player"</span><span class="kw">&gt;</span></span>
<span id="cb54-15"><a href="#cb54-15"></a>            <span class="kw">&lt;h1&gt;</span>Score is: <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">kills</span><span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb54-16"><a href="#cb54-16"></a>            <span class="kw">&lt;button</span> <span class="ot">onClick</span> <span class="op">=</span> <span class="va">{</span>() <span class="kw">=&gt;</span> { <span class="kw">this</span><span class="op">.</span><span class="at">trippleKill</span> }<span class="va">}</span><span class="kw">&gt;</span>Tripple Kill!<span class="kw">&lt;/button&gt;</span></span>
<span id="cb54-17"><a href="#cb54-17"></a>        <span class="kw">&lt;/div&gt;</span></span>
<span id="cb54-18"><a href="#cb54-18"></a>        </span>
<span id="cb54-19"><a href="#cb54-19"></a>    }</span>
<span id="cb54-20"><a href="#cb54-20"></a>    </span>
<span id="cb54-21"><a href="#cb54-21"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note 1:</em> setState() is configured in React to receive a function whose input is the current state.</p>
</blockquote>
<blockquote class="blockquote">
<p><em>Note 2:</em> This works because now React doesn’t think we have the exact same expression within <code>setState()</code> (since a new wrapper function is created for each call), so it can’t bundle the <code>SET</code> requests together.</p>
</blockquote>
</section>
<section id="mutating-state-the-safe-way" class="level2">
<h2 class="anchored" data-anchor-id="mutating-state-the-safe-way">Mutating State the Safe Way</h2>
<p>So far, in updating state, we’ve dealt with <em>primitives</em> such as numbers, strings, Booleans, etc. Special care is needed for updating state when we’re dealing with things like arrays, objects, nested arrays, nested objects, and/or arrays of objects.</p>
<p><em>For example:</em></p>
<p><code>State</code></p>
<div class="sourceCode" id="cb55"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb55-1"><a href="#cb55-1"></a><span class="kw">this</span><span class="op">.</span><span class="at">state</span> <span class="op">=</span> {</span>
<span id="cb55-2"><a href="#cb55-2"></a>    <span class="co">/* Store an array of todo objects */</span></span>
<span id="cb55-3"><a href="#cb55-3"></a>    <span class="dt">todos</span><span class="op">:</span> [</span>
<span id="cb55-4"><a href="#cb55-4"></a>        { <span class="dt">task</span><span class="op">:</span> <span class="st">'do the dishes'</span><span class="op">,</span> <span class="dt">done</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">id</span><span class="op">:</span> <span class="dv">1</span> }<span class="op">,</span></span>
<span id="cb55-5"><a href="#cb55-5"></a>        { <span class="dt">task</span><span class="op">:</span> <span class="st">'vacuum the floor'</span><span class="op">,</span> <span class="dt">done</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">id</span><span class="op">:</span> <span class="dv">2</span> }</span>
<span id="cb55-6"><a href="#cb55-6"></a>    ]</span>
<span id="cb55-7"><a href="#cb55-7"></a>}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Suppose we want to define a method that completes a todo.</p>
<p><strong>What NOT To Do:</strong></p>
<p>Updating part of the todo state and then resetting it.</p>
<p><code>completeTodo()</code></p>
<div class="sourceCode" id="cb56"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb56-1"><a href="#cb56-1"></a><span class="kw">function</span> <span class="fu">completeTodo</span>(id) {</span>
<span id="cb56-2"><a href="#cb56-2"></a>    <span class="co">/* Finds the todo object with given id */</span></span>
<span id="cb56-3"><a href="#cb56-3"></a>    <span class="kw">const</span> theTodo <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">todos</span><span class="op">.</span><span class="fu">find</span>((t) <span class="kw">=&gt;</span> t<span class="op">.</span><span class="at">id</span> <span class="op">===</span> id)<span class="op">;</span></span>
<span id="cb56-4"><a href="#cb56-4"></a>    theTodo<span class="op">.</span><span class="at">done</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span> <span class="co">/* Updates part of the todo object */</span></span>
<span id="cb56-5"><a href="#cb56-5"></a>    </span>
<span id="cb56-6"><a href="#cb56-6"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>({ <span class="dt">todos</span><span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">todos</span> })<span class="op">;</span> <span class="co">/* Reset the state */</span></span>
<span id="cb56-7"><a href="#cb56-7"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> In JS primitive types are copied by value, while arrays, objects, etc. are copied by reference. So <code>theTodo</code> points to the same object as the one defined in the state. Therefore, executing <code>theTodo.done = true</code> updates the very same object defined in the state and not some copy of it.</p>
</blockquote>
<p><strong>What TO Do:</strong></p>
<p>Making a whole new copy of the todo state.</p>
<p><code>completeTodo()</code></p>
<div class="sourceCode" id="cb57"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb57-1"><a href="#cb57-1"></a><span class="kw">function</span> <span class="fu">completeTodo</span>(id) {</span>
<span id="cb57-2"><a href="#cb57-2"></a>    </span>
<span id="cb57-3"><a href="#cb57-3"></a>    <span class="co">/* Iterates over todos state (an array), copying it into a newTodo (an array)... */</span></span>
<span id="cb57-4"><a href="#cb57-4"></a>    <span class="co">/* ... changing the entry corresponding to the given id so that it reflects the desired change */</span></span>
<span id="cb57-5"><a href="#cb57-5"></a>    <span class="kw">const</span> newTodos <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">todos</span><span class="op">.</span><span class="fu">map</span>((todo) <span class="kw">=&gt;</span> {</span>
<span id="cb57-6"><a href="#cb57-6"></a>        <span class="cf">if</span> (todo<span class="op">.</span><span class="at">id</span> <span class="op">===</span> id) {</span>
<span id="cb57-7"><a href="#cb57-7"></a>            <span class="cf">return</span> { <span class="op">...</span>todo<span class="op">,</span> <span class="dt">done</span><span class="op">:</span> <span class="kw">true</span>}<span class="op">;</span> <span class="co">/* See Note 2 */</span></span>
<span id="cb57-8"><a href="#cb57-8"></a>        } <span class="cf">else</span> { <span class="cf">return</span> todo<span class="op">;</span> }</span>
<span id="cb57-9"><a href="#cb57-9"></a>    })<span class="op">;</span> </span>
<span id="cb57-10"><a href="#cb57-10"></a>    </span>
<span id="cb57-11"><a href="#cb57-11"></a>    <span class="co">/* Set state to the copy */</span></span>
<span id="cb57-12"><a href="#cb57-12"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>({ <span class="dt">todos</span><span class="op">:</span> newTodos })</span>
<span id="cb57-13"><a href="#cb57-13"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note 1:</em> The <code>map(() =&gt; {})</code> iterates over an array and maps each entry to the <code>return</code> of the supplied function.</p>
</blockquote>
<blockquote class="blockquote">
<p><em>Note 2:</em> The <em>spread operator</em>, <code>...</code>, inside the object being returned copies all of the properties of the object <code>todo</code> only overwriting its property <code>done</code>. The spread operator can also be used to copy an existing array with some modifications into another like so <code>[ ...existingArray, newElement ]</code>.</p>
</blockquote>
<p><strong>In General: </strong> When we want to update a non-primitive state, instead of mutating the existing data structure and re-setting the state, we should create a whole new copy of that data structure and setting the state to that copy. Pure functions such as <code>map()</code>, <code>filter()</code>, <code>reduce()</code>, and the spread operator, <code>...</code>, are our friends!</p>
</section>
<section id="designing-state" class="level2">
<h2 class="anchored" data-anchor-id="designing-state">Designing State</h2>
<p><strong>Minimizing State</strong>:</p>
<p>In React we want to put as little data in the state as possible. We should always ask ourselves the following questions:</p>
<ol type="1">
<li>Does <code>x</code> change?</li>
<li>Is <code>x</code> already captured by some other value <code>y</code> in state or props, or can it be derived from it?</li>
</ol>
<p><strong>Downward Data Flow:</strong></p>
<p>The parent component should be the most stateful, and it should pass the state to stateless (if possible) child components.</p>
<blockquote class="blockquote">
<p><em>Note:</em> This makes debugging easier since we centralize state to the parent component, and so we know where it’s coming from.</p>
</blockquote>
</section>
</section>
<section id="world-of-react-events" class="level1">
<h1>World of React Events</h1>
<section id="commonly-used-react-events" class="level2">
<h2 class="anchored" data-anchor-id="commonly-used-react-events">Commonly Used React Events</h2>
<p>Any even we can listen for in JS, we can listen for in React.</p>
<p>Mouse events: <code>onClick</code>, <code>onMouseOver</code>, etc. Form events: <code>onSubmit</code>, etc. Keyboard events: <code>onKeyDown</code>, <code>onKeyUp</code>, <code>onKeyPress</code>, etc.</p>
<p>See the <a href="https://reactjs.org/docs/events.html#mouse-events">full list</a>.</p>
</section>
<section id="method-binding-with-argument" class="level2">
<h2 class="anchored" data-anchor-id="method-binding-with-argument">Method Binding with Argument</h2>
<p>So far we’ve bound methods which took no arguments (e.g.&nbsp;<code>this.handleClick().bind(this)</code>). We don’t pass in the argument into the event handler itself (that would immediately execute it before the binding happens), instead we pass it as a second argument to <code>bind()</code>.</p>
<p><em>For example:</em></p>
<div class="sourceCode" id="cb58"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb58-1"><a href="#cb58-1"></a><span class="kw">this</span><span class="op">.</span><span class="fu">handleClick</span>()<span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span><span class="op">,</span> arg)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="passing-methods-to-child-components" class="level2">
<h2 class="anchored" data-anchor-id="passing-methods-to-child-components">Passing Methods to Child Components</h2>
<p><strong>How data flows:</strong></p>
<ul>
<li>A parent component defines a function.</li>
<li>The function is passed as a prop to a child component.</li>
<li>The child component invokes the prop.</li>
<li>The function is called in the parent component, usually setting a new state.</li>
<li>Because parent’s state changes it re-renders, re-rendering its children as well.</li>
</ul>
<p>Suppose in the parent we define a function <code>remove()</code> then we pass it to the child component as a prop as follows:</p>
<p><code>ParentComponent.js</code></p>
<div class="sourceCode" id="cb59"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb59-1"><a href="#cb59-1"></a><span class="co">/* Rest of ParentComponent Definition */</span></span>
<span id="cb59-2"><a href="#cb59-2"></a>    <span class="fu">&lt;ChildComponent</span> <span class="ot">remove</span> <span class="op">=</span> <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">remove</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>)<span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb59-3"><a href="#cb59-3"></a><span class="co">/* Rest of ParentComponent Definition */</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then, in the child we call it without any binding and without parenthesis (since it’s now a prop).</p>
<p><code>ChildComponent.js</code></p>
<div class="sourceCode" id="cb60"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb60-1"><a href="#cb60-1"></a><span class="co">/* Rest of ChildComponent Definition */</span></span>
<span id="cb60-2"><a href="#cb60-2"></a><span class="fu">handleRemove</span>(e) {</span>
<span id="cb60-3"><a href="#cb60-3"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="fu">remove</span>()<span class="op">;</span></span>
<span id="cb60-4"><a href="#cb60-4"></a>}</span>
<span id="cb60-5"><a href="#cb60-5"></a><span class="co">/* Rest of ChildComponent Definition */</span></span>
<span id="cb60-6"><a href="#cb60-6"></a><span class="kw">&lt;div</span> <span class="ot">className</span> <span class="op">=</span> <span class="st">"ToBeRemoved"</span> <span class="ot">onClick</span> <span class="op">=</span> <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">handleRemove</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>)<span class="va">}</span><span class="kw">&gt;&lt;/div&gt;</span></span>
<span id="cb60-7"><a href="#cb60-7"></a><span class="co">/* Rest of ChildComponent Definition */</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We can also use binding in the constructor (instead of inline binding) for efficiency.</p>
<blockquote class="blockquote">
<p><em>Note 1:</em> The default value that’s passed into an event handler is the event object. In this case <code>remove()</code> doesn’t accept arguments, so we could have made it be the event handler but, in case it needs to accept arguments, it’s best to have a dedicated <code>handleClick()</code> event that snatches the event object and calls <code>remove()</code> as a callback. Otherwise remove would receive the event object as argument…</p>
</blockquote>
<blockquote class="blockquote">
<p><em>Note 2:</em> Each time <code>bind()</code> is called it creates a new function (not the same one it’s called on). This is why it’s less efficient to bind inline in the render method… Because with each state change the component re-renders and a lot of new functions are created. Instead, we should bind once in the constructor of the parent component…</p>
</blockquote>
<blockquote class="blockquote">
<p><em>Note 3:</em> By convention the parent get’s an <code>action()</code> method and the child gets a <code>handleAction()</code> method.</p>
</blockquote>
</section>
<section id="react-keys" class="level2">
<h2 class="anchored" data-anchor-id="react-keys">React Keys</h2>
<p><strong>Problem:</strong></p>
<p>Any time we’ve been mapping over some data and returning a list of components we’ve been getting an error message saying: <code>Warning: Each child in an array or iterator should have a unique "key" prop</code>.</p>
<p><strong>Solution:</strong></p>
<p>This happens because React wants each component in the list to be uniquely identifiable. We can pass a <code>key</code> prop to each component based on the array element it’s being built from (ensuring uniqueness). Most often the <code>key</code> comes from the data set we’re working with.</p>
<p>If we don’t have unique identifiers in the data set, we can use the index of the array we’re mapping over as the <code>key</code>.</p>
<p><em>For example:</em></p>
<div class="sourceCode" id="cb61"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb61-1"><a href="#cb61-1"></a><span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">items</span><span class="op">.</span><span class="fu">map</span>((i<span class="op">,</span>idx) <span class="kw">=&gt; </span><span class="fu">&lt;Component</span> <span class="ot">key</span> <span class="op">=</span> <span class="va">{</span>idx<span class="va">}</span> <span class="fu">/&gt;</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This is not recommended, however, since the data might be reordered or removed. Instead, we can use npm libraries like <a href="https://www.npmjs.com/package/uuid">UUID</a> to generate unique keys.</p>
<p>Issue command: <code>npm install uuid</code> Import using the line: <code>import uuid from 'uuid/v4'</code> Then generate an id anywhere in the project by invoking: <code>uuid()</code></p>
</section>
</section>
<section id="react-forms" class="level1">
<h1>React Forms</h1>
<section id="controlled-components" class="level2">
<h2 class="anchored" data-anchor-id="controlled-components">Controlled Components</h2>
<p>In traditional HTML, the browser takes form elements (such as <code>&lt;input&gt;</code>, <code>&lt;textarea&gt;</code>, or <code>&lt;select&gt;</code> ), and converts them into the DOM (which is just a tree structure whose nodes are the HTML tags as JS objects). These objects maintain their own states and can be updated, using JQuery, based on user input. But the objects don’t get their state updated until after an event, such as a click, is triggered.</p>
<p>In React, where everything is a component that has its own state, we don’t work directly with the states of the form elements in the DOM. Instead, we define the appropriate state for the component and use <code>setState()</code> in a way that <em>continually</em> syncs this state with the input from the form. React becomes the only source of the state… These components are called <em>controlled components</em> because their state is controlled by React through user input.</p>
<p><strong>How do Controlled Components work?</strong></p>
<p>The event that allows the syncing is <code>onChange</code>. Initially we set the <code>value</code> of a form to be some part of the component’s state, and then we listen for a change event. The event is triggered on each keystroke, and the event object, <code>evt</code> carries the changed value as <code>evt.target.value</code>.</p>
<p><em>For example:</em></p>
<div class="sourceCode" id="cb62"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb62-1"><a href="#cb62-1"></a><span class="kw">class</span> Form <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb62-2"><a href="#cb62-2"></a>    </span>
<span id="cb62-3"><a href="#cb62-3"></a>    <span class="co">/* State */</span></span>
<span id="cb62-4"><a href="#cb62-4"></a>    <span class="fu">constructor</span>(props) {</span>
<span id="cb62-5"><a href="#cb62-5"></a>        <span class="kw">super</span>(props)<span class="op">;</span></span>
<span id="cb62-6"><a href="#cb62-6"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">state</span> <span class="op">=</span> { <span class="dt">username</span><span class="op">:</span> <span class="st">''</span> }<span class="op">;</span></span>
<span id="cb62-7"><a href="#cb62-7"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">handleChange</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">handleChange</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>)<span class="op">;</span></span>
<span id="cb62-8"><a href="#cb62-8"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">handleSubmit</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">handleSubmit</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>)<span class="op">;</span></span>
<span id="cb62-9"><a href="#cb62-9"></a>    }</span>
<span id="cb62-10"><a href="#cb62-10"></a>    </span>
<span id="cb62-11"><a href="#cb62-11"></a>    <span class="co">/* Handler of change event */</span></span>
<span id="cb62-12"><a href="#cb62-12"></a>    <span class="fu">handleChange</span>(evt) {</span>
<span id="cb62-13"><a href="#cb62-13"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>({ <span class="dt">username</span><span class="op">:</span> evt<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span> })<span class="op">;</span> <span class="co">/* Note: handleChange uses setState() */</span></span>
<span id="cb62-14"><a href="#cb62-14"></a>    }</span>
<span id="cb62-15"><a href="#cb62-15"></a>    </span>
<span id="cb62-16"><a href="#cb62-16"></a>    <span class="co">/* Handler of submit event */</span></span>
<span id="cb62-17"><a href="#cb62-17"></a>    <span class="fu">handleSubmit</span>(evt) {</span>
<span id="cb62-18"><a href="#cb62-18"></a>        evt<span class="op">.</span><span class="fu">preventDefault</span>()<span class="op">;</span> <span class="co">/* Prevents the default submit behavior of refreshing the page */</span></span>
<span id="cb62-19"><a href="#cb62-19"></a>        <span class="fu">alert</span>(<span class="vs">`You typed: </span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">username</span><span class="sc">}</span><span class="vs">`</span>)</span>
<span id="cb62-20"><a href="#cb62-20"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>({ <span class="dt">username</span><span class="op">:</span> <span class="st">''</span> }) <span class="co">/* Reset username */</span></span>
<span id="cb62-21"><a href="#cb62-21"></a>    }</span>
<span id="cb62-22"><a href="#cb62-22"></a>    </span>
<span id="cb62-23"><a href="#cb62-23"></a>    <span class="co">/* Form - Controlled Component */</span></span>
<span id="cb62-24"><a href="#cb62-24"></a>    <span class="fu">render</span>() {</span>
<span id="cb62-25"><a href="#cb62-25"></a>        <span class="cf">return</span> (</span>
<span id="cb62-26"><a href="#cb62-26"></a>            <span class="kw">&lt;div</span> <span class="ot">className</span> <span class="op">=</span> <span class="st">"Form"</span> <span class="kw">&gt;</span></span>
<span id="cb62-27"><a href="#cb62-27"></a>                <span class="kw">&lt;form</span> <span class="ot">onSubmit</span> <span class="op">=</span> <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">handleSubmit</span><span class="va">}</span><span class="kw">&gt;</span></span>
<span id="cb62-28"><a href="#cb62-28"></a>                    <span class="kw">&lt;input</span> </span>
<span id="cb62-29"><a href="#cb62-29"></a>                        <span class="ot">type</span> <span class="op">=</span> <span class="st">"text"</span> </span>
<span id="cb62-30"><a href="#cb62-30"></a>                        <span class="ot">value</span> <span class="op">=</span> <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">username</span><span class="va">}</span> </span>
<span id="cb62-31"><a href="#cb62-31"></a>                        <span class="ot">onChange</span> <span class="op">=</span> <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">handleChange</span><span class="va">}</span></span>
<span id="cb62-32"><a href="#cb62-32"></a>                    <span class="kw">/&gt;</span></span>
<span id="cb62-33"><a href="#cb62-33"></a>                <span class="kw">&lt;/form&gt;</span></span>
<span id="cb62-34"><a href="#cb62-34"></a>                <span class="kw">&lt;button&gt;</span> Submit! <span class="kw">&lt;/button&gt;</span></span>
<span id="cb62-35"><a href="#cb62-35"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb62-36"><a href="#cb62-36"></a>        )<span class="op">;</span></span>
<span id="cb62-37"><a href="#cb62-37"></a>    }</span>
<span id="cb62-38"><a href="#cb62-38"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="writing-forms-with-multiple-inputs" class="level2">
<h2 class="anchored" data-anchor-id="writing-forms-with-multiple-inputs">Writing Forms With Multiple Inputs</h2>
<p>Take the above example and add two more inputs: a field for an email and one for a password. Correspondingly, we add two more states to keep track of… But what event handler do we attach to their <code>onChange</code>? We can’t just attach <code>handleChange</code> because that one’s setting the username. Do we just make new events <code>handleEmailChange</code> and <code>handlePasswordChange</code>? We could, but this would make for a long and messy code. Instead we do the following…</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb63-1"><a href="#cb63-1"></a><span class="kw">class</span> Form <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb63-2"><a href="#cb63-2"></a>    </span>
<span id="cb63-3"><a href="#cb63-3"></a>    <span class="co">/* State */</span></span>
<span id="cb63-4"><a href="#cb63-4"></a>    <span class="fu">constructor</span>(props) {</span>
<span id="cb63-5"><a href="#cb63-5"></a>        <span class="kw">super</span>(props)<span class="op">;</span></span>
<span id="cb63-6"><a href="#cb63-6"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">state</span> <span class="op">=</span> { <span class="dt">username</span><span class="op">:</span> <span class="st">''</span><span class="op">,</span> <span class="dt">email</span><span class="op">:</span> <span class="st">''</span><span class="op">,</span> <span class="dt">password</span><span class="op">:</span> <span class="st">''</span> }<span class="op">;</span></span>
<span id="cb63-7"><a href="#cb63-7"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">handleChange</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">handleChange</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>)<span class="op">;</span></span>
<span id="cb63-8"><a href="#cb63-8"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">handleSubmit</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">handleSubmit</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>)<span class="op">;</span></span>
<span id="cb63-9"><a href="#cb63-9"></a>    }</span>
<span id="cb63-10"><a href="#cb63-10"></a></span>
<span id="cb63-11"><a href="#cb63-11"></a>    <span class="co">/* Handler of change event */</span></span>
<span id="cb63-12"><a href="#cb63-12"></a>    <span class="fu">handleChange</span>(evt) {</span>
<span id="cb63-13"><a href="#cb63-13"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>({ [evt<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">name</span>]<span class="op">:</span> evt<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span> })<span class="op">;</span></span>
<span id="cb63-14"><a href="#cb63-14"></a>    }</span>
<span id="cb63-15"><a href="#cb63-15"></a></span>
<span id="cb63-16"><a href="#cb63-16"></a>    <span class="co">/* Handler of submit event */</span></span>
<span id="cb63-17"><a href="#cb63-17"></a>    <span class="fu">handleSubmit</span>(evt) {</span>
<span id="cb63-18"><a href="#cb63-18"></a>        evt<span class="op">.</span><span class="fu">preventDefault</span>()<span class="op">;</span></span>
<span id="cb63-19"><a href="#cb63-19"></a>        <span class="fu">alert</span>(<span class="vs">`You typed: </span><span class="sc">${</span> <span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">username</span> <span class="sc">}</span><span class="vs">`</span>)</span>
<span id="cb63-20"><a href="#cb63-20"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>({ [evt<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">name</span>]<span class="op">:</span> <span class="st">''</span> })</span>
<span id="cb63-21"><a href="#cb63-21"></a>    }</span>
<span id="cb63-22"><a href="#cb63-22"></a></span>
<span id="cb63-23"><a href="#cb63-23"></a>    <span class="co">/* Form - Controlled Component */</span></span>
<span id="cb63-24"><a href="#cb63-24"></a>    <span class="fu">render</span>() {</span>
<span id="cb63-25"><a href="#cb63-25"></a>        <span class="cf">return</span> (</span>
<span id="cb63-26"><a href="#cb63-26"></a>            <span class="kw">&lt;div</span> <span class="ot">className</span> <span class="op">=</span> <span class="st">"Form"</span> <span class="kw">&gt;</span></span>
<span id="cb63-27"><a href="#cb63-27"></a>                <span class="kw">&lt;form</span> <span class="ot">onSubmit</span> <span class="op">=</span> <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">handleSubmit</span><span class="va">}</span><span class="kw">&gt;</span></span>
<span id="cb63-28"><a href="#cb63-28"></a>                    <span class="kw">&lt;input</span> </span>
<span id="cb63-29"><a href="#cb63-29"></a>                        <span class="ot">type</span> <span class="op">=</span> <span class="st">"text"</span> </span>
<span id="cb63-30"><a href="#cb63-30"></a>                        <span class="ot">name</span> <span class="op">=</span> <span class="st">"username"</span> <span class="co">/* We add this attribute for the event object */</span></span>
<span id="cb63-31"><a href="#cb63-31"></a>                        <span class="ot">value</span> <span class="op">=</span> <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">username</span><span class="va">}</span></span>
<span id="cb63-32"><a href="#cb63-32"></a>                        <span class="ot">placeholder</span> <span class="op">=</span> <span class="st">"username"</span></span>
<span id="cb63-33"><a href="#cb63-33"></a>                        <span class="ot">onChange</span> <span class="op">=</span> <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">handleChange</span><span class="va">}</span></span>
<span id="cb63-34"><a href="#cb63-34"></a>                    <span class="kw">/&gt;</span></span>
<span id="cb63-35"><a href="#cb63-35"></a>                    <span class="kw">&lt;input</span></span>
<span id="cb63-36"><a href="#cb63-36"></a>                        <span class="ot">type</span> <span class="op">=</span> <span class="st">"email"</span></span>
<span id="cb63-37"><a href="#cb63-37"></a>                        <span class="ot">name</span> <span class="op">=</span> <span class="st">"email"</span> <span class="co">/* We add this attribute for the event object */</span></span>
<span id="cb63-38"><a href="#cb63-38"></a>                        <span class="ot">value</span> <span class="op">=</span> <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">email</span><span class="va">}</span></span>
<span id="cb63-39"><a href="#cb63-39"></a>                        <span class="ot">placeholder</span> <span class="op">=</span> <span class="st">"email"</span></span>
<span id="cb63-40"><a href="#cb63-40"></a>                        <span class="ot">onChange</span> <span class="op">=</span> <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">handleChange</span><span class="va">}</span></span>
<span id="cb63-41"><a href="#cb63-41"></a>                    <span class="kw">/&gt;</span></span>
<span id="cb63-42"><a href="#cb63-42"></a>                    <span class="kw">&lt;input</span></span>
<span id="cb63-43"><a href="#cb63-43"></a>                        <span class="ot">type</span> <span class="op">=</span> <span class="st">"password"</span></span>
<span id="cb63-44"><a href="#cb63-44"></a>                        <span class="ot">name</span> <span class="op">=</span> <span class="st">"password"</span> <span class="co">/* We add this attribute for the event object */</span></span>
<span id="cb63-45"><a href="#cb63-45"></a>                        <span class="ot">value</span> <span class="op">=</span> <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">password</span><span class="va">}</span></span>
<span id="cb63-46"><a href="#cb63-46"></a>                        <span class="ot">placeholder</span> <span class="op">=</span> <span class="st">"password"</span></span>
<span id="cb63-47"><a href="#cb63-47"></a>                        <span class="ot">onChange</span> <span class="op">=</span> <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">handleChange</span><span class="va">}</span></span>
<span id="cb63-48"><a href="#cb63-48"></a>                    <span class="kw">/&gt;</span></span>
<span id="cb63-49"><a href="#cb63-49"></a>                <span class="kw">&lt;/form&gt;</span></span>
<span id="cb63-50"><a href="#cb63-50"></a>                <span class="kw">&lt;button&gt;</span> Submit! <span class="kw">&lt;/button&gt;</span></span>
<span id="cb63-51"><a href="#cb63-51"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb63-52"><a href="#cb63-52"></a>        )<span class="op">;</span></span>
<span id="cb63-53"><a href="#cb63-53"></a>    }</span>
<span id="cb63-54"><a href="#cb63-54"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Explanation:</em> We use what’s called a <em>computed property name</em> in JS. <code>evt.target.name</code> evaluates to either <code>username</code>, <code>email</code>, or <code>password</code> depending on context.</p>
</blockquote>
<blockquote class="blockquote">
<p><em>Note:</em> The <code>name</code> attribute of the form must match the name of the properties in the state object.</p>
</blockquote>
</section>
<section id="form-labels" class="level2">
<h2 class="anchored" data-anchor-id="form-labels">Form Labels</h2>
<p>In regular HTML we label forms using an id attribute and a for attribute as follows:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb64-1"><a href="#cb64-1"></a><span class="dt">&lt;</span><span class="kw">label</span><span class="ot"> for </span><span class="op">=</span> <span class="st">"username"</span><span class="ot"> </span><span class="dt">&gt;</span> Username <span class="dt">&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb64-2"><a href="#cb64-2"></a><span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type </span><span class="op">=</span> <span class="st">"text"</span><span class="ot"> id </span><span class="op">=</span> <span class="st">"username"</span><span class="ot"> value </span><span class="op">=</span> <span class="st">""</span><span class="dt">/&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In JSX we use <code>htmlFor</code> instead of <code>for</code> in order so that there’s no conflict with the JS keyword <code>for</code> (Just like we use <code>className</code> in JSX instead of <code>class</code> in HTML).</p>
</section>
</section>
<section id="lifecycle-methods" class="level1">
<h1>Lifecycle Methods</h1>
<section id="component-lifecycle" class="level2">
<h2 class="anchored" data-anchor-id="component-lifecycle">Component Lifecycle</h2>
<p>Every component comes built-in with methods, <em>lifecycle methods</em>, associated with a <em>lifecycle stage</em> of a component.</p>
<p>There are three lifecycle stages:</p>
<ul>
<li>Mounting - first time rendering a component to the DOM - when finished, <code>componentDidMount()</code> is called.</li>
<li>Updating - subsequent times rendering a component to the DOM - <code>componentDidUpdate()</code> is called</li>
<li>Unmounting - <code>componentWillUnmount()</code> is called.</li>
</ul>
<p>When React wants to render a component for the first time, it calls <code>constructor()</code> then <code>render()</code>. Subsequent renders of the component are not preceded by a call to the constructor.</p>
<blockquote class="blockquote">
<p><em>Note:</em> Since by the time <code>componentDidMount()</code> is called the component has already rendered for the first time, if we call <code>setState()</code> within <code>componentDidMount()</code> it will cause a re-render. This is fine and common practice…</p>
</blockquote>
<p><em>For Example:</em></p>
<p>Suppose we want a component to show the time, in seconds, from the first time it’s been rendered. We make a <code>setInterval()</code> call in <code>componentDidMount()</code> which repeatedly keeps updating the state and causing a re-render.</p>
<p><code>Timer.js</code></p>
<div class="sourceCode" id="cb65"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb65-1"><a href="#cb65-1"></a><span class="kw">class</span> Timer <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb65-2"><a href="#cb65-2"></a>    </span>
<span id="cb65-3"><a href="#cb65-3"></a>    <span class="fu">constructor</span>(props) {</span>
<span id="cb65-4"><a href="#cb65-4"></a>        <span class="kw">super</span>(props)<span class="op">;</span></span>
<span id="cb65-5"><a href="#cb65-5"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">state</span> <span class="op">=</span> { <span class="dt">time</span><span class="op">:</span> <span class="kw">new</span> <span class="bu">Date</span>() } <span class="co">/* Set state to a new Date object */</span></span>
<span id="cb65-6"><a href="#cb65-6"></a>    }</span>
<span id="cb65-7"><a href="#cb65-7"></a>    </span>
<span id="cb65-8"><a href="#cb65-8"></a>    <span class="fu">componentDidMount</span>() {</span>
<span id="cb65-9"><a href="#cb65-9"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">timerID</span> <span class="op">=</span> <span class="pp">setInterval</span>(() <span class="kw">=&gt;</span> { <span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>({ <span class="dt">time</span><span class="op">:</span> <span class="kw">new</span> <span class="bu">Date</span>() })<span class="op">;</span> }<span class="op">,</span> <span class="dv">1000</span>)<span class="op">;</span></span>
<span id="cb65-10"><a href="#cb65-10"></a>    }</span>
<span id="cb65-11"><a href="#cb65-11"></a>    </span>
<span id="cb65-12"><a href="#cb65-12"></a>    <span class="fu">componentWillUnmount</span>() {</span>
<span id="cb65-13"><a href="#cb65-13"></a>        <span class="pp">clearInterval</span>(<span class="kw">this</span><span class="op">.</span><span class="at">timerID</span>)<span class="op">;</span></span>
<span id="cb65-14"><a href="#cb65-14"></a>    }</span>
<span id="cb65-15"><a href="#cb65-15"></a>    </span>
<span id="cb65-16"><a href="#cb65-16"></a>    <span class="fu">render</span>() {</span>
<span id="cb65-17"><a href="#cb65-17"></a>        <span class="cf">return </span><span class="kw">&lt;h1&gt;</span><span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">time</span><span class="op">.</span><span class="fu">getSeconds</span>()<span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb65-18"><a href="#cb65-18"></a>    }</span>
<span id="cb65-19"><a href="#cb65-19"></a>    </span>
<span id="cb65-20"><a href="#cb65-20"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> We use <code>this</code> with <code>timerID</code> to make a class field specific to this instance of the component. We then clear the timer in <code>componentWillUnmount()</code>. Forgetting to do this will cause the state of a no longer existing component to keep updating.</p>
</blockquote>
</section>
<section id="loading-data-via-ajax" class="level2">
<h2 class="anchored" data-anchor-id="loading-data-via-ajax">Loading Data Via AJAX</h2>
<p>First let’s import a library for HTTP <code>POST</code>/<code>GET</code> requests called <em>Axios</em>.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb66-1"><a href="#cb66-1"></a><span class="ex">npm</span> install axios</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then inside the component:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb67-1"><a href="#cb67-1"></a><span class="im">import</span> axios <span class="im">from</span> <span class="st">'axios'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now we can do a <code>GET</code> request from an API endpoint using the following syntax:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb68-1"><a href="#cb68-1"></a>axios<span class="op">.</span><span class="fu">get</span>(<span class="st">"URL"</span>)<span class="op">.</span><span class="fu">then</span>((response) <span class="kw">=&gt;</span> { <span class="co">/* Do something with response */</span> })</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Where:</em> <code>then()</code> is a method that executes a function provided to it, and <code>response</code> is the response gotten from the API.</p>
</blockquote>
<blockquote class="blockquote">
<p><em>Note:</em> AJAX stands for “Asynchronous JavaScript and XML” and refers to general web-development techniques in which data is sent or received in the background. So, what we did above is AJAX…</p>
</blockquote>
<p><em>For example:</em></p>
<p>Suppose we want to make a component that fetches a new quote from <em>Github’s Zen API</em>.</p>
<p><code>ZenQuote.js</code></p>
<div class="sourceCode" id="cb69"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb69-1"><a href="#cb69-1"></a><span class="im">import</span> axios <span class="im">from</span> <span class="st">'axios'</span></span>
<span id="cb69-2"><a href="#cb69-2"></a></span>
<span id="cb69-3"><a href="#cb69-3"></a><span class="kw">class</span> ZenQuote <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb69-4"><a href="#cb69-4"></a>    </span>
<span id="cb69-5"><a href="#cb69-5"></a>    <span class="fu">constructor</span>(props) {</span>
<span id="cb69-6"><a href="#cb69-6"></a>        <span class="kw">super</span>(props)<span class="op">;</span></span>
<span id="cb69-7"><a href="#cb69-7"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">state</span> <span class="op">=</span> { <span class="dt">quote</span><span class="op">:</span> <span class="st">""</span> }<span class="op">;</span></span>
<span id="cb69-8"><a href="#cb69-8"></a>    }</span>
<span id="cb69-9"><a href="#cb69-9"></a>    </span>
<span id="cb69-10"><a href="#cb69-10"></a>    <span class="fu">componentDidMount</span>() {</span>
<span id="cb69-11"><a href="#cb69-11"></a>        axios<span class="op">.</span><span class="fu">get</span>(<span class="st">"https://api.github.com/zen"</span>)</span>
<span id="cb69-12"><a href="#cb69-12"></a>             <span class="op">.</span><span class="fu">then</span>((response) <span class="kw">=&gt;</span> <span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>({ <span class="dt">quote</span><span class="op">:</span> response<span class="op">.</span><span class="at">data</span> })<span class="op">;</span></span>
<span id="cb69-13"><a href="#cb69-13"></a>    }</span>
<span id="cb69-14"><a href="#cb69-14"></a>    </span>
<span id="cb69-15"><a href="#cb69-15"></a>    <span class="fu">render</span>() {</span>
<span id="cb69-16"><a href="#cb69-16"></a>        <span class="cf">return </span><span class="kw">&lt;p&gt;</span><span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">quote</span><span class="va">}</span><span class="kw">&lt;/p&gt;</span><span class="op">;</span></span>
<span id="cb69-17"><a href="#cb69-17"></a>    }</span>
<span id="cb69-18"><a href="#cb69-18"></a>    </span>
<span id="cb69-19"><a href="#cb69-19"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> We can always <code>console.log()</code> the <code>response</code> first to see how it’s structured. In this case, the <code>response</code> is a JS object with property <code>data</code> that contains the quote.</p>
</blockquote>
<p><strong>Why not do whatever we’re doing in componentDidMount() in the constructor instead?</strong></p>
<p>By convention, we shouldn’t <code>setState()</code> in the constructor. So this is just by convention…</p>
</section>
<section id="adding-animated-loaders" class="level2">
<h2 class="anchored" data-anchor-id="adding-animated-loaders">Adding Animated Loaders</h2>
<p>Sometimes the retrieval of data from an endpoint takes a while. In these situations we may wish to display a loading icon until the data is retrieved. In this case, we can use a <code>setTimeout()</code> function to cause a delay. During this delay we can show the loading icon.</p>
<p>Take the above <code>ZenQuote.js</code> again, and modify it as follows:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb70-1"><a href="#cb70-1"></a><span class="im">import</span> axios <span class="im">from</span> <span class="st">'axios'</span></span>
<span id="cb70-2"><a href="#cb70-2"></a></span>
<span id="cb70-3"><a href="#cb70-3"></a><span class="kw">class</span> ZenQuote <span class="kw">extends</span> React<span class="op">.</span><span class="fu">Component</span>() {</span>
<span id="cb70-4"><a href="#cb70-4"></a>    </span>
<span id="cb70-5"><a href="#cb70-5"></a>    <span class="fu">constructor</span>(props) {</span>
<span id="cb70-6"><a href="#cb70-6"></a>        <span class="kw">super</span>(props)<span class="op">;</span></span>
<span id="cb70-7"><a href="#cb70-7"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">state</span> <span class="op">=</span> { <span class="dt">quote</span><span class="op">:</span> <span class="st">""</span><span class="op">,</span> <span class="dt">isLoade</span><span class="op">:</span> <span class="kw">false</span> }<span class="op">;</span></span>
<span id="cb70-8"><a href="#cb70-8"></a>    }</span>
<span id="cb70-9"><a href="#cb70-9"></a>    </span>
<span id="cb70-10"><a href="#cb70-10"></a>    <span class="fu">componentDidMount</span>() {</span>
<span id="cb70-11"><a href="#cb70-11"></a>        axios<span class="op">.</span><span class="fu">get</span>(<span class="st">"https://api.github.com/zen"</span>)<span class="op">.</span><span class="fu">then</span>((response) <span class="kw">=&gt;</span> {</span>
<span id="cb70-12"><a href="#cb70-12"></a>            <span class="pp">setTimeout</span>(<span class="kw">function</span>() {</span>
<span id="cb70-13"><a href="#cb70-13"></a>                <span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>({ <span class="dt">quote</span><span class="op">:</span> response<span class="op">.</span><span class="at">data</span><span class="op">,</span> <span class="dt">isLoaded</span><span class="op">:</span> <span class="kw">true</span> })<span class="op">;</span></span>
<span id="cb70-14"><a href="#cb70-14"></a>            }<span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>)<span class="op">,</span> <span class="dv">3000</span>)<span class="op">;</span> <span class="co">/* 3 second delay */</span></span>
<span id="cb70-15"><a href="#cb70-15"></a>        })<span class="op">;</span></span>
<span id="cb70-16"><a href="#cb70-16"></a>    }</span>
<span id="cb70-17"><a href="#cb70-17"></a></span>
<span id="cb70-18"><a href="#cb70-18"></a>    <span class="fu">render</span>() {</span>
<span id="cb70-19"><a href="#cb70-19"></a>        <span class="cf">return</span>(</span>
<span id="cb70-20"><a href="#cb70-20"></a>            <span class="kw">&lt;div&gt;</span></span>
<span id="cb70-21"><a href="#cb70-21"></a>                <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">isLoaded</span> <span class="op">?</span> </span>
<span id="cb70-22"><a href="#cb70-22"></a>                    ( <span class="kw">&lt;p&gt;</span><span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">quote</span><span class="va">}</span><span class="kw">&lt;/p&gt;</span> ) <span class="op">:</span> </span>
<span id="cb70-23"><a href="#cb70-23"></a>                    ( <span class="kw">&lt;div</span> <span class="ot">className</span> <span class="op">=</span> <span class="st">"loader"</span> <span class="kw">/&gt;</span> )</span>
<span id="cb70-24"><a href="#cb70-24"></a>                <span class="va">}</span></span>
<span id="cb70-25"><a href="#cb70-25"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb70-26"><a href="#cb70-26"></a>        )</span>
<span id="cb70-27"><a href="#cb70-27"></a>    }</span>
<span id="cb70-28"><a href="#cb70-28"></a>    </span>
<span id="cb70-29"><a href="#cb70-29"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> It’s assumed the class <code>loader</code> has the styling of a loader icon. We’ve also added a state called <code>isLoaded</code> to conditionally display either the loading icon or the loaded data (the quote).</p>
</blockquote>
<p>We can also just use await to wait for the data to finish downloading instead of using <code>setTimeout()</code>.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb71-1"><a href="#cb71-1"></a>API_URL <span class="op">=</span> <span class="st">"https://api.github.com/zen"</span></span>
<span id="cb71-2"><a href="#cb71-2"></a><span class="kw">let</span> response <span class="op">=</span> <span class="cf">await</span> axios<span class="op">.</span><span class="fu">get</span>(API_URL)<span class="op">;</span></span>
<span id="cb71-3"><a href="#cb71-3"></a><span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>( {<span class="dt">quote</span><span class="op">:</span> response<span class="op">.</span><span class="at">data</span>} )<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>But in this case we would need to make the function in which we’re using <code>await</code> be <code>async</code>. That is:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb72-1"><a href="#cb72-1"></a><span class="kw">async</span> <span class="fu">componentDidMount</span>() { <span class="co">/* Above 3 lines */</span> }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="updating" class="level2">
<h2 class="anchored" data-anchor-id="updating">Updating</h2>
<p>When components are re-rendered, <code>componentDidUpdate()</code> is called. This is a good place to implement any side effect operations like:</p>
<ul>
<li>Syncing up with <code>localStorage</code> (or any other database)</li>
<li>Updating the DOM for uncontrolled components</li>
</ul>
<p><strong>Previous Props and Previous State</strong></p>
<p>The <code>componentDidUpdate()</code> method accepts two arguments: the previous props and previous state of the component. So we can compare the current props/state with the old one and condition based on the result.</p>
<p><em>For example:</em></p>
<div class="sourceCode" id="cb73"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb73-1"><a href="#cb73-1"></a><span class="kw">class</span> myComponent <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb73-2"><a href="#cb73-2"></a>    </span>
<span id="cb73-3"><a href="#cb73-3"></a>    <span class="fu">componentDidUpdate</span>(prevProps<span class="op">,</span> prevState) {</span>
<span id="cb73-4"><a href="#cb73-4"></a>        <span class="co">/* setState() based on comparison */</span></span>
<span id="cb73-5"><a href="#cb73-5"></a>    }</span>
<span id="cb73-6"><a href="#cb73-6"></a>    </span>
<span id="cb73-7"><a href="#cb73-7"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="unmounting" class="level2">
<h2 class="anchored" data-anchor-id="unmounting">Unmounting</h2>
<p>The <code>componentWillUnmount()</code> method is called immediately before a component is destroyed (i.e.&nbsp;no longer going to be rendered). In this method, we do all the necessary cleanup such as:</p>
<ul>
<li>invalidating timers</li>
<li>cancelling network requests</li>
<li>shutting down web sockets</li>
</ul>
<p>Setting the state here is pointless, because there’s not going to be a re-render.</p>
</section>
<section id="pure-components" class="level2">
<h2 class="anchored" data-anchor-id="pure-components">Pure Components</h2>
<p>We may not wish for all child components of a parent component to re-render upon a state change. Suppose we have several child components whose <code>props</code> are unchanged, and one whose <code>props</code> is changed upon the parent experiencing a <code>state</code> change. We can re-render only that child component, instead of rendering all of them.</p>
<p>There’s a lifecycle method called <code>shouldComponentUpdate()</code> that receives arguments <code>nextProps</code> and <code>nextState</code> that we can give to these components, and then manually check inside <code>shouldComponentUpdate()</code> if the next <code>props</code>/<code>state</code> are the same as previous ones (in which case we’d prevent a re-render). However, there’s an easier way…</p>
<p>We simply import <code>PureComponent</code> which carries the above logic automatically for us using:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb74-1"><a href="#cb74-1"></a><span class="im">import</span> React<span class="op">,</span> {PureComponent} <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And then we derive the component from <code>PureComponent</code> by specifying:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb75-1"><a href="#cb75-1"></a><span class="kw">class</span> MyComponent <span class="kw">extends</span> PureComponent {</span>
<span id="cb75-2"><a href="#cb75-2"></a>    <span class="co">/* M</span></span>
<span id="cb75-3"><a href="#cb75-3"></a><span class="co">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="local-storage" class="level2">
<h2 class="anchored" data-anchor-id="local-storage">Local Storage</h2>
<p>The browser creates a <code>window</code> object that has a property called <code>localStorage</code> into which we can add items. Typing in console <code>window.localStorage</code> returns this object, which is:</p>
<pre><code>Storage {
    length: 0
    __proto__: Storage
}</code></pre>
<p>We can use this object to store data that the page has already rendered, and reference it in case we want to avoid rendering that data again. This is just one use case however, as local storage can be used in any number of ways.</p>
<p><strong>Setting a property in <code>window.localStorage</code>:</strong></p>
<div class="sourceCode" id="cb77"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb77-1"><a href="#cb77-1"></a><span class="bu">window</span><span class="op">.</span><span class="at">localStorage</span><span class="op">.</span><span class="fu">setItem</span>(<span class="st">"key"</span><span class="op">,</span><span class="st">"value"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> <code>localStorage</code> only accepts string values. So, if the value we wish to pass is an object itself, or some other non-primitive, we should use <code>JSON.stringify()</code> to convert that object into a string.</p>
</blockquote>
<p><strong>Getting a property in <code>window.localStorage</code>:</strong></p>
<div class="sourceCode" id="cb78"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb78-1"><a href="#cb78-1"></a><span class="bu">window</span><span class="op">.</span><span class="at">localStorage</span><span class="op">.</span><span class="fu">getItem</span>(<span class="st">"key"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Clearing <code>window.localStorage</code>:</strong></p>
<div class="sourceCode" id="cb79"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb79-1"><a href="#cb79-1"></a><span class="bu">window</span><span class="op">.</span><span class="at">localStorage</span><span class="op">.</span><span class="at">clear</span>()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="react-router" class="level1">
<h1>React Router</h1>
<section id="server-side-routing" class="level2">
<h2 class="anchored" data-anchor-id="server-side-routing">Server-Side Routing</h2>
<p>Traditional routing whereby clicking a link requests a new page and replaces the entire DOM. The server decides what HTML to return based on requested URL (with its accompanying path and query parameters). A new request is sent to the server and the entire page refreshes.</p>
</section>
<section id="fake-client-side-routing" class="level2">
<h2 class="anchored" data-anchor-id="fake-client-side-routing">Fake Client-Side Routing</h2>
<p>The page does not refresh, we create the appearance of routing through client-side processing. There’s no new request being sent to the server… it’s all happening on the client-side. One way to achieve this based on what we already know is to display different components conditionally based on state.</p>
<p><em>For example:</em></p>
<p>Suppose we have three components <code>Home</code>, <code>Contact</code>, and <code>About</code> corresponding to three pages on our website, and a navbar with links to each of these pages. We can hack together client-side routing as follows:</p>
<p><code>App.js</code></p>
<div class="sourceCode" id="cb80"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb80-1"><a href="#cb80-1"></a><span class="im">import</span> About <span class="im">from</span> <span class="st">'./Home'</span><span class="op">;</span></span>
<span id="cb80-2"><a href="#cb80-2"></a><span class="im">import</span> Contact <span class="im">from</span> <span class="st">'./Contact'</span><span class="op">;</span></span>
<span id="cb80-3"><a href="#cb80-3"></a><span class="im">import</span> Help <span class="im">from</span> <span class="st">'./About'</span><span class="op">;</span></span>
<span id="cb80-4"><a href="#cb80-4"></a></span>
<span id="cb80-5"><a href="#cb80-5"></a><span class="kw">class</span> App <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb80-6"><a href="#cb80-6"></a>    </span>
<span id="cb80-7"><a href="#cb80-7"></a>    <span class="fu">constructor</span>(props) {</span>
<span id="cb80-8"><a href="#cb80-8"></a>        <span class="kw">super</span>(props)<span class="op">;</span></span>
<span id="cb80-9"><a href="#cb80-9"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">state</span> <span class="op">=</span> { <span class="dt">page</span><span class="op">:</span> <span class="st">'Home'</span> }<span class="op">;</span></span>
<span id="cb80-10"><a href="#cb80-10"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">changePage</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">changePage</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>)<span class="op">;</span></span>
<span id="cb80-11"><a href="#cb80-11"></a>    }</span>
<span id="cb80-12"><a href="#cb80-12"></a>    </span>
<span id="cb80-13"><a href="#cb80-13"></a>    <span class="fu">changePage</span>(pg) {</span>
<span id="cb80-14"><a href="#cb80-14"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>({ <span class="dt">page</span><span class="op">:</span> pg })<span class="op">;</span></span>
<span id="cb80-15"><a href="#cb80-15"></a>    }</span>
<span id="cb80-16"><a href="#cb80-16"></a>    </span>
<span id="cb80-17"><a href="#cb80-17"></a>    <span class="fu">renderPage</span>() {</span>
<span id="cb80-18"><a href="#cb80-18"></a>        <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">page</span> <span class="op">===</span> <span class="st">'Home'</span>) { <span class="cf">return </span><span class="fu">&lt;Home</span> <span class="fu">/&gt;</span><span class="op">;</span> }</span>
<span id="cb80-19"><a href="#cb80-19"></a>        <span class="cf">else</span> <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">page</span> <span class="op">===</span> <span class="st">'Contact'</span>) { <span class="cf">return </span><span class="fu">&lt;Contact</span> <span class="fu">/&gt;</span><span class="op">;</span> }</span>
<span id="cb80-20"><a href="#cb80-20"></a>        <span class="cf">else</span> <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">page</span> <span class="op">===</span> <span class="st">'About'</span>) { <span class="cf">return </span><span class="fu">&lt;About</span> <span class="fu">/&gt;</span><span class="op">;</span> }</span>
<span id="cb80-21"><a href="#cb80-21"></a>    }</span>
<span id="cb80-22"><a href="#cb80-22"></a>    </span>
<span id="cb80-23"><a href="#cb80-23"></a>    <span class="fu">render</span>() {</span>
<span id="cb80-24"><a href="#cb80-24"></a>        <span class="cf">return</span>(</span>
<span id="cb80-25"><a href="#cb80-25"></a>            <span class="kw">&lt;div</span> <span class="ot">className</span><span class="op">=</span><span class="st">"App"</span><span class="kw">&gt;</span></span>
<span id="cb80-26"><a href="#cb80-26"></a>                <span class="kw">&lt;nav&gt;</span></span>
<span id="cb80-27"><a href="#cb80-27"></a>                    <span class="kw">&lt;a</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="fu">changePage</span>(<span class="st">'Home'</span>)<span class="va">}</span><span class="kw">&gt;</span>Home<span class="kw">&lt;/a&gt;</span></span>
<span id="cb80-28"><a href="#cb80-28"></a>                    <span class="kw">&lt;a</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="fu">changePage</span>(<span class="st">'Contact'</span>)<span class="va">}</span><span class="kw">&gt;</span>Contact<span class="kw">&lt;/a&gt;</span></span>
<span id="cb80-29"><a href="#cb80-29"></a>                    <span class="kw">&lt;a</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="fu">changePage</span>(<span class="st">'About'</span>)<span class="va">}</span><span class="kw">&gt;</span>About<span class="kw">&lt;/a&gt;</span></span>
<span id="cb80-30"><a href="#cb80-30"></a>                <span class="kw">&lt;/nav&gt;</span></span>
<span id="cb80-31"><a href="#cb80-31"></a>                <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="fu">renderPage</span>()<span class="va">}</span></span>
<span id="cb80-32"><a href="#cb80-32"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb80-33"><a href="#cb80-33"></a>        )<span class="op">;</span></span>
<span id="cb80-34"><a href="#cb80-34"></a>    }</span>
<span id="cb80-35"><a href="#cb80-35"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This is a bad way to do client-side routing because the browser’s back and forward buttons don’t work. The browser maintains an <code>history</code> object that’s currently unaware of our navigation steps. The URL also stays the same… it doesn’t reflect where we are on the page because, well, we never actually refresh the page. This also means the user can’t bookmark specific pages on the website. This is where the <em>React Router</em> comes into play.</p>
</section>
<section id="real-client-side-routing-using-react-router" class="level2">
<h2 class="anchored" data-anchor-id="real-client-side-routing-using-react-router">Real Client-Side Routing Using React Router</h2>
<blockquote class="blockquote">
<p><em>Note:</em> React Router isn’t the only routing tool for React, and it’s by a third-party. But it is the most well-maintained and most widely adopted one.</p>
</blockquote>
<p><strong>Step 1:</strong> First we need to install React Router:</p>
<pre><code>npm install react-router-dom</code></pre>
<blockquote class="blockquote">
<p><em>Note:</em> To save a module, such as this one, to the dependencies, we can add a <code>--save</code> modifier as follows:</p>
<pre><code>npm install --save react-router-dom</code></pre>
<p>The module will be added as a dependency in <code>package.json</code>.</p>
</blockquote>
<p><strong>Step 2:</strong> Then we need to import the router:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb83-1"><a href="#cb83-1"></a><span class="im">import</span> {BrowserRouter} <span class="im">from</span> <span class="st">'react-router-dom'</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Step 3:</strong> Then, in the index.js file, we wrap the <code>App</code> component with a <code>BrowserRouter</code> component:</p>
<p><code>index.js</code></p>
<div class="sourceCode" id="cb84"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb84-1"><a href="#cb84-1"></a>ReactDom<span class="op">.</span><span class="fu">render</span>(<span class="fu">&lt;BrowserRouter&gt;&lt;App</span> <span class="fu">/&gt;&lt;/BrowserRouter&gt;</span><span class="op">,</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">'root'</span>))<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Wrong Step 4:</strong> Then we need to route the requests, so we import the <code>Route</code> component:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb85-1"><a href="#cb85-1"></a><span class="im">import</span> {Route} <span class="im">from</span> <span class="st">'react-router-dom'</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Step 5:</strong> In the <code>App</code> component’s <code>render()</code> method, instead of adding components for individual web pages directly, we add <code>Route</code> components that take a <code>path</code> attribute and a <code>component</code> attribute to map the path to.</p>
<p><code>App.js</code></p>
<div class="sourceCode" id="cb86"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb86-1"><a href="#cb86-1"></a><span class="kw">class</span> App <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb86-2"><a href="#cb86-2"></a>    <span class="fu">render</span>() {</span>
<span id="cb86-3"><a href="#cb86-3"></a>        <span class="cf">return</span>(</span>
<span id="cb86-4"><a href="#cb86-4"></a>            <span class="kw">&lt;div</span> <span class="ot">className</span> <span class="op">=</span> <span class="st">"App"</span><span class="kw">&gt;</span></span>
<span id="cb86-5"><a href="#cb86-5"></a>                <span class="fu">&lt;Route</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/Home"</span> <span class="ot">component</span><span class="op">=</span><span class="va">{</span>Home<span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb86-6"><a href="#cb86-6"></a>                <span class="fu">&lt;Route</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/Contact"</span> <span class="ot">component</span><span class="op">=</span><span class="va">{</span>Contact<span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb86-7"><a href="#cb86-7"></a>                <span class="fu">&lt;Route</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/About"</span> <span class="ot">component</span><span class="op">=</span><span class="va">{</span>About<span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb86-8"><a href="#cb86-8"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb86-9"><a href="#cb86-9"></a>        )<span class="op">;</span></span>
<span id="cb86-10"><a href="#cb86-10"></a>    }</span>
<span id="cb86-11"><a href="#cb86-11"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> There’s currently one problem. The root URL shows us nothing… That’s because it’s path, <code>"/"</code> is not mapped to any component. But if we map <code>Home</code> to <code>"/"</code> then another problem arises. Now navigating to <code>"/Contact"</code> shows both the <code>Home</code> component as well as the <code>Contact</code> component. This is because the path matching is inclusive. It first matches <code>"/"</code> and shows the <code>Home</code> component, and then it matches <code>"/Contact"</code> and shows the <code>Contact</code> component. We can fix this issue by importing a <code>Switch</code></p>
</blockquote>
<p><strong>Wrong Step 4 Again: Using a Switch</strong></p>
<div class="sourceCode" id="cb87"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb87-1"><a href="#cb87-1"></a><span class="im">import</span> {Route<span class="op">,</span> Switch} <span class="im">from</span> <span class="st">'react-router-dom'</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>App.js</code></p>
<div class="sourceCode" id="cb88"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb88-1"><a href="#cb88-1"></a><span class="kw">class</span> App <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb88-2"><a href="#cb88-2"></a>    <span class="fu">render</span>() {</span>
<span id="cb88-3"><a href="#cb88-3"></a>        <span class="cf">return</span>(</span>
<span id="cb88-4"><a href="#cb88-4"></a>            <span class="kw">&lt;div</span> <span class="ot">className</span> <span class="op">=</span> <span class="st">"App"</span><span class="kw">&gt;</span></span>
<span id="cb88-5"><a href="#cb88-5"></a>                <span class="fu">&lt;Switch&gt;</span></span>
<span id="cb88-6"><a href="#cb88-6"></a>                    <span class="fu">&lt;Route</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/"</span> <span class="ot">component</span><span class="op">=</span><span class="va">{</span>Home<span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb88-7"><a href="#cb88-7"></a>                    <span class="fu">&lt;Route</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/Contact"</span> <span class="ot">component</span><span class="op">=</span><span class="va">{</span>Contact<span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb88-8"><a href="#cb88-8"></a>                    <span class="fu">&lt;Route</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/About"</span> <span class="ot">component</span><span class="op">=</span><span class="va">{</span>About<span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb88-9"><a href="#cb88-9"></a>                <span class="fu">&lt;/Switch&gt;</span></span>
<span id="cb88-10"><a href="#cb88-10"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb88-11"><a href="#cb88-11"></a>        )<span class="op">;</span></span>
<span id="cb88-12"><a href="#cb88-12"></a>    }</span>
<span id="cb88-13"><a href="#cb88-13"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> The <code>Switch</code> component works like a JS switch. Only the first condition that evaluates to <code>true</code> will return. So now only the first matching component is returned. But this means that only <code>Home</code> is ever rendered, since it’s got always the first condition that evaluates to <code>true</code>. We can either play around with the ordering of <code>Route</code> components, or use the <code>exact</code> attribute.</p>
</blockquote>
<p><strong>Correct Step 4:</strong></p>
<p>We pass in an extra attribute to the Route components called exact that makes matching be, well, exact.</p>
<p><code>App.js</code></p>
<div class="sourceCode" id="cb89"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb89-1"><a href="#cb89-1"></a><span class="kw">class</span> App <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb89-2"><a href="#cb89-2"></a>    <span class="fu">render</span>() {</span>
<span id="cb89-3"><a href="#cb89-3"></a>        <span class="cf">return</span>(</span>
<span id="cb89-4"><a href="#cb89-4"></a>            <span class="kw">&lt;div</span> <span class="ot">className</span> <span class="op">=</span> <span class="st">"App"</span><span class="kw">&gt;</span></span>
<span id="cb89-5"><a href="#cb89-5"></a>                <span class="fu">&lt;Switch&gt;</span></span>
<span id="cb89-6"><a href="#cb89-6"></a>                    <span class="fu">&lt;Route</span> <span class="ot">exact</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/"</span> <span class="ot">component</span><span class="op">=</span><span class="va">{</span>Home<span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb89-7"><a href="#cb89-7"></a>                    <span class="fu">&lt;Route</span> <span class="ot">exact</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/Contact"</span> <span class="ot">component</span><span class="op">=</span><span class="va">{</span>Contact<span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb89-8"><a href="#cb89-8"></a>                    <span class="fu">&lt;Route</span> <span class="ot">exact</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/About"</span> <span class="ot">component</span><span class="op">=</span><span class="va">{</span>About<span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb89-9"><a href="#cb89-9"></a>                <span class="fu">&lt;/Switch&gt;</span></span>
<span id="cb89-10"><a href="#cb89-10"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb89-11"><a href="#cb89-11"></a>        )<span class="op">;</span></span>
<span id="cb89-12"><a href="#cb89-12"></a>    }</span>
<span id="cb89-13"><a href="#cb89-13"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> We still use a <code>Switch</code> because there are cases in which not every <code>Route</code> component is given an <code>exact</code> attribute, but we still want to limit the return to one match.</p>
</blockquote>
<p><strong>But something’s still missing:</strong></p>
<p>Now if we add the paths to the URLs, the correct components will be rendered. However, users don’t typically navigate by typing but by clicking links. Next we will see how to route clicks.</p>
</section>
<section id="the-link-component" class="level2">
<h2 class="anchored" data-anchor-id="the-link-component">The Link Component</h2>
<p>The anchor tags in HTML (e.g.&nbsp;<code>&lt;a href="/Contact"&gt;Home&lt;/a&gt;</code>) do server-side routing. That is, they issue a <code>GET</code> request which refreshes the entire page.</p>
<p>The <code>Link</code> component in React fakes a <code>GET</code> request. The JS actually intercepts the click and does client-side routing instead. It receives a <code>to</code> attribute instead of an <code>href</code>.</p>
<p>First we need to import it from <code>react-router-dom</code>. Typically we import <code>Route</code>, <code>Switch</code>, and <code>Link</code> in one line:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb90-1"><a href="#cb90-1"></a><span class="im">import</span> { Route<span class="op">,</span> Switch<span class="op">,</span> Link } <span class="im">from</span> <span class="st">'react-router-dom'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then we use the <code>Link</code> components:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb91-1"><a href="#cb91-1"></a><span class="kw">class</span> App <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb91-2"><a href="#cb91-2"></a>    <span class="fu">render</span>() {</span>
<span id="cb91-3"><a href="#cb91-3"></a>        <span class="cf">return</span>(</span>
<span id="cb91-4"><a href="#cb91-4"></a>            <span class="kw">&lt;div</span> <span class="ot">className</span><span class="op">=</span><span class="st">"App"</span><span class="kw">&gt;</span></span>
<span id="cb91-5"><a href="#cb91-5"></a>                <span class="kw">&lt;nav</span> <span class="ot">className</span><span class="op">=</span><span class="st">"App-nav"</span><span class="kw">&gt;</span></span>
<span id="cb91-6"><a href="#cb91-6"></a>                    <span class="fu">&lt;Link</span> <span class="ot">to</span><span class="op">=</span><span class="st">"/"</span><span class="fu">&gt;</span>Home<span class="fu">&lt;/Link&gt;</span></span>
<span id="cb91-7"><a href="#cb91-7"></a>                    <span class="fu">&lt;Link</span> <span class="ot">to</span><span class="op">=</span><span class="st">"/Contact"</span><span class="fu">&gt;</span>Contact<span class="fu">&lt;/Link&gt;</span></span>
<span id="cb91-8"><a href="#cb91-8"></a>                    <span class="fu">&lt;Link</span> <span class="ot">to</span><span class="op">=</span><span class="st">"/About"</span><span class="fu">&gt;</span>About<span class="fu">&lt;/Link&gt;</span></span>
<span id="cb91-9"><a href="#cb91-9"></a>                <span class="kw">&lt;/nav&gt;</span></span>
<span id="cb91-10"><a href="#cb91-10"></a>                <span class="fu">&lt;Switch&gt;</span></span>
<span id="cb91-11"><a href="#cb91-11"></a>                    <span class="fu">&lt;Route</span> <span class="ot">exact</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/"</span> <span class="ot">component</span><span class="op">=</span><span class="va">{</span>Home<span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb91-12"><a href="#cb91-12"></a>                    <span class="fu">&lt;Route</span> <span class="ot">exact</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/Contact"</span> <span class="ot">component</span><span class="op">=</span><span class="va">{</span>Contact<span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb91-13"><a href="#cb91-13"></a>                    <span class="fu">&lt;Route</span> <span class="ot">exact</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/About"</span> <span class="ot">component</span><span class="op">=</span><span class="va">{</span>About<span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb91-14"><a href="#cb91-14"></a>                <span class="fu">&lt;/Switch&gt;</span></span>
<span id="cb91-15"><a href="#cb91-15"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb91-16"><a href="#cb91-16"></a>        )</span>
<span id="cb91-17"><a href="#cb91-17"></a>    }</span>
<span id="cb91-18"><a href="#cb91-18"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="the-navlink-component" class="level2">
<h2 class="anchored" data-anchor-id="the-navlink-component">The NavLink Component</h2>
<p>Very similar to the <code>Link</code> component, but with one distinction: it accepts an attribute <code>activeClassName</code> that accepts as its value a class name we define in CSS, say for instance <code>active-link</code>, that gets applied to the <code>NavLink</code> component the user has navigated to. We also have to pass in the attribute <code>exact</code> because the <code>react-router-dom</code> library tries to match the path value of <code>to</code> inclusively (same issue as before).</p>
<p><em>For example:</em></p>
<div class="sourceCode" id="cb92"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb92-1"><a href="#cb92-1"></a><span class="fu">.active-link</span> { <span class="kw">border-bottom</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">black</span><span class="op">;</span> }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb93"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb93-1"><a href="#cb93-1"></a><span class="kw">class</span> App <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb93-2"><a href="#cb93-2"></a>    <span class="fu">render</span>() {</span>
<span id="cb93-3"><a href="#cb93-3"></a>        <span class="cf">return</span>(</span>
<span id="cb93-4"><a href="#cb93-4"></a>            <span class="kw">&lt;div</span> <span class="ot">className</span><span class="op">=</span><span class="st">"App"</span><span class="kw">&gt;</span></span>
<span id="cb93-5"><a href="#cb93-5"></a>                <span class="kw">&lt;nav</span> <span class="ot">className</span><span class="op">=</span><span class="st">"App-nav"</span><span class="kw">&gt;</span></span>
<span id="cb93-6"><a href="#cb93-6"></a>                    <span class="fu">&lt;NavLink</span> <span class="ot">exact</span> <span class="ot">activeClassName</span><span class="op">=</span><span class="st">"active-link"</span> <span class="ot">to</span><span class="op">=</span><span class="st">"/"</span><span class="fu">&gt;</span></span>
<span id="cb93-7"><a href="#cb93-7"></a>                        Home</span>
<span id="cb93-8"><a href="#cb93-8"></a>                    <span class="fu">&lt;/NavLink&gt;</span></span>
<span id="cb93-9"><a href="#cb93-9"></a>                    <span class="fu">&lt;NavLink</span> <span class="ot">exact</span> <span class="ot">activeClassName</span><span class="op">=</span><span class="st">"active-link"</span> <span class="ot">to</span><span class="op">=</span><span class="st">"/Contact"</span><span class="fu">&gt;</span></span>
<span id="cb93-10"><a href="#cb93-10"></a>                        Contact</span>
<span id="cb93-11"><a href="#cb93-11"></a>                    <span class="fu">&lt;/NavLink&gt;</span></span>
<span id="cb93-12"><a href="#cb93-12"></a>                    <span class="fu">&lt;NavLink</span> <span class="ot">exact</span> <span class="ot">activeClassName</span><span class="op">=</span><span class="st">"active-link"</span> <span class="ot">to</span><span class="op">=</span><span class="st">"/About"</span><span class="fu">&gt;</span></span>
<span id="cb93-13"><a href="#cb93-13"></a>                        About</span>
<span id="cb93-14"><a href="#cb93-14"></a>                    <span class="fu">&lt;/NavLink&gt;</span></span>
<span id="cb93-15"><a href="#cb93-15"></a>                <span class="kw">&lt;/nav&gt;</span></span>
<span id="cb93-16"><a href="#cb93-16"></a>                <span class="fu">&lt;Switch&gt;</span></span>
<span id="cb93-17"><a href="#cb93-17"></a>                    <span class="fu">&lt;Route</span> <span class="ot">exact</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/"</span> <span class="ot">component</span><span class="op">=</span><span class="va">{</span>Home<span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb93-18"><a href="#cb93-18"></a>                    <span class="fu">&lt;Route</span> <span class="ot">exact</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/Contact"</span> <span class="ot">component</span><span class="op">=</span><span class="va">{</span>Contact<span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb93-19"><a href="#cb93-19"></a>                    <span class="fu">&lt;Route</span> <span class="ot">exact</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/About"</span> <span class="ot">component</span><span class="op">=</span><span class="va">{</span>About<span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb93-20"><a href="#cb93-20"></a>                <span class="fu">&lt;/Switch&gt;</span></span>
<span id="cb93-21"><a href="#cb93-21"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb93-22"><a href="#cb93-22"></a>        )</span>
<span id="cb93-23"><a href="#cb93-23"></a>    }</span>
<span id="cb93-24"><a href="#cb93-24"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="render-prop-vs-component-prop-in-route" class="level2">
<h2 class="anchored" data-anchor-id="render-prop-vs-component-prop-in-route">Render Prop vs Component Prop in Route</h2>
<p>Note that the <code>Route</code> component accepts as attribute (or prop) <code>component</code>. What if we want to pass props to this component? We can call a function from the outer lexical environment that returns the component with a prop. for instance:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb94-1"><a href="#cb94-1"></a><span class="fu">&lt;Route</span> <span class="ot">exact</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/Dog"</span> <span class="ot">component</span><span class="op">=</span><span class="va">{</span> () <span class="kw">=&gt; </span><span class="fu">&lt;Dog</span> <span class="ot">name</span><span class="op">=</span><span class="st">"Rex"</span> <span class="fu">/&gt;</span> <span class="va">}</span> <span class="fu">/&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This works, but now If we navigate to <code>/Dog</code> repeatedly, a new <code>Dog</code> component is made each time (i.e.&nbsp;the Dog component re-instantiates each time). We can check this by logging the calls to the lifecycle methods. We will see that each time <code>componentDidMount</code> and <code>componentWillUnmount</code> are called. This may be bad… We want the components to re-instantiate only when we navigate out of them and then into them again, not when we keep navigating into them repeatedly.</p>
<p>We can fix this issue by passing in a <code>render</code> attribute instead:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb95-1"><a href="#cb95-1"></a><span class="fu">&lt;Route</span> <span class="ot">exact</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/Dog"</span> <span class="ot">r</span><span class="op">=</span><span class="va">{</span> () <span class="kw">=&gt; </span><span class="fu">&lt;Dog</span> <span class="ot">name</span><span class="op">=</span><span class="st">"Rex"</span> <span class="fu">/&gt;</span> <span class="va">}</span> <span class="fu">/&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="react-router-patterns" class="level1">
<h1>React Router Patterns</h1>
<section id="url-parameters" class="level2">
<h2 class="anchored" data-anchor-id="url-parameters">URL Parameters</h2>
<p>Suppose we have several URL paths like <code>/food/kale</code>, <code>/food/spinach</code>, <code>/food/pineapple</code>, etc. We could make a separate <code>Route</code> component for each of these, but there would be a lot of code repetition…</p>
<p>Instead, we can use URL parameters. These are preceded by a colon <code>:</code> like <code>path="/food/:name"</code>. Once the user navigates to the URL, the <code>component</code> or <code>render</code> attributes receive a <code>routeProps</code> object in their callback function which contains the URL parameter that we can pass to the child component about to be rendered. From there, the child component takes over and renders the correct child based on the prop it receives.</p>
<p>Let’s look at the <code>routeProps</code> object when the user navigates to <code>/food/pineapple</code>, for example:</p>
<pre><code>routeProps : {
    history: {...},
    location: {...},
-&gt;  match: {...}
}</code></pre>
<pre><code>match : {
    isExact: true,
-&gt;  params: {...},
    path: "/food/:name",
    url: "/food/tacos"
}</code></pre>
<pre><code>params : {
-&gt;  name: "pineapple"
}</code></pre>
<p>Let’s look at how to work with <code>routeProps</code>:</p>
<p><strong>Option 1: Passing the parameter</strong></p>
<p><code>App.js</code></p>
<div class="sourceCode" id="cb99"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb99-1"><a href="#cb99-1"></a><span class="fu">&lt;Route</span> <span class="ot">exact</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/food/:name"</span> <span class="ot">render</span><span class="op">=</span><span class="va">{</span> (routeProps) <span class="kw">=&gt; </span><span class="fu">&lt;Food</span> <span class="ot">name</span><span class="op">=</span><span class="va">{</span>routeProps<span class="op">.</span><span class="at">match</span><span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">name</span><span class="va">}</span> <span class="fu">/&gt;</span><span class="va">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>Food.js</code></p>
<div class="sourceCode" id="cb100"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb100-1"><a href="#cb100-1"></a><span class="kw">&lt;p&gt;</span>I love to eat <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">name</span><span class="va">}</span><span class="kw">&lt;/p&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Option 2: Passing the whole destructured <code>routeProps</code> object:</strong></p>
<p><code>Parent.js</code></p>
<div class="sourceCode" id="cb101"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb101-1"><a href="#cb101-1"></a><span class="fu">&lt;Route</span> <span class="ot">exact</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/food/:name"</span> <span class="ot">render</span><span class="op">=</span><span class="va">{</span> (routeProps) <span class="kw">=&gt; </span><span class="fu">&lt;Food</span> <span class="va">{</span><span class="op">...</span>routeProps<span class="va">}</span> <span class="fu">/&gt;</span><span class="va">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> The spread operator syntax here expands (or destructures) the object into key/value pairs which are passed as separate props to the child component.</p>
</blockquote>
<p><code>Food.js</code></p>
<div class="sourceCode" id="cb102"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb102-1"><a href="#cb102-1"></a><span class="kw">const</span> name <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">match</span><span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">name</span><span class="op">;</span></span>
<span id="cb102-2"><a href="#cb102-2"></a><span class="kw">&lt;p&gt;</span>I love to eat <span class="va">{</span>name<span class="va">}</span><span class="kw">&lt;/p&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> If we use component attribute instead of render attribute, the URL parameters are passed in by default. So we simply write <code>&lt;Route exact path="/food/:name" component={Food} /&gt;}</code> and Food has access to <code>history</code>, <code>location</code>, and <code>match</code> as props automatically.</p>
</blockquote>
</section>
<section id="multiple-url-parameters" class="level2">
<h2 class="anchored" data-anchor-id="multiple-url-parameters">Multiple URL Parameters</h2>
<p>What if we have a component <code>Meal</code> which is defined by a food and a drink item. We want to route to a URL like <code>/food/:foodName/drink/:drinkName</code>.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb103-1"><a href="#cb103-1"></a><span class="fu">&lt;Route</span> <span class="ot">exact</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/food/:foodName/drink/:drinkName"</span> <span class="ot">component</span><span class="op">=</span><span class="va">{</span>Meal<span class="va">}</span> <span class="fu">/&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now within Meal, we get the URM parameters by <code>this.props.match.params.foodName</code> and <code>this.props.match.params.drinkName</code>.</p>
</section>
<section id="including-a-404" class="level2">
<h2 class="anchored" data-anchor-id="including-a-404">Including a 404</h2>
<p>If the user navigates to a URL that doesn’t match any <code>Routes</code>, we want to display a <code>404 Error</code> page. The simplest way to achieve this is to put a <code>Route</code> without a <code>path</code> attribute at the end of the <code>Switch</code> that renders a <code>NotFound</code> component (or an HTML tag displaying an error), like so:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb104-1"><a href="#cb104-1"></a><span class="kw">class</span> Routes <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb104-2"><a href="#cb104-2"></a>    <span class="fu">render</span>() {</span>
<span id="cb104-3"><a href="#cb104-3"></a>        <span class="cf">return</span> (</span>
<span id="cb104-4"><a href="#cb104-4"></a>            <span class="fu">&lt;Switch&gt;</span></span>
<span id="cb104-5"><a href="#cb104-5"></a>                <span class="fu">&lt;Route</span> <span class="ot">exact</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/"</span> <span class="ot">render</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt; </span><span class="fu">&lt;Home</span> <span class="fu">/&gt;</span><span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb104-6"><a href="#cb104-6"></a>                <span class="fu">&lt;Route</span> <span class="ot">exact</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/Contact"</span> <span class="ot">render</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt; </span><span class="fu">&lt;Contact</span> <span class="fu">/&gt;</span><span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb104-7"><a href="#cb104-7"></a>                <span class="fu">&lt;Route</span> <span class="ot">exact</span> <span class="ot">path</span><span class="op">=</span><span class="st">"/About"</span> <span class="ot">render</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt; </span><span class="fu">&lt;About</span> <span class="fu">/&gt;</span><span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb104-8"><a href="#cb104-8"></a>                <span class="fu">&lt;Route</span> <span class="ot">render</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt; </span><span class="fu">&lt;NotFound</span> <span class="fu">/&gt;</span><span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb104-9"><a href="#cb104-9"></a>            <span class="fu">&lt;/Switch&gt;</span></span>
<span id="cb104-10"><a href="#cb104-10"></a>        )<span class="op">;</span></span>
<span id="cb104-11"><a href="#cb104-11"></a>    }</span>
<span id="cb104-12"><a href="#cb104-12"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> This is a situation in which we have to use a <code>Switch</code> otherwise the empty <code>Route</code> path would match all the URLs. With a <code>Switch</code>, the empty <code>Route</code> is only reached if the URL doesn’t match any of the previous <code>Routes</code>.</p>
</blockquote>
</section>
<section id="simple-search-form" class="level2">
<h2 class="anchored" data-anchor-id="simple-search-form">Simple Search Form</h2>
<p>Search functionality is a combination of forms and routing.</p>
<p>We use a <code>Link</code> component instead of a button for the search form. We keep track of a state (<code>query</code>) in the search component and we pass that as part of the URL string into the <code>Link</code> component.</p>
<p><code>FoodSearch.js</code></p>
<div class="sourceCode" id="cb105"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb105-1"><a href="#cb105-1"></a><span class="kw">class</span> FoodSearch <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb105-2"><a href="#cb105-2"></a>    </span>
<span id="cb105-3"><a href="#cb105-3"></a>    <span class="fu">constructor</span>(props) {</span>
<span id="cb105-4"><a href="#cb105-4"></a>        <span class="kw">super</span>(props)<span class="op">;</span></span>
<span id="cb105-5"><a href="#cb105-5"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">props</span> <span class="op">=</span> { <span class="dt">query</span><span class="op">:</span> <span class="st">""</span> }<span class="op">;</span></span>
<span id="cb105-6"><a href="#cb105-6"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">handleChange</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">handleChange</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>)<span class="op">;</span></span>
<span id="cb105-7"><a href="#cb105-7"></a>    }</span>
<span id="cb105-8"><a href="#cb105-8"></a>    </span>
<span id="cb105-9"><a href="#cb105-9"></a>    <span class="fu">handleChange</span>(evt) {</span>
<span id="cb105-10"><a href="#cb105-10"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>({ <span class="dt">query</span><span class="op">:</span> evt<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span> })<span class="op">;</span></span>
<span id="cb105-11"><a href="#cb105-11"></a>    }</span>
<span id="cb105-12"><a href="#cb105-12"></a>    </span>
<span id="cb105-13"><a href="#cb105-13"></a>    <span class="fu">render</span>() {</span>
<span id="cb105-14"><a href="#cb105-14"></a>        <span class="cf">return</span>(</span>
<span id="cb105-15"><a href="#cb105-15"></a>            <span class="kw">&lt;div&gt;</span></span>
<span id="cb105-16"><a href="#cb105-16"></a>                <span class="kw">&lt;input</span> </span>
<span id="cb105-17"><a href="#cb105-17"></a>                    <span class="ot">type</span><span class="op">=</span><span class="st">"text"</span> </span>
<span id="cb105-18"><a href="#cb105-18"></a>                    <span class="ot">placeholder</span><span class="op">=</span><span class="st">"search for a food"</span> </span>
<span id="cb105-19"><a href="#cb105-19"></a>                    <span class="ot">value</span><span class="op">=</span><span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">query</span><span class="va">}</span></span>
<span id="cb105-20"><a href="#cb105-20"></a>                    <span class="ot">onChange</span><span class="op">=</span><span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">handleChange</span><span class="va">}</span></span>
<span id="cb105-21"><a href="#cb105-21"></a>                <span class="kw">/&gt;</span></span>
<span id="cb105-22"><a href="#cb105-22"></a>                <span class="fu">&lt;Link</span> <span class="ot">to</span><span class="op">=</span><span class="va">{</span><span class="vs">`/food/</span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">query</span><span class="sc">}</span><span class="vs">`</span><span class="va">}</span><span class="fu">&gt;</span>Search<span class="fu">&lt;/Link&gt;</span></span>
<span id="cb105-23"><a href="#cb105-23"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb105-24"><a href="#cb105-24"></a>        )<span class="op">;</span></span>
<span id="cb105-25"><a href="#cb105-25"></a>    }</span>
<span id="cb105-26"><a href="#cb105-26"></a>    </span>
<span id="cb105-27"><a href="#cb105-27"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>App.js</code></p>
<div class="sourceCode" id="cb106"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb106-1"><a href="#cb106-1"></a><span class="im">import</span> FoodSearch <span class="im">from</span> <span class="st">'./FoodSearch'</span><span class="op">;</span></span>
<span id="cb106-2"><a href="#cb106-2"></a></span>
<span id="cb106-3"><a href="#cb106-3"></a><span class="kw">class</span> App <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb106-4"><a href="#cb106-4"></a>    </span>
<span id="cb106-5"><a href="#cb106-5"></a>    <span class="fu">render</span>() {</span>
<span id="cb106-6"><a href="#cb106-6"></a>        <span class="cf">return</span>(</span>
<span id="cb106-7"><a href="#cb106-7"></a>            <span class="fu">&lt;Switch&gt;</span></span>
<span id="cb106-8"><a href="#cb106-8"></a>                <span class="fu">&lt;Route</span></span>
<span id="cb106-9"><a href="#cb106-9"></a>                    <span class="ot">exact</span></span>
<span id="cb106-10"><a href="#cb106-10"></a>                    <span class="ot">path</span><span class="op">=</span><span class="st">"/food/:name"</span></span>
<span id="cb106-11"><a href="#cb106-11"></a>                    <span class="ot">render</span><span class="op">=</span><span class="va">{</span>routeProps <span class="kw">=&gt; </span><span class="fu">&lt;Food</span> <span class="va">{</span><span class="op">...</span>routeProps<span class="va">}</span> <span class="fu">/&gt;</span><span class="va">}</span></span>
<span id="cb106-12"><a href="#cb106-12"></a>                <span class="fu">/&gt;</span></span>
<span id="cb106-13"><a href="#cb106-13"></a>                <span class="fu">&lt;Route</span></span>
<span id="cb106-14"><a href="#cb106-14"></a>                    <span class="ot">exact</span></span>
<span id="cb106-15"><a href="#cb106-15"></a>                    <span class="ot">path</span><span class="op">=</span><span class="st">"/"</span></span>
<span id="cb106-16"><a href="#cb106-16"></a>                    <span class="ot">render</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt; </span><span class="fu">&lt;FoodSearch</span> <span class="fu">/&gt;</span><span class="va">}</span></span>
<span id="cb106-17"><a href="#cb106-17"></a>                <span class="fu">/&gt;</span></span>
<span id="cb106-18"><a href="#cb106-18"></a>            <span class="fu">&lt;/Switch&gt;</span></span>
<span id="cb106-19"><a href="#cb106-19"></a>        )<span class="op">;</span></span>
<span id="cb106-20"><a href="#cb106-20"></a>    }</span>
<span id="cb106-21"><a href="#cb106-21"></a>    </span>
<span id="cb106-22"><a href="#cb106-22"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We will see below how to use a <code>button</code> tag with a <code>Redirect</code> component in order to avoid using a <code>Link</code> component in our forms.</p>
</section>
<section id="the-redirect-component" class="level2">
<h2 class="anchored" data-anchor-id="the-redirect-component">The Redirect Component</h2>
<p>This is typically used to redirect the request to another component (typically back to home <code>"/"</code>) if the URL parameters are bad. This is done within the child component itself.</p>
<p><em>For example:</em> Suppose we want to redirect the request back to the home component if the URL prop, which should be a food item, contains a number.</p>
<p>First we should import <code>Redirect</code> from <code>react-router-dom</code>.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb107-1"><a href="#cb107-1"></a><span class="im">import</span> {Redirect} <span class="im">from</span> <span class="st">'react-router-dom'</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then we use a Redirect component inside the child component the user attempted to direct to.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb108-1"><a href="#cb108-1"></a><span class="kw">class</span> Food <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span>{</span>
<span id="cb108-2"><a href="#cb108-2"></a>    </span>
<span id="cb108-3"><a href="#cb108-3"></a>    <span class="fu">render</span>() {</span>
<span id="cb108-4"><a href="#cb108-4"></a>        <span class="kw">const</span> name <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">match</span><span class="op">.</span><span class="at">params</span><span class="op">.</span><span class="at">name</span><span class="op">;</span></span>
<span id="cb108-5"><a href="#cb108-5"></a>        <span class="cf">return</span> (</span>
<span id="cb108-6"><a href="#cb108-6"></a>            <span class="kw">&lt;div</span> <span class="ot">className</span><span class="op">=</span><span class="st">"Food"</span><span class="kw">&gt;</span></span>
<span id="cb108-7"><a href="#cb108-7"></a>                <span class="va">{</span><span class="ss">/</span><span class="sc">\d</span><span class="ss">/</span><span class="op">.</span><span class="fu">test</span>(name) <span class="op">?</span> </span>
<span id="cb108-8"><a href="#cb108-8"></a>                    <span class="fu">&lt;Redirect</span> <span class="ot">to</span><span class="op">=</span><span class="st">"/"</span><span class="fu">/&gt;</span> <span class="op">:</span></span>
<span id="cb108-9"><a href="#cb108-9"></a>                    <span class="kw">&lt;p&gt;</span>I love to eat <span class="va">{</span>name<span class="va">}</span><span class="kw">&lt;/p&gt;</span></span>
<span id="cb108-10"><a href="#cb108-10"></a>                <span class="va">}</span></span>
<span id="cb108-11"><a href="#cb108-11"></a>            <span class="kw">&lt;/div&gt;</span></span>
<span id="cb108-12"><a href="#cb108-12"></a>        )<span class="op">;</span></span>
<span id="cb108-13"><a href="#cb108-13"></a>    }</span>
<span id="cb108-14"><a href="#cb108-14"></a>    </span>
<span id="cb108-15"><a href="#cb108-15"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note 1:</em> <code>/\d/</code> is the Regular Expression for checking if there are any digits in a string.</p>
</blockquote>
<blockquote class="blockquote">
<p><em>Note 2:</em> This is a contrived example because it would be better to intercept a bad URL parameter in the <code>handleChange()</code> method of the form and preventing a redirect in the first place…</p>
</blockquote>
<p>There is another way to redirect within an event handler, such as <code>handleSubmit()</code>, which doesn’t use the <code>Redirect</code> component. This is achieved by calling <code>push()</code> on the <code>history</code> prop in <code>routeProps</code>. This also allows us to use a <code>button</code> tag instead of a <code>Link</code> component in our forms.</p>
</section>
<section id="pushing-onto-the-history-prop" class="level2">
<h2 class="anchored" data-anchor-id="pushing-onto-the-history-prop">Pushing onto the History Prop</h2>
<p>We can add a <code>button</code> to our form that has an <code>onClick</code> event which calls a <code>handleClick()</code> handler that redirects the user to a new URL. The redirection is done by pushing onto the <code>history</code> prop (a linked list) in <code>routeProps</code>. When we push onto it, React Router automatically redirects to the head of the linked list that is <code>history</code>.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb109-1"><a href="#cb109-1"></a><span class="co">/* ... rest of component ... */</span></span>
<span id="cb109-2"><a href="#cb109-2"></a><span class="fu">handleClick</span>(evt) {</span>
<span id="cb109-3"><a href="#cb109-3"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">history</span><span class="op">.</span><span class="fu">push</span>(<span class="vs">`/food/</span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">query</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb109-4"><a href="#cb109-4"></a>} </span>
<span id="cb109-5"><a href="#cb109-5"></a><span class="co">/* ... rest of component ... */</span></span>
<span id="cb109-6"><a href="#cb109-6"></a><span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">handleClick</span><span class="va">}</span><span class="kw">&gt;</span>Search<span class="kw">&lt;/button&gt;</span></span>
<span id="cb109-7"><a href="#cb109-7"></a><span class="co">/* ... rest of component ... */</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The advantage of using a <code>button</code> over a <code>Link</code> component is that a button’s <code>handleClick()</code> event can do much more than just redirect to a new URL. It can save to a database, it can update the state, it can execute logic, and only then redirect.</p>
</section>
<section id="when-to-use-redirect-vs-history-push" class="level2">
<h2 class="anchored" data-anchor-id="when-to-use-redirect-vs-history-push">When to Use Redirect vs History Push</h2>
<p>“Pushing into <code>history</code>” as a way to redirect the user has an inherent problem. If we use it to redirect the user from a bad URL (say a URL that contains a numeric parameter like <code>/food/7up</code>), the back button will not work. Clicking back will keep redirecting the user to the same error page. This is because the bad URL is pushed into <code>history</code>, so going back one step, React Router tries to route to <code>/food/7up</code> again and the error path is pushed into <code>history</code> once again.</p>
<p>The <code>Redirect</code> component doesn’t behave this way. The bad URL is not pushed into history, so clicking the back button behaves as it should.</p>
<p>This is why it’s recommended to use the “pushing into <code>history</code>” method for successful routing (say, writing to a database, or updating the state, and redirecting to some path as a result of the user’s action) and the <code>Redirect</code> component for unsuccessful routing purposes.</p>
</section>
<section id="withrouter-higher-order-component" class="level2">
<h2 class="anchored" data-anchor-id="withrouter-higher-order-component">withRouter Higher Order Component</h2>
<p>If we currently try to route from a component that’s not rendered from within a Router component, we will run into a problem.</p>
<p><em>For example:</em> Suppose we have a Navbar component that’s always on our page, so it’s not something that’s enclosed in a Route component. Now suppose we would like to make a login button in that Navbar that routes the user to their profile page.</p>
<p><code>Navbar.js</code></p>
<div class="sourceCode" id="cb110"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb110-1"><a href="#cb110-1"></a><span class="kw">class</span> Navbar <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {  </span>
<span id="cb110-2"><a href="#cb110-2"></a>    <span class="fu">constructor</span>(props) {</span>
<span id="cb110-3"><a href="#cb110-3"></a>        <span class="kw">super</span>(props)<span class="op">;</span></span>
<span id="cb110-4"><a href="#cb110-4"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">handleLogin</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">handleLogin</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>)<span class="op">;</span></span>
<span id="cb110-5"><a href="#cb110-5"></a>    }</span>
<span id="cb110-6"><a href="#cb110-6"></a>    </span>
<span id="cb110-7"><a href="#cb110-7"></a>    <span class="fu">handleLogin</span>(evt) {</span>
<span id="cb110-8"><a href="#cb110-8"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">history</span><span class="op">.</span><span class="fu">push</span>(<span class="vs">`user/</span><span class="sc">${</span><span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">username</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span> <span class="co">/* Redirecting */</span></span>
<span id="cb110-9"><a href="#cb110-9"></a>    }</span>
<span id="cb110-10"><a href="#cb110-10"></a>    </span>
<span id="cb110-11"><a href="#cb110-11"></a>    <span class="fu">render</span>() {</span>
<span id="cb110-12"><a href="#cb110-12"></a>        <span class="kw">&lt;div</span> <span class="ot">className</span><span class="op">=</span><span class="st">"Navbar"</span><span class="kw">&gt;</span></span>
<span id="cb110-13"><a href="#cb110-13"></a>            <span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">handleLogin</span><span class="va">}</span><span class="kw">&gt;</span>Log In<span class="kw">&lt;/button&gt;</span></span>
<span id="cb110-14"><a href="#cb110-14"></a>        <span class="kw">&lt;/div&gt;</span></span>
<span id="cb110-15"><a href="#cb110-15"></a>    }</span>
<span id="cb110-16"><a href="#cb110-16"></a>}</span>
<span id="cb110-17"><a href="#cb110-17"></a></span>
<span id="cb110-18"><a href="#cb110-18"></a><span class="im">export</span> <span class="im">default</span> Navbar<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>App.js</code></p>
<div class="sourceCode" id="cb111"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb111-1"><a href="#cb111-1"></a><span class="kw">class</span> App <span class="kw">extends</span> React<span class="op">.</span><span class="at">Component</span> {</span>
<span id="cb111-2"><a href="#cb111-2"></a>    <span class="fu">render</span>() {</span>
<span id="cb111-3"><a href="#cb111-3"></a>        <span class="cf">return</span>(</span>
<span id="cb111-4"><a href="#cb111-4"></a>            <span class="kw">&lt;div</span> <span class="ot">className</span><span class="op">=</span><span class="st">"App"</span><span class="kw">&gt;</span></span>
<span id="cb111-5"><a href="#cb111-5"></a>            <span class="fu">&lt;Navbar</span> <span class="fu">/&gt;</span></span>
<span id="cb111-6"><a href="#cb111-6"></a>            <span class="fu">&lt;Switch&gt;</span></span>
<span id="cb111-7"><a href="#cb111-7"></a>                <span class="va">{</span><span class="co">/*... all the components with routes ... */</span></span>
<span id="cb111-8"><a href="#cb111-8"></a>            <span class="op">&lt;</span>/Switch&gt;</span>
<span id="cb111-9"><a href="#cb111-9"></a>            <span class="fu">&lt;/div&gt;</span></span>
<span id="cb111-10"><a href="#cb111-10"></a>        );</span>
<span id="cb111-11"><a href="#cb111-11"></a>    }</span>
<span id="cb111-12"><a href="#cb111-12"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This will throw an error <code>Cannot read property 'push' of undefined</code> because Navbar is not part of the components managed by the React Router. Therefore, it doesn’t get the <code>history</code> prop.</p>
<p>The fix is to modify the export statement by wrapping the component like so:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb112-1"><a href="#cb112-1"></a><span class="im">export</span> <span class="im">default</span> withRouter{Navbar}<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="implementing-a-back-button" class="level2">
<h2 class="anchored" data-anchor-id="implementing-a-back-button">Implementing a Back Button</h2>
<p>There is a <code>goBack()</code> method in the <code>history</code> prop.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb113-1"><a href="#cb113-1"></a><span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">history</span><span class="op">.</span><span class="at">goBack</span><span class="va">}</span><span class="kw">&gt;</span>Go back<span class="kw">&lt;/button&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="route-transitions" class="level2">
<h2 class="anchored" data-anchor-id="route-transitions">Route Transitions</h2>
<p>Suppose we’d like to animate our route transitions, say with a fade in-and-out effect.</p>
<p><strong>Step 1:</strong> Download and import a transition library such as <a href="https://www.npmjs.com/package/react-transition-group">React-Transition-Group</a>.</p>
<pre><code>npm install --save react-transition-group</code></pre>
<div class="sourceCode" id="cb115"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb115-1"><a href="#cb115-1"></a><span class="im">import</span> {CSSTransition<span class="op">,</span> TransitionGroup} <span class="im">from</span> <span class="st">'react-transition-group'</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> These two imported components expose transition stages by applying classes of <code>...-enter</code>, <code>...-enter-active</code>, <code>...-exit</code>, <code>...-exit-active</code>, etc. to the component. We then style these classes in the CSS.</p>
</blockquote>
<p><strong>Step 2:</strong> Wrap the routes.</p>
<p>In case of components, we’d just wrap the component like so:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb116-1"><a href="#cb116-1"></a><span class="fu">&lt;TransitionGroup&gt;</span></span>
<span id="cb116-2"><a href="#cb116-2"></a>  <span class="fu">&lt;CSSTransition</span> <span class="ot">classNames</span><span class="op">=</span><span class="st">"fade"</span> <span class="ot">timeout</span><span class="op">=</span><span class="va">{</span><span class="dv">300</span><span class="va">}</span><span class="fu">&gt;</span></span>
<span id="cb116-3"><a href="#cb116-3"></a>      <span class="fu">&lt;MyComponent</span> <span class="fu">/&gt;</span></span>
<span id="cb116-4"><a href="#cb116-4"></a>  <span class="fu">&lt;/CSSTransition&gt;</span></span>
<span id="cb116-5"><a href="#cb116-5"></a><span class="fu">&lt;/TransitionGroup&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note 1:</em> The <code>TransitionGroup</code> tag renders as an empty div, so it’s like a wrapper/container we can style normally.</p>
</blockquote>
<blockquote class="blockquote">
<p><em>Note 2:</em> Notice the <code>classNames</code> attribute is pluralized. This isn’t the JSX’s built-in <code>className</code> attribute, it comes from the <em>React-Transition-Group</em> library and may accept multiple class names.</p>
</blockquote>
<p>And then apply styling:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode numberSource css number-lines code-with-copy"><code class="sourceCode css"><span id="cb117-1"><a href="#cb117-1"></a><span class="co">/* Fading component out */</span></span>
<span id="cb117-2"><a href="#cb117-2"></a><span class="fu">.fade-exit</span><span class="in">:</span> {</span>
<span id="cb117-3"><a href="#cb117-3"></a>    <span class="kw">opacity</span><span class="ch">:</span> <span class="st">"1"</span></span>
<span id="cb117-4"><a href="#cb117-4"></a>}<span class="op">,</span></span>
<span id="cb117-5"><a href="#cb117-5"></a><span class="fu">.fade-exit-active</span><span class="in">:</span> {</span>
<span id="cb117-6"><a href="#cb117-6"></a>    <span class="kw">opacity</span><span class="ch">:</span> <span class="st">"0"</span><span class="op">,</span></span>
<span id="cb117-7"><a href="#cb117-7"></a>    <span class="dv">transition</span>: <span class="st">"opacity 300ms ease-out"</span></span>
<span id="cb117-8"><a href="#cb117-8"></a>}<span class="op">,</span></span>
<span id="cb117-9"><a href="#cb117-9"></a></span>
<span id="cb117-10"><a href="#cb117-10"></a><span class="co">/* Optional .fade-enter and .fade.enter.active styles if another component needs to be faded in */</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note:</em> Make sure the <code>transition</code> time in CSS and <code>timeout</code> in <code>CSSTransition</code> are set to the same number of milliseconds. Otherwise links may appear to not work.</p>
</blockquote>
<p>In case of routes, there’s a very unintuitive procedure. It goes as follows:</p>
<ol type="1">
<li><p>Encapsulate all the <code>Routes</code>, together with their <code>Switch</code> component, into another <code>Route</code> component with its <code>path</code> property empty (i.e.&nbsp;it will match any URL).</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb118-1"><a href="#cb118-1"></a><span class="fu">&lt;Route</span> <span class="ot">render</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span></span>
<span id="cb118-2"><a href="#cb118-2"></a> <span class="fu">&lt;Switch&gt;</span></span>
<span id="cb118-3"><a href="#cb118-3"></a>        <span class="fu">&lt;Route</span></span>
<span id="cb118-4"><a href="#cb118-4"></a>            <span class="ot">exact</span></span>
<span id="cb118-5"><a href="#cb118-5"></a>            <span class="ot">path</span><span class="op">=</span><span class="st">"/food/:name"</span></span>
<span id="cb118-6"><a href="#cb118-6"></a>            <span class="ot">render</span><span class="op">=</span><span class="va">{</span>routeProps <span class="kw">=&gt; </span><span class="fu">&lt;Food</span> <span class="va">{</span><span class="op">...</span>routeProps<span class="va">}</span> <span class="fu">/&gt;</span><span class="va">}</span></span>
<span id="cb118-7"><a href="#cb118-7"></a>        <span class="fu">/&gt;</span></span>
<span id="cb118-8"><a href="#cb118-8"></a>        <span class="fu">&lt;Route</span></span>
<span id="cb118-9"><a href="#cb118-9"></a>            <span class="ot">exact</span></span>
<span id="cb118-10"><a href="#cb118-10"></a>            <span class="ot">path</span><span class="op">=</span><span class="st">"/"</span></span>
<span id="cb118-11"><a href="#cb118-11"></a>            <span class="ot">render</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt; </span><span class="fu">&lt;FoodSearch</span> <span class="fu">/&gt;</span><span class="va">}</span></span>
<span id="cb118-12"><a href="#cb118-12"></a>        <span class="fu">/&gt;</span></span>
<span id="cb118-13"><a href="#cb118-13"></a> <span class="fu">&lt;/Switch&gt;</span></span>
<span id="cb118-14"><a href="#cb118-14"></a><span class="va">}</span><span class="fu">/&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Wrap the <code>Switch</code> and its contents with a <code>TransitionGroup</code> and <code>CSSTransition</code>.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb119-1"><a href="#cb119-1"></a><span class="fu">&lt;Route</span> <span class="ot">render</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span></span>
<span id="cb119-2"><a href="#cb119-2"></a>    <span class="fu">&lt;TransitionGroup&gt;</span></span>
<span id="cb119-3"><a href="#cb119-3"></a>        <span class="fu">&lt;CSSTransition</span> <span class="ot">classNames</span><span class="op">=</span><span class="st">"fade"</span> <span class="ot">timeout</span><span class="op">=</span><span class="va">{</span><span class="dv">300</span><span class="va">}</span><span class="fu">&gt;</span></span>
<span id="cb119-4"><a href="#cb119-4"></a>            <span class="fu">&lt;Switch&gt;</span></span>
<span id="cb119-5"><a href="#cb119-5"></a>                <span class="fu">&lt;Route</span></span>
<span id="cb119-6"><a href="#cb119-6"></a>                    <span class="ot">exact</span></span>
<span id="cb119-7"><a href="#cb119-7"></a>                    <span class="ot">path</span><span class="op">=</span><span class="st">"/food/:name"</span></span>
<span id="cb119-8"><a href="#cb119-8"></a>                    <span class="ot">render</span><span class="op">=</span><span class="va">{</span>routeProps <span class="kw">=&gt; </span><span class="fu">&lt;Food</span> <span class="va">{</span><span class="op">...</span>routeProps<span class="va">}</span> <span class="fu">/&gt;</span><span class="va">}</span></span>
<span id="cb119-9"><a href="#cb119-9"></a>                <span class="fu">/&gt;</span></span>
<span id="cb119-10"><a href="#cb119-10"></a>                <span class="fu">&lt;Route</span></span>
<span id="cb119-11"><a href="#cb119-11"></a>                    <span class="ot">exact</span></span>
<span id="cb119-12"><a href="#cb119-12"></a>                    <span class="ot">path</span><span class="op">=</span><span class="st">"/"</span></span>
<span id="cb119-13"><a href="#cb119-13"></a>                    <span class="ot">render</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt; </span><span class="fu">&lt;FoodSearch</span> <span class="fu">/&gt;</span><span class="va">}</span></span>
<span id="cb119-14"><a href="#cb119-14"></a>                <span class="fu">/&gt;</span></span>
<span id="cb119-15"><a href="#cb119-15"></a>            <span class="fu">&lt;/Switch&gt;</span></span>
<span id="cb119-16"><a href="#cb119-16"></a>     <span class="fu">&lt;/CSSTransition&gt;</span></span>
<span id="cb119-17"><a href="#cb119-17"></a>    <span class="fu">&lt;/TransitionGroup&gt;</span></span>
<span id="cb119-18"><a href="#cb119-18"></a><span class="va">}</span><span class="fu">/&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>As with all repeating components, <code>CSSTransition</code> requires a unique-valued <code>key</code> attribute. We pass in as its <code>key</code> the current <code>location</code>’s <code>key</code> stored in <code>routeProps</code>. Note that <code>Switch</code> also needs access to the locations as a prop.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb120-1"><a href="#cb120-1"></a><span class="fu">&lt;Route</span> <span class="ot">render</span><span class="op">=</span><span class="va">{</span>({location}) <span class="kw">=&gt;</span></span>
<span id="cb120-2"><a href="#cb120-2"></a>    <span class="fu">&lt;TransitionGroup&gt;</span></span>
<span id="cb120-3"><a href="#cb120-3"></a>        <span class="fu">&lt;CSSTransition</span> <span class="ot">key</span><span class="op">=</span><span class="va">{</span>location<span class="op">.</span><span class="at">key</span><span class="va">}</span> <span class="ot">classNames</span><span class="op">=</span><span class="st">"fade"</span> <span class="ot">timeout</span><span class="op">=</span><span class="va">{</span><span class="dv">300</span><span class="va">}</span><span class="fu">&gt;</span></span>
<span id="cb120-4"><a href="#cb120-4"></a>            <span class="fu">&lt;Switch</span> <span class="ot">location</span><span class="op">=</span><span class="va">{</span>location<span class="va">}</span><span class="fu">&gt;</span></span>
<span id="cb120-5"><a href="#cb120-5"></a>                <span class="fu">&lt;Route</span></span>
<span id="cb120-6"><a href="#cb120-6"></a>                    <span class="ot">exact</span></span>
<span id="cb120-7"><a href="#cb120-7"></a>                    <span class="ot">path</span><span class="op">=</span><span class="st">"/food/:name"</span></span>
<span id="cb120-8"><a href="#cb120-8"></a>                    <span class="ot">render</span><span class="op">=</span><span class="va">{</span>routeProps <span class="kw">=&gt; </span><span class="fu">&lt;Food</span> <span class="va">{</span><span class="op">...</span>routeProps<span class="va">}</span> <span class="fu">/&gt;</span><span class="va">}</span></span>
<span id="cb120-9"><a href="#cb120-9"></a>                <span class="fu">/&gt;</span></span>
<span id="cb120-10"><a href="#cb120-10"></a>                <span class="fu">&lt;Route</span></span>
<span id="cb120-11"><a href="#cb120-11"></a>                    <span class="ot">exact</span></span>
<span id="cb120-12"><a href="#cb120-12"></a>                    <span class="ot">path</span><span class="op">=</span><span class="st">"/"</span></span>
<span id="cb120-13"><a href="#cb120-13"></a>                    <span class="ot">render</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt; </span><span class="fu">&lt;FoodSearch</span> <span class="fu">/&gt;</span><span class="va">}</span></span>
<span id="cb120-14"><a href="#cb120-14"></a>                <span class="fu">/&gt;</span></span>
<span id="cb120-15"><a href="#cb120-15"></a>            <span class="fu">&lt;/Switch&gt;</span></span>
<span id="cb120-16"><a href="#cb120-16"></a>     <span class="fu">&lt;/CSSTransition&gt;</span></span>
<span id="cb120-17"><a href="#cb120-17"></a>    <span class="fu">&lt;/TransitionGroup&gt;</span></span>
<span id="cb120-18"><a href="#cb120-18"></a><span class="va">}</span><span class="fu">/&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>At this point, the transition classes are being applied. But if we apply the styling, we’ll find that parts of the pages fade (or otherwise transition) quicker or slower than other parts. We would like the whole page to transition equally. The solution is to wrap each component in <code>render()</code> with a <code>div</code> with a descriptive <code>className</code> (such as <code>"page"</code>). This way the transition classes will apply to that <code>div</code> which contains the component wholly.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb121-1"><a href="#cb121-1"></a><span class="fu">&lt;Route</span> <span class="ot">render</span><span class="op">=</span><span class="va">{</span>({location}) <span class="kw">=&gt;</span></span>
<span id="cb121-2"><a href="#cb121-2"></a>    <span class="fu">&lt;TransitionGroup&gt;</span></span>
<span id="cb121-3"><a href="#cb121-3"></a>        <span class="fu">&lt;CSSTransition</span> <span class="ot">key</span><span class="op">=</span><span class="va">{</span>location<span class="op">.</span><span class="at">id</span><span class="va">}</span> <span class="ot">classNames</span><span class="op">=</span><span class="st">"fade"</span> <span class="ot">timeout</span><span class="op">=</span><span class="va">{</span><span class="dv">300</span><span class="va">}</span><span class="fu">&gt;</span></span>
<span id="cb121-4"><a href="#cb121-4"></a>            <span class="fu">&lt;Switch</span> <span class="ot">location</span><span class="op">=</span><span class="va">{</span>location<span class="va">}</span><span class="fu">&gt;</span></span>
<span id="cb121-5"><a href="#cb121-5"></a>                <span class="fu">&lt;Route</span></span>
<span id="cb121-6"><a href="#cb121-6"></a>                    <span class="ot">exact</span></span>
<span id="cb121-7"><a href="#cb121-7"></a>                    <span class="ot">path</span><span class="op">=</span><span class="st">"/food/:name"</span></span>
<span id="cb121-8"><a href="#cb121-8"></a>                    <span class="ot">render</span><span class="op">=</span><span class="va">{</span>routeProps <span class="kw">=&gt;</span> (</span>
<span id="cb121-9"><a href="#cb121-9"></a>                        <span class="kw">&lt;div</span> <span class="ot">className</span><span class="op">=</span><span class="st">"page"</span><span class="kw">&gt;</span></span>
<span id="cb121-10"><a href="#cb121-10"></a>                         <span class="fu">&lt;Food</span> <span class="va">{</span><span class="op">...</span>routeProps<span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb121-11"><a href="#cb121-11"></a>                        <span class="kw">&lt;/div&gt;</span></span>
<span id="cb121-12"><a href="#cb121-12"></a>                    )<span class="va">}</span></span>
<span id="cb121-13"><a href="#cb121-13"></a>                <span class="fu">/&gt;</span></span>
<span id="cb121-14"><a href="#cb121-14"></a>                <span class="fu">&lt;Route</span></span>
<span id="cb121-15"><a href="#cb121-15"></a>                    <span class="ot">exact</span></span>
<span id="cb121-16"><a href="#cb121-16"></a>                    <span class="ot">path</span><span class="op">=</span><span class="st">"/"</span></span>
<span id="cb121-17"><a href="#cb121-17"></a>                    <span class="ot">render</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> (</span>
<span id="cb121-18"><a href="#cb121-18"></a>                        <span class="kw">&lt;div</span> <span class="ot">className</span><span class="op">=</span><span class="st">"page"</span><span class="kw">&gt;</span></span>
<span id="cb121-19"><a href="#cb121-19"></a>                         <span class="fu">&lt;FoodSearch</span> <span class="fu">/&gt;</span></span>
<span id="cb121-20"><a href="#cb121-20"></a>                        <span class="kw">&lt;/div&gt;</span></span>
<span id="cb121-21"><a href="#cb121-21"></a>                    )<span class="va">}</span></span>
<span id="cb121-22"><a href="#cb121-22"></a>                <span class="fu">/&gt;</span></span>
<span id="cb121-23"><a href="#cb121-23"></a>            <span class="fu">&lt;/Switch&gt;</span></span>
<span id="cb121-24"><a href="#cb121-24"></a>     <span class="fu">&lt;/CSSTransition&gt;</span></span>
<span id="cb121-25"><a href="#cb121-25"></a>    <span class="fu">&lt;/TransitionGroup&gt;</span></span>
<span id="cb121-26"><a href="#cb121-26"></a><span class="va">}</span><span class="fu">/&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Now we can go ahead and apply the CSS classes as usual.</p></li>
</ol>
</section>
</section>
<section id="react-hooks" class="level1">
<h1>React Hooks</h1>
<section id="hooks-in-a-nutshell" class="level2">
<h2 class="anchored" data-anchor-id="hooks-in-a-nutshell">Hooks in a Nutshell</h2>
<p>Hooks allow us to write functional components that have all of the features of class-based components. Hooks also allow the sharing of stateful logic between multiple components.</p>
</section>
<section id="usestate-hook" class="level2">
<h2 class="anchored" data-anchor-id="usestate-hook">useState Hook</h2>
<p>Lets us use stateful logic in a functional component.</p>
<p><em>For example:</em> Here’s an component that increments a counter</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb122-1"><a href="#cb122-1"></a><span class="im">import</span> React<span class="op">,</span> { useState } <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb122-2"><a href="#cb122-2"></a></span>
<span id="cb122-3"><a href="#cb122-3"></a><span class="kw">function</span> <span class="fu">Counter</span>() {</span>
<span id="cb122-4"><a href="#cb122-4"></a>    <span class="kw">const</span> [count<span class="op">,</span> setCount] <span class="op">=</span> <span class="fu">useState</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb122-5"><a href="#cb122-5"></a>    <span class="cf">return</span> (</span>
<span id="cb122-6"><a href="#cb122-6"></a>        <span class="kw">&lt;div</span> <span class="ot">className</span><span class="op">=</span><span class="st">'Counter'</span><span class="kw">&gt;</span></span>
<span id="cb122-7"><a href="#cb122-7"></a>            <span class="kw">&lt;h1&gt;</span>The count is: <span class="va">{</span>count<span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb122-8"><a href="#cb122-8"></a>            <span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>() <span class="kw">=&gt;</span> <span class="fu">setCount</span>(count<span class="op">+</span><span class="dv">1</span>)<span class="va">}</span><span class="kw">&gt;</span>Add 1<span class="kw">&lt;/button&gt;</span></span>
<span id="cb122-9"><a href="#cb122-9"></a>        <span class="kw">&lt;/div&gt;</span></span>
<span id="cb122-10"><a href="#cb122-10"></a>    )<span class="op">;</span></span>
<span id="cb122-11"><a href="#cb122-11"></a>}</span>
<span id="cb122-12"><a href="#cb122-12"></a></span>
<span id="cb122-13"><a href="#cb122-13"></a><span class="im">export</span> <span class="im">default</span> Counter<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><em>Explanation:</em></p>
<p><code>useState</code> takes in a default value for the state (in this case <code>0</code>), and returns and array of two things:</p>
<ol type="1">
<li>the piece of state (in this case <code>count</code>) which is a reference to that piece of state, so it’s always current.</li>
<li>a function to update the aforementioned piece of state (in this case <code>setCount</code>)</li>
</ol>
<p>Since <code>useState</code> returns an array, we use array destructuring to grab the individual elements. We can call <code>setCount</code> anywhere to update the state, it takes the new value as input.</p>
</section>
<section id="defining-methods-inside-functional-components" class="level2">
<h2 class="anchored" data-anchor-id="defining-methods-inside-functional-components">Defining Methods Inside Functional Components</h2>
<p>We can define methods inside functional components by reference (i.e.&nbsp;with a <code>const</code>).</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb123-1"><a href="#cb123-1"></a><span class="im">import</span> React<span class="op">,</span> { useState } <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb123-2"><a href="#cb123-2"></a></span>
<span id="cb123-3"><a href="#cb123-3"></a><span class="kw">function</span> <span class="fu">Toggler</span>() {</span>
<span id="cb123-4"><a href="#cb123-4"></a>    <span class="kw">const</span> [isHappy<span class="op">,</span> setIsHappy] <span class="op">=</span> <span class="fu">useState</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb123-5"><a href="#cb123-5"></a>    <span class="kw">const</span> toggle <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb123-6"><a href="#cb123-6"></a>        <span class="fu">setIsHappy</span>(<span class="op">!</span>isHappy)<span class="op">;</span></span>
<span id="cb123-7"><a href="#cb123-7"></a>    }</span>
<span id="cb123-8"><a href="#cb123-8"></a>    <span class="cf">return </span><span class="kw">&lt;h1</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>toggle<span class="va">}</span><span class="kw">&gt;</span><span class="va">{</span>isHappy <span class="op">?</span> <span class="st">":)"</span> <span class="op">:</span> <span class="st">":("</span><span class="va">}</span><span class="kw">&lt;/h1&gt;</span><span class="op">;</span></span>
<span id="cb123-9"><a href="#cb123-9"></a>}</span>
<span id="cb123-10"><a href="#cb123-10"></a></span>
<span id="cb123-11"><a href="#cb123-11"></a><span class="im">export</span> <span class="im">default</span> Toggler<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>But what if we wanted to add more togglable states, such as <code>isHeartBroken</code>? We’d need to write a separate toggler method for that… unless we define a custom hook.</p>
</section>
<section id="building-a-custom-hook-usetogglestate" class="level2">
<h2 class="anchored" data-anchor-id="building-a-custom-hook-usetogglestate">Building a Custom Hook: useToggleState</h2>
<p>By convention we define our hooks in an external file which we put in a folder called <code>hooks</code>.</p>
<ol type="1">
<li><p>In <code>/src</code> create a folder called <code>hooks</code>.</p></li>
<li><p>Create a hook named <code>useToggle.js</code></p>
<p><code>useToggle.js</code></p>
<div class="sourceCode" id="cb124"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb124-1"><a href="#cb124-1"></a><span class="im">import</span> { useState } <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb124-2"><a href="#cb124-2"></a></span>
<span id="cb124-3"><a href="#cb124-3"></a><span class="kw">function</span> <span class="fu">useToggle</span>(initialVal <span class="op">=</span> <span class="kw">false</span>) {</span>
<span id="cb124-4"><a href="#cb124-4"></a>    <span class="kw">const</span> [state<span class="op">,</span> setState] <span class="op">=</span> <span class="fu">useState</span>(initialVal)<span class="op">;</span> <span class="co">/* Allocates a piece of state with its accessor function  */</span></span>
<span id="cb124-5"><a href="#cb124-5"></a>    <span class="kw">const</span> toggle <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb124-6"><a href="#cb124-6"></a>        <span class="fu">setState</span>(<span class="op">!</span>state)</span>
<span id="cb124-7"><a href="#cb124-7"></a>    }</span>
<span id="cb124-8"><a href="#cb124-8"></a>    <span class="cf">return</span> [state<span class="op">,</span> toggle]<span class="op">;</span></span>
<span id="cb124-9"><a href="#cb124-9"></a>} </span>
<span id="cb124-10"><a href="#cb124-10"></a></span>
<span id="cb124-11"><a href="#cb124-11"></a><span class="im">export</span> <span class="im">default</span> useToggle<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>useToggle</code> hook generalizes the toggle we saw in the previous section. It accepts an initial value as input (initialized to <code>false</code> in case it receives no input).</p></li>
<li><p>In the main component, we import the hook.</p>
<p><code>Toggler.js</code></p>
<div class="sourceCode" id="cb125"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb125-1"><a href="#cb125-1"></a><span class="im">import</span> React<span class="op">,</span> { useState } <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb125-2"><a href="#cb125-2"></a><span class="im">import</span> useToggle <span class="im">from</span> <span class="st">'./hooks/useToggle'</span><span class="op">;</span></span>
<span id="cb125-3"><a href="#cb125-3"></a></span>
<span id="cb125-4"><a href="#cb125-4"></a><span class="kw">function</span> <span class="fu">Toggler</span>() {</span>
<span id="cb125-5"><a href="#cb125-5"></a>    <span class="kw">const</span> [isHappy<span class="op">,</span> toggleIsHappy] <span class="op">=</span> <span class="fu">useToggle</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb125-6"><a href="#cb125-6"></a>    <span class="kw">const</span> [isHeartbroken<span class="op">,</span> toggleIsHeartbroken] <span class="op">=</span> <span class="fu">useToggle</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb125-7"><a href="#cb125-7"></a>    <span class="cf">return</span> (</span>
<span id="cb125-8"><a href="#cb125-8"></a>        <span class="kw">&lt;div&gt;</span></span>
<span id="cb125-9"><a href="#cb125-9"></a>         <span class="kw">&lt;h1</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>toggleIsHappy<span class="va">}</span><span class="kw">&gt;</span><span class="va">{</span>isHappy <span class="op">?</span> <span class="st">":)"</span> <span class="op">:</span> <span class="st">":("</span><span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb125-10"><a href="#cb125-10"></a>            <span class="kw">&lt;h1</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>toggleIsHeartbroken<span class="va">}</span><span class="kw">&gt;</span><span class="va">{</span>isHeartbroken <span class="op">?</span> <span class="st">"&lt;/3"</span> <span class="op">:</span> <span class="st">"&lt;3"</span><span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb125-11"><a href="#cb125-11"></a>        <span class="kw">&lt;/div&gt;</span></span>
<span id="cb125-12"><a href="#cb125-12"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</section>
<section id="building-a-custom-hook-userinputstate" class="level2">
<h2 class="anchored" data-anchor-id="building-a-custom-hook-userinputstate">Building a Custom Hook: userInputState</h2>
<p>As we’ve seen in React it’s a lot of work to create an input form. We need an input field with an <code>onChange</code>, a change event handler, and a piece of state to update. The following custom hook makes creating inputs easier.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb126-1"><a href="#cb126-1"></a><span class="im">import</span> React<span class="op">,</span> { useState } <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb126-2"><a href="#cb126-2"></a></span>
<span id="cb126-3"><a href="#cb126-3"></a><span class="im">export</span> <span class="im">default</span> <span class="kw">function</span> <span class="fu">SimpleForm</span>() {</span>
<span id="cb126-4"><a href="#cb126-4"></a>    <span class="kw">const</span> [email<span class="op">,</span> setEmail] <span class="op">=</span> <span class="fu">useState</span>(<span class="st">""</span>)<span class="op">;</span></span>
<span id="cb126-5"><a href="#cb126-5"></a>    <span class="kw">const</span> handleChange <span class="op">=</span> (evt) <span class="kw">=&gt;</span> {</span>
<span id="cb126-6"><a href="#cb126-6"></a>        <span class="fu">setEmail</span>(evt<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">;</span></span>
<span id="cb126-7"><a href="#cb126-7"></a>    }</span>
<span id="cb126-8"><a href="#cb126-8"></a>    <span class="kw">const</span> reset <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb126-9"><a href="#cb126-9"></a>        <span class="fu">setEmail</span>(<span class="st">""</span>)<span class="op">;</span></span>
<span id="cb126-10"><a href="#cb126-10"></a>    }</span>
<span id="cb126-11"><a href="#cb126-11"></a>    <span class="cf">return</span> (</span>
<span id="cb126-12"><a href="#cb126-12"></a>        <span class="kw">&lt;div&gt;</span></span>
<span id="cb126-13"><a href="#cb126-13"></a>            <span class="kw">&lt;h1&gt;</span>The value is: <span class="va">{</span>email<span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb126-14"><a href="#cb126-14"></a>            <span class="kw">&lt;input</span> <span class="ot">type</span><span class="op">=</span><span class="st">"text"</span> <span class="ot">value</span><span class="op">=</span><span class="va">{</span>email<span class="va">}</span> <span class="ot">onChange</span><span class="op">=</span><span class="va">{</span>handleChange<span class="va">}</span> <span class="kw">/&gt;</span></span>
<span id="cb126-15"><a href="#cb126-15"></a>            <span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>reset<span class="va">}</span><span class="kw">&gt;&lt;/button&gt;</span></span>
<span id="cb126-16"><a href="#cb126-16"></a>        <span class="kw">&lt;/div&gt;</span></span>
<span id="cb126-17"><a href="#cb126-17"></a>    )<span class="op">;</span></span>
<span id="cb126-18"><a href="#cb126-18"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Let’s extract some of this stateful logic into its own generic hook, as before.</p>
<p><strong>The proper way to do input with hooks:</strong></p>
<p><code>useInputState.js</code></p>
<div class="sourceCode" id="cb127"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb127-1"><a href="#cb127-1"></a><span class="im">import</span> React<span class="op">,</span> { useState } <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb127-2"><a href="#cb127-2"></a></span>
<span id="cb127-3"><a href="#cb127-3"></a><span class="im">export</span> <span class="im">default</span> initialVal <span class="kw">=&gt;</span> {</span>
<span id="cb127-4"><a href="#cb127-4"></a>    <span class="kw">const</span> [state<span class="op">,</span> setState] <span class="op">=</span> <span class="fu">useState</span>(initialVal)<span class="op">;</span></span>
<span id="cb127-5"><a href="#cb127-5"></a>    <span class="kw">const</span> handleChange <span class="op">=</span> (evt) <span class="kw">=&gt;</span> {</span>
<span id="cb127-6"><a href="#cb127-6"></a>        <span class="fu">setState</span>(evt<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="op">;</span></span>
<span id="cb127-7"><a href="#cb127-7"></a>    }</span>
<span id="cb127-8"><a href="#cb127-8"></a>    <span class="kw">const</span> reset <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb127-9"><a href="#cb127-9"></a>        <span class="fu">setState</span>(<span class="st">""</span>)<span class="op">;</span></span>
<span id="cb127-10"><a href="#cb127-10"></a>    }</span>
<span id="cb127-11"><a href="#cb127-11"></a>    <span class="cf">return</span> [state<span class="op">,</span> handleChange<span class="op">,</span> reset]<span class="op">;</span></span>
<span id="cb127-12"><a href="#cb127-12"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then in the main component…</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb128-1"><a href="#cb128-1"></a><span class="im">import</span> react <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb128-2"><a href="#cb128-2"></a><span class="im">import</span> useInputState <span class="im">from</span> <span class="st">'./src/useInputState'</span><span class="op">;</span></span>
<span id="cb128-3"><a href="#cb128-3"></a></span>
<span id="cb128-4"><a href="#cb128-4"></a><span class="im">export</span> <span class="im">default</span> <span class="kw">function</span> <span class="fu">SimpleForm</span>() {</span>
<span id="cb128-5"><a href="#cb128-5"></a>    <span class="kw">const</span> [email<span class="op">,</span> updateEmail<span class="op">,</span> resetEmail] <span class="op">=</span> <span class="fu">useInputState</span>(<span class="st">""</span>)<span class="op">;</span></span>
<span id="cb128-6"><a href="#cb128-6"></a>    <span class="cf">return</span>(</span>
<span id="cb128-7"><a href="#cb128-7"></a>        <span class="kw">&lt;div&gt;</span></span>
<span id="cb128-8"><a href="#cb128-8"></a>            <span class="kw">&lt;h1&gt;</span>The value is: <span class="va">{</span>email<span class="va">}</span><span class="kw">&lt;/h1&gt;</span></span>
<span id="cb128-9"><a href="#cb128-9"></a>            <span class="kw">&lt;input</span> <span class="ot">type</span><span class="op">=</span><span class="st">"text"</span> <span class="ot">value</span><span class="op">=</span><span class="va">{</span>email<span class="va">}</span> <span class="ot">onChange</span><span class="op">=</span><span class="va">{</span>updateEmail<span class="va">}</span><span class="kw">&gt;&lt;/input&gt;</span></span>
<span id="cb128-10"><a href="#cb128-10"></a>            <span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>resetEmail<span class="va">}</span><span class="kw">&gt;&lt;/button&gt;</span></span>
<span id="cb128-11"><a href="#cb128-11"></a>        <span class="kw">&lt;/div&gt;</span></span>
<span id="cb128-12"><a href="#cb128-12"></a>    )<span class="op">;</span></span>
<span id="cb128-13"><a href="#cb128-13"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="useeffect-hook" class="level2">
<h2 class="anchored" data-anchor-id="useeffect-hook">useEffect Hook</h2>
<p>This is another built-in hook like <code>useState</code>. It gives the functional components a way to emulate <em>life cycle methods</em> which are exclusively for class-based components.</p>
<p><code>Counter.js</code></p>
<div class="sourceCode" id="cb129"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb129-1"><a href="#cb129-1"></a><span class="im">import</span> React<span class="op">,</span> { useState<span class="op">,</span> useEffect } <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb129-2"><a href="#cb129-2"></a></span>
<span id="cb129-3"><a href="#cb129-3"></a><span class="kw">function</span> <span class="fu">Counter</span>() {</span>
<span id="cb129-4"><a href="#cb129-4"></a>    <span class="kw">const</span> [count<span class="op">,</span> setCount] <span class="op">=</span> <span class="fu">useState</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb129-5"><a href="#cb129-5"></a>    <span class="cf">return </span><span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>()<span class="kw">=&gt;</span> <span class="fu">setCount</span>(count<span class="op">+</span><span class="dv">1</span>)<span class="va">}</span><span class="kw">&gt;</span>Add 1<span class="kw">&lt;/button&gt;</span><span class="op">;</span></span>
<span id="cb129-6"><a href="#cb129-6"></a>}</span>
<span id="cb129-7"><a href="#cb129-7"></a></span>
<span id="cb129-8"><a href="#cb129-8"></a><span class="im">export</span> <span class="im">default</span> Counter<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now suppose we want some function to execute after the state has been set. With class-based components, we could pass in a callback function to <code>setState()</code> but that’s not an option with functional components. Instead, we pass in the callback function to <code>useEffect()</code>.</p>
<p><code>Counter.js</code></p>
<div class="sourceCode" id="cb130"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb130-1"><a href="#cb130-1"></a><span class="im">import</span> React<span class="op">,</span> { useState<span class="op">,</span> useEffect } <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb130-2"><a href="#cb130-2"></a></span>
<span id="cb130-3"><a href="#cb130-3"></a><span class="kw">function</span> <span class="fu">Counter</span>() {</span>
<span id="cb130-4"><a href="#cb130-4"></a>    <span class="kw">const</span> [count<span class="op">,</span> setount] <span class="op">=</span> <span class="fu">useState</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb130-5"><a href="#cb130-5"></a>    <span class="fu">useEffect</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb130-6"><a href="#cb130-6"></a>        <span class="fu">alert</span>(<span class="vs">`You clicked </span><span class="sc">${</span>count<span class="sc">}</span><span class="vs"> times`</span>)</span>
<span id="cb130-7"><a href="#cb130-7"></a>    })<span class="op">;</span></span>
<span id="cb130-8"><a href="#cb130-8"></a>    <span class="cf">return </span><span class="kw">&lt;button</span> <span class="ot">onClick</span><span class="op">=</span><span class="va">{</span>()<span class="kw">=&gt;</span> <span class="fu">setCount</span>(count<span class="op">+</span><span class="dv">1</span>)<span class="va">}</span><span class="kw">&gt;</span>Add 1<span class="kw">&lt;/button&gt;</span><span class="op">;</span></span>
<span id="cb130-9"><a href="#cb130-9"></a>}</span>
<span id="cb130-10"><a href="#cb130-10"></a></span>
<span id="cb130-11"><a href="#cb130-11"></a><span class="im">export</span> <span class="im">default</span> Counter<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="making-api-calls-in-useeffect" class="level2">
<h2 class="anchored" data-anchor-id="making-api-calls-in-useeffect">Making API Calls in useEffect</h2>
<p>Instead of making calls in a <code>componentDidMount()</code> lifecycle method, we make them in the <code>useEffect</code> hook. However, we don’t want there to be an API call on every re-render, so we configure the <code>useEffect</code> hook.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb131-1"><a href="#cb131-1"></a><span class="im">import</span> React <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb131-2"><a href="#cb131-2"></a><span class="im">import</span> axios <span class="im">from</span> <span class="st">'axios'</span><span class="op">;</span></span>
<span id="cb131-3"><a href="#cb131-3"></a></span>
<span id="cb131-4"><a href="#cb131-4"></a><span class="kw">function</span> <span class="fu">StarWarsMovies</span>() {</span>
<span id="cb131-5"><a href="#cb131-5"></a>    </span>
<span id="cb131-6"><a href="#cb131-6"></a>    <span class="kw">const</span> [movieNum<span class="op">,</span> setMovieNum] <span class="op">=</span> <span class="fu">useState</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb131-7"><a href="#cb131-7"></a>    <span class="kw">const</span> [movie<span class="op">,</span> setMovie] <span class="op">=</span> <span class="fu">useState</span>(<span class="st">""</span>)<span class="op">;</span></span>
<span id="cb131-8"><a href="#cb131-8"></a>    </span>
<span id="cb131-9"><a href="#cb131-9"></a>    <span class="co">/* What we cannot do */</span></span>
<span id="cb131-10"><a href="#cb131-10"></a>    <span class="fu">useEffect</span>(<span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb131-11"><a href="#cb131-11"></a>      <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> axios<span class="op">.</span><span class="fu">get</span>(<span class="vs">`https://swapi.co/api/films/</span><span class="sc">${</span>number<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb131-12"><a href="#cb131-12"></a>    })<span class="op">;</span></span>
<span id="cb131-13"><a href="#cb131-13"></a>    </span>
<span id="cb131-14"><a href="#cb131-14"></a>    <span class="co">/* What we should do */</span></span>
<span id="cb131-15"><a href="#cb131-15"></a>    <span class="fu">useEffect</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb131-16"><a href="#cb131-16"></a>        <span class="kw">async</span> <span class="kw">function</span> <span class="fu">getData</span>() {</span>
<span id="cb131-17"><a href="#cb131-17"></a>            <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> axios<span class="op">.</span><span class="fu">get</span>(<span class="vs">`https://swapi.co/api/films/</span><span class="sc">${</span>number<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb131-18"><a href="#cb131-18"></a>            <span class="fu">setMovie</span>(response<span class="op">.</span><span class="at">data</span>)<span class="op">;</span></span>
<span id="cb131-19"><a href="#cb131-19"></a>        }</span>
<span id="cb131-20"><a href="#cb131-20"></a>        <span class="fu">getData</span>()<span class="op">;</span></span>
<span id="cb131-21"><a href="#cb131-21"></a>    }<span class="op">,</span> [movieNum])<span class="op">;</span></span>
<span id="cb131-22"><a href="#cb131-22"></a>    </span>
<span id="cb131-23"><a href="#cb131-23"></a>    <span class="cf">return</span>(</span>
<span id="cb131-24"><a href="#cb131-24"></a>        <span class="kw">&lt;div&gt;</span></span>
<span id="cb131-25"><a href="#cb131-25"></a>            <span class="kw">&lt;h1&gt;</span>Pick a movie<span class="kw">&lt;/h1&gt;</span></span>
<span id="cb131-26"><a href="#cb131-26"></a>            <span class="kw">&lt;h4&gt;</span><span class="va">{</span>movie<span class="op">.</span><span class="at">title</span><span class="va">}</span><span class="kw">&lt;/h4&gt;</span></span>
<span id="cb131-27"><a href="#cb131-27"></a>            <span class="kw">&lt;select</span> <span class="ot">value</span><span class="op">=</span><span class="va">{</span>movieNum<span class="va">}</span> <span class="ot">onChange</span><span class="op">=</span><span class="va">{</span>(evt) <span class="kw">=&gt;</span> <span class="fu">setNumber</span>(evt<span class="op">.</span><span class="at">target</span><span class="op">.</span><span class="at">value</span>)<span class="va">}</span><span class="kw">&gt;</span></span>
<span id="cb131-28"><a href="#cb131-28"></a>                <span class="kw">&lt;option</span> <span class="ot">value</span><span class="op">=</span><span class="st">'1'</span><span class="kw">&gt;</span>1<span class="kw">&lt;/option&gt;</span></span>
<span id="cb131-29"><a href="#cb131-29"></a>                <span class="kw">&lt;option</span> <span class="ot">value</span><span class="op">=</span><span class="st">'2'</span><span class="kw">&gt;</span>2<span class="kw">&lt;/option&gt;</span></span>
<span id="cb131-30"><a href="#cb131-30"></a>                <span class="kw">&lt;option</span> <span class="ot">value</span><span class="op">=</span><span class="st">'3'</span><span class="kw">&gt;</span>3<span class="kw">&lt;/option&gt;</span></span>
<span id="cb131-31"><a href="#cb131-31"></a>                <span class="kw">&lt;option</span> <span class="ot">value</span><span class="op">=</span><span class="st">'4'</span><span class="kw">&gt;</span>4<span class="kw">&lt;/option&gt;</span></span>
<span id="cb131-32"><a href="#cb131-32"></a>                <span class="kw">&lt;option</span> <span class="ot">value</span><span class="op">=</span><span class="st">'5'</span><span class="kw">&gt;</span>5<span class="kw">&lt;/option&gt;</span></span>
<span id="cb131-33"><a href="#cb131-33"></a>                <span class="kw">&lt;option</span> <span class="ot">value</span><span class="op">=</span><span class="st">'6'</span><span class="kw">&gt;</span>6<span class="kw">&lt;/option&gt;</span></span>
<span id="cb131-34"><a href="#cb131-34"></a>                <span class="kw">&lt;option</span> <span class="ot">value</span><span class="op">=</span><span class="st">'7'</span><span class="kw">&gt;</span>7<span class="kw">&lt;/option&gt;</span></span>
<span id="cb131-35"><a href="#cb131-35"></a>            <span class="kw">&lt;/select&gt;</span></span>
<span id="cb131-36"><a href="#cb131-36"></a>        <span class="kw">&lt;/div&gt;</span></span>
<span id="cb131-37"><a href="#cb131-37"></a>    )<span class="op">;</span></span>
<span id="cb131-38"><a href="#cb131-38"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Note 1:</em> The function that <code>useEffect</code> gets can’t be <code>async</code> itself. The workaround is to define an <code>async</code> function in the function <code>useEffect</code> gets and call it within the function.</p>
</blockquote>
<blockquote class="blockquote">
<p><em>Note 2:</em> If we don’t pass a second argument, the array <code>[movieNum]</code> to <code>useState</code>, then we get an infinite loop making API requests. Why? Because <code>setMovie</code> changes the state, triggering <code>useEffect</code> again, which calls <code>setMovie</code> again triggering <code>useEffect</code> again, etc. The second argument contains an array of state pieces such that <code>useEffect</code> runs if and only if one of those changes.</p>
</blockquote>
</section>
</section>
<section id="react-context-api" class="level1">
<h1>React Context API</h1>
<section id="introduction-to-context" class="level2">
<h2 class="anchored" data-anchor-id="introduction-to-context">Introduction to Context</h2>
<p>Redux is a way of centralizing the state (and logic) of a React application. We’re building towards using two hooks, <code>useReducer</code> and <code>useContext</code>, to manage the unwieldly React state so that we may avoid using Redux. However, <em>context</em> exists as a separate topic to hooks. There’s a way to use context with or without hooks, and we shall examine both ways.</p>
<p>As we saw in the <em>Massive Color Project</em> a common pain-point of React is keeping track of state across multiple components, especially when sharing data across one component (higher up the DOM tree), to another component multiple levels down. We’d have to pass as props over and over…</p>
<p>Context is like a <em>pool</em> of data and their accessors that every component can access.</p>
</section>
<section id="theme-context" class="level2">
<h2 class="anchored" data-anchor-id="theme-context">Theme Context</h2>
<p>Suppose we want to add a light/dark theme toggle to our site. A lot of components, across various levels in the DOM tree, will be affected by this toggle. So, it makes sense to add the piece of state that governs the theme (along with its accessor) to a context file.</p>
<ol type="1">
<li><p>Create a folder in <code>/src</code> named contexts.</p></li>
<li><p>Create a <em>context component</em> in <code>contexts</code> named <code>ThemeContext.js</code>.</p></li>
<li><p>Import <code>createContext</code> .</p>
<p><code>ThemeContext.js</code></p>
<div class="sourceCode" id="cb132"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb132-1"><a href="#cb132-1"></a><span class="im">import</span> React<span class="op">,</span> { createContext } <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb132-2"><a href="#cb132-2"></a></span>
<span id="cb132-3"><a href="#cb132-3"></a><span class="kw">const</span> ThemeContext <span class="op">=</span> <span class="fu">createContext</span>()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Define a corresponding <em>provider component</em> called <code>ThemeProvider.js</code>. The <em>context consumer</em> subscribes to the provider component in order to sync with context.</p>
<p><code>ThemeContext.js</code></p>
<div class="sourceCode" id="cb133"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb133-1"><a href="#cb133-1"></a><span class="im">import</span> React<span class="op">,</span> { createContext } <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb133-2"><a href="#cb133-2"></a></span>
<span id="cb133-3"><a href="#cb133-3"></a><span class="kw">const</span> ThemeContext <span class="op">=</span> <span class="fu">createContext</span>()<span class="op">;</span></span>
<span id="cb133-4"><a href="#cb133-4"></a></span>
<span id="cb133-5"><a href="#cb133-5"></a><span class="kw">class</span> ThemeProvider <span class="kw">extends</span> Component {</span>
<span id="cb133-6"><a href="#cb133-6"></a>    <span class="fu">render</span>() {</span>
<span id="cb133-7"><a href="#cb133-7"></a>        <span class="cf">return</span>(</span>
<span id="cb133-8"><a href="#cb133-8"></a>            <span class="fu">&lt;ThemeContext.Provider&gt;</span></span>
<span id="cb133-9"><a href="#cb133-9"></a>                <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">children</span><span class="va">}</span></span>
<span id="cb133-10"><a href="#cb133-10"></a>            <span class="fu">&lt;/ThemeContext.Provider&gt;</span></span>
<span id="cb133-11"><a href="#cb133-11"></a>        )<span class="op">;</span></span>
<span id="cb133-12"><a href="#cb133-12"></a>    }</span>
<span id="cb133-13"><a href="#cb133-13"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Explanation:</em> Every <code>ThemeContext</code> has a <code>Provider</code>. When we use a <code>&lt;ThemeProvider /&gt;</code> component to wrap the theme consumers, all it does is return the aforementioned consumers wrapped in <code>ThemeContext.Provider</code>.</p>
</blockquote></li>
<li><p>Pass data and its accessor method to the context.</p>
<p><code>ThemeContext.js</code></p>
<div class="sourceCode" id="cb134"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb134-1"><a href="#cb134-1"></a><span class="im">import</span> React<span class="op">,</span> { createContext } <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb134-2"><a href="#cb134-2"></a></span>
<span id="cb134-3"><a href="#cb134-3"></a><span class="im">export</span> <span class="kw">const</span> ThemeContext <span class="op">=</span> <span class="fu">createContext</span>()<span class="op">;</span></span>
<span id="cb134-4"><a href="#cb134-4"></a></span>
<span id="cb134-5"><a href="#cb134-5"></a><span class="im">export</span> <span class="kw">class</span> ThemeProvider <span class="kw">extends</span> Component {</span>
<span id="cb134-6"><a href="#cb134-6"></a>    <span class="fu">constructor</span>(props) {</span>
<span id="cb134-7"><a href="#cb134-7"></a>        <span class="kw">super</span>(props)<span class="op">;</span></span>
<span id="cb134-8"><a href="#cb134-8"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">state</span> <span class="op">=</span> {<span class="dt">isDarkMode</span><span class="op">:</span> <span class="kw">true</span>}<span class="op">;</span></span>
<span id="cb134-9"><a href="#cb134-9"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">toggleTheme</span> <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="at">toggleTheme</span><span class="op">.</span><span class="fu">bind</span>(<span class="kw">this</span>)<span class="op">;</span></span>
<span id="cb134-10"><a href="#cb134-10"></a>    }</span>
<span id="cb134-11"><a href="#cb134-11"></a>    <span class="fu">toggleTheme</span>() {</span>
<span id="cb134-12"><a href="#cb134-12"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">setState</span>({<span class="dt">isDarkMode</span><span class="op">:</span> <span class="op">!</span><span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">.</span><span class="at">isDarkMode</span>})<span class="op">;</span></span>
<span id="cb134-13"><a href="#cb134-13"></a>    }</span>
<span id="cb134-14"><a href="#cb134-14"></a>    <span class="fu">render</span>() {</span>
<span id="cb134-15"><a href="#cb134-15"></a>        <span class="cf">return</span>(</span>
<span id="cb134-16"><a href="#cb134-16"></a>            <span class="fu">&lt;ThemeContext.Provider</span> <span class="ot">value</span><span class="op">=</span><span class="va">{</span>{<span class="op">...</span><span class="kw">this</span><span class="op">.</span><span class="at">state</span><span class="op">,</span> <span class="dt">toggleTheme</span><span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="at">toggleTheme</span>}<span class="va">}</span><span class="fu">&gt;</span></span>
<span id="cb134-17"><a href="#cb134-17"></a>                <span class="va">{</span><span class="kw">this</span><span class="op">.</span><span class="at">props</span><span class="op">.</span><span class="at">children</span><span class="va">}</span></span>
<span id="cb134-18"><a href="#cb134-18"></a>            <span class="fu">&lt;/ThemeContext.Provider&gt;</span></span>
<span id="cb134-19"><a href="#cb134-19"></a>        )<span class="op">;</span></span>
<span id="cb134-20"><a href="#cb134-20"></a>    }</span>
<span id="cb134-21"><a href="#cb134-21"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<blockquote class="blockquote">
<p><em>Explanation:</em> All the children (that is all the theme consumers) receive what’s passed down through <code>value</code> which accepts only one input (though it can be a primitive, an array, as well as an object) .</p>
</blockquote></li>
<li><p>Consume the context.</p></li>
<li><p>In the consumer, import the context.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb135-1"><a href="#cb135-1"></a><span class="im">import</span> {ThemeContext} <span class="im">from</span> <span class="st">'./contexts/ThemeContext'</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Set <code>contextType</code> in the consumer which tells the consumer to check if it’s in a context provider of that type.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb136-1"><a href="#cb136-1"></a><span class="im">import</span> React<span class="op">,</span> {Component} <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb136-2"><a href="#cb136-2"></a><span class="im">import</span> {ThemeContext} <span class="im">from</span> <span class="st">'./contexts/ThemeContext'</span><span class="op">;</span></span>
<span id="cb136-3"><a href="#cb136-3"></a></span>
<span id="cb136-4"><a href="#cb136-4"></a><span class="kw">class</span> Consumer <span class="kw">extends</span> Component {</span>
<span id="cb136-5"><a href="#cb136-5"></a>    <span class="kw">static</span> contextType <span class="op">=</span> ThemeContext<span class="op">;</span></span>
<span id="cb136-6"><a href="#cb136-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Access the context.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb137-1"><a href="#cb137-1"></a><span class="im">import</span> React<span class="op">,</span> {Component} <span class="im">from</span> <span class="st">'react'</span><span class="op">;</span></span>
<span id="cb137-2"><a href="#cb137-2"></a><span class="im">import</span> {ThemeContext} <span class="im">from</span> <span class="st">'./contexts/ThemeContext'</span><span class="op">;</span></span>
<span id="cb137-3"><a href="#cb137-3"></a></span>
<span id="cb137-4"><a href="#cb137-4"></a><span class="kw">class</span> Consumer <span class="kw">extends</span> Component {</span>
<span id="cb137-5"><a href="#cb137-5"></a>    <span class="kw">static</span> contextType <span class="op">=</span> ThemeContext<span class="op">;</span></span>
<span id="cb137-6"><a href="#cb137-6"></a>  <span class="fu">render</span>() {</span>
<span id="cb137-7"><a href="#cb137-7"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="kw">this</span><span class="op">.</span><span class="at">context</span>)<span class="op">;</span></span>
<span id="cb137-8"><a href="#cb137-8"></a>  }</span>
<span id="cb137-9"><a href="#cb137-9"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</section>
<section id="adding-a-second-context" class="level2">
<h2 class="anchored" data-anchor-id="adding-a-second-context">Adding a Second Context</h2>
<p>What if we wish to also add a <code>LanguageContext</code>? We can’t just make another context and its provider as before… well, we can but we can’t consume a second content. We will need to make our own <em>higher order component</em> as a workaround to this problem.</p>
<p><strong>Making a HOC</strong></p>
<p>We need to make the consumer component into a higher order component by passing it into a builder function that also takes in the context as input. We’ve seen this pattern with styles and routers. Recall…</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode numberSource jsx number-lines code-with-copy"><code class="sourceCode javascriptreact"><span id="cb138-1"><a href="#cb138-1"></a><span class="im">export</span> <span class="im">default</span> <span class="fu">withStyles</span>(styles)(Consumer)<span class="op">;</span></span>
<span id="cb138-2"><a href="#cb138-2"></a><span class="im">export</span> <span class="im">default</span> <span class="fu">withRouter</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>…</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/v-poghosyan\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2021, Vahram Poghosyan</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.github.com/v-poghosyan">
      <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/vahrampoghosyan/">
      <i class="bi bi-linkedin" role="img" aria-label="GitHub">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>